import{C as i,o,e as l,a as t,q as p,D as m,F as u,h as w,t as d,f as h,M as f,b as y}from"./app-b9f882bc.js";import{_ as b}from"./_plugin-vue_export-helper-c27b6911.js";const k={props:{stream:Object},data(){return{loading:!0,deposits:[],newDeposit:{amount:0,casino:"",stream_id:null}}},async mounted(){await this.getStreamDeposit(),this.loading=!1},methods:{async getStreamDeposit(){this.newDeposit.stream_id=this.stream.id,await i.get("/api/deposits/"+this.stream.id).then(e=>{this.deposits=e.data.deposits}).catch(e=>{console.log(e)})},async createDeposit(){this.loading=!0;let e=this.newDeposit;await i.post("/api/deposits",{payload:e}).then(()=>{this.getStreamDeposit()}).catch(a=>{console.log(a)}).finally(()=>{this.loading=!1})},formatDateLabels(e){const a=new Date(e),c=a.getDate().toString().padStart(2,"0"),g=(a.getMonth()+1).toString().padStart(2,"0"),r=a.getFullYear();return`${c}-${g}-${r}`}}},D={class:"grid grid-cols-3 gap-2"},S=t("label",{for:"deposit",class:"block mb-2 text-sm font-medium text-gray-900"},"Depozit",-1),v=t("label",{for:"casino",class:"block mb-2 text-sm font-medium text-gray-900"},"Casino",-1),$={class:"self-end"},W={key:0,class:"relative overflow-x-auto shadow-md sm:rounded-lg mt-6"},C={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},L=t("thead",{class:"p-6 text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-400"},[t("tr",{class:"table-row"},[t("th",{class:"p-2 table-cell text-left"},"ID"),t("th",{class:"p-2 table-cell text-left"},"Suma"),t("th",{class:"p-2 table-cell text-left"},"Casino"),t("th",{class:"p-2 table-cell text-left"},"Data")])],-1),N={class:"p-2 table-cell text-left"},V={class:"p-2 table-cell text-left"},B={class:"p-2 table-cell text-left"},F={class:"p-2 table-cell text-left"};function M(e,a,c,g,r,n){return o(),l(u,null,[t("div",D,[t("div",null,[S,p(t("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>r.newDeposit.amount=s),type:"text",id:"deposit",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Depus în lei"},null,512),[[m,r.newDeposit.amount]])]),t("div",null,[v,p(t("input",{"onUpdate:modelValue":a[1]||(a[1]=s=>r.newDeposit.casino=s),type:"text",id:"casino",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Nume Casino"},null,512),[[m,r.newDeposit.casino]])]),t("div",$,[t("button",{type:"button",onClick:a[2]||(a[2]=(...s)=>n.createDeposit&&n.createDeposit(...s)),class:"w-full focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800"}," Add ")])]),r.loading?h("",!0):(o(),l("div",W,[t("table",C,[L,t("tbody",null,[(o(!0),l(u,null,w(r.deposits,s=>(o(),l("tr",{class:"p-2 bg-white border-b dark:bg-gray-900 dark:border-gray-700",key:s.id},[t("td",N,d(s.id),1),t("td",V,d(s.amount),1),t("td",B,d(s.casino),1),t("td",F,d(n.formatDateLabels(s.created_at)),1)]))),128))])])]))],64)}const O=b(k,[["render",M]]),U={props:{stream:Object},data(){return{loading:!0,deposits:[],newWithdrawal:{amount:0,stream_id:null}}},async mounted(){await this.getStreamWithdrawals(),this.loading=!1},methods:{async getStreamWithdrawals(){this.newWithdrawal.stream_id=this.stream.id,await i.get("/api/withdrawals/"+this.stream.id).then(e=>{this.withdrawals=e.data.withdrawals}).catch(e=>{console.log(e)}),this.loading=!1},async createWithdraw(){this.loading=!0;let e=this.newWithdrawal;await i.post("/api/withdrawals",{payload:e}).then(()=>{this.getStreamWithdrawals()}).catch(a=>{console.log(a)})},formatDateLabels(e){const a=new Date(e),c=a.getDate().toString().padStart(2,"0"),g=(a.getMonth()+1).toString().padStart(2,"0"),r=a.getFullYear();return`${c}-${g}-${r}`}}},j={class:"grid grid-cols-2 gap-2"},E=t("label",{for:"deposit",class:"block mb-2 text-sm font-medium text-gray-900"},"Retragere",-1),I={class:"self-end"},Y={key:0,class:"relative overflow-x-auto shadow-md sm:rounded-lg mt-6"},q={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},z=t("thead",{class:"p-6 text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-400"},[t("tr",{class:"table-row"},[t("th",{class:"p-2 table-cell text-left"},"ID"),t("th",{class:"p-2 table-cell text-left"},"Suma"),t("th",{class:"p-2 table-cell text-left"},"Data")])],-1),A={class:"p-2 table-cell text-left"},R={class:"p-2 table-cell text-left"},T={class:"p-2 table-cell text-left"};function G(e,a,c,g,r,n){return o(),l(u,null,[t("div",j,[t("div",null,[E,p(t("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>r.newWithdrawal.amount=s),type:"text",id:"deposit",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Depus în lei"},null,512),[[m,r.newWithdrawal.amount]])]),t("div",I,[t("button",{type:"button",onClick:a[1]||(a[1]=(...s)=>n.createWithdraw&&n.createWithdraw(...s)),class:"w-full focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800"}," Withdraw ")])]),r.loading?h("",!0):(o(),l("div",Y,[t("table",q,[z,t("tbody",null,[(o(!0),l(u,null,w(e.withdrawals,s=>(o(),l("tr",{class:"p-2 bg-white border-b dark:bg-gray-900 dark:border-gray-700",key:s.id},[t("td",A,d(s.id),1),t("td",R,d(s.amount),1),t("td",T,d(n.formatDateLabels(s.created_at)),1)]))),128))])])]))],64)}const H=b(U,[["render",G]]),J={components:{DepositsStream:O,WithdrawalsStream:H},emits:["displayOnly"],data(){return{loading:!0,stream:[],settings:[]}},async mounted(){await this.getLatestStream(),await this.getSettings(),this.loading=!1},methods:{async getLatestStream(){await i.get("/api/stream").then(e=>{this.stream=e.data.stream}).catch(e=>{console.log(e)})},async getSettings(){await i.get("/api/settings").then(e=>{this.settings=e.data.settings}).catch(e=>{console.log(e)}),this.settings.bonus_list&&this.$emit("displayOnly",this.settings.bonus_list)},async updateSettings(){await i.patch("/api/settings",{settings:this.settings}).then(e=>{this.settings=e.data.settings}).catch(e=>{console.log(e)}),await this.getSettings()},async createNewStream(){await i.post("/api/stream/new").then(e=>{this.stream=e.data.stream}).catch(e=>{console.log(e)}).finally(()=>{location.reload()}),await this.getLatestStream()},activateDialog(){this.$dialog({message:"Ești sigur că vrei să începi un nou stream, acest lucru va reseta listele si resul optiunilor?",buttons:["da","nu"],da:()=>{this.createNewStream()},nu:()=>{console.log("refuse")}})}}},K={class:"p-6"},P={class:"bg-red-200 p-6 mb-12 rounded border"},Q={key:0,class:"bg-green-200 rounded border p-6"},X={key:1,class:"bg-blue-200 rounded border p-6"};function Z(e,a,c,g,r,n){const s=f("DepositsStream"),_=f("WithdrawalsStream");return o(),l("div",K,[t("div",P,[t("button",{onClick:a[0]||(a[0]=(...x)=>n.activateDialog&&n.activateDialog(...x)),type:"button",class:"w-full focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800"}," Stream Nou ")]),r.loading?h("",!0):(o(),l("div",Q,[y(s,{stream:r.stream},null,8,["stream"])])),r.loading?h("",!0):(o(),l("div",X,[y(_,{stream:r.stream},null,8,["stream"])]))])}const at=b(J,[["render",Z]]);export{at as S};
