import{S as y}from"./SvgBh-454ec911.js";import{_ as v}from"./_plugin-vue_export-helper-c27b6911.js";import{N as S,e as l,a as t,b as w,g as r,t as o,n as d,F as b,h,f as C,o as i}from"./app-4937bbbf.js";const A={components:{SvgBh:y},props:["id"],data(){return{loading:!0,bonusBattleInfo:[],bonusBattleConcurrents:[],bonusBattleStage:[],bonusBattleBracket:[],bonusBattleScores:[],bonusBattleWinner:[],bonusBattleAllConcurrents:[],bonusBattleAllBracketsCurentStage:[],battleWinner:[],avgScore:0,bestScore:0,totalProfit:0,totalCost:0,isUpdating:!1}},computed:{totalConcurrents(){return this.bonusBattleAllConcurrents.length},totalBalanceScore(){return((this.totalCost+this.totalProfit)/this.totalCost).toFixed(2)}},async mounted(){await this.getActiveBonusBattle(),this.loading=!1,await this.updateTheListFromTimeToTime()},methods:{async getActiveBonusBattle(){await axios.get("/api/bonus-battle-info/"+this.id).then(a=>{this.bonusBattleInfo=a.data.battle,this.bonusBattleConcurrents=a.data.concurrents,this.bonusBattleAllConcurrents=a.data.all_concurrents,this.bonusBattleAllBracketsCurentStage=a.data.stage_brackets,this.bonusBattleStage=a.data.stage,this.bonusBattleBracket=a.data.bracket,this.bonusBattleScores=a.data.current_score,this.bonusBattleWinner=a.data.winner,this.battleWinner=a.data.battle_winner,this.avgScore=a.data.avg_score.toFixed(2),this.bestScore=a.data.best_score.toFixed(2),this.totalProfit=a.data.total_profit,this.totalCost=a.data.total_cost}).catch(a=>{console.log(a)})},async updateTheListFromTimeToTime(){setInterval(async()=>{this.isUpdating||(this.isUpdating=!0,await this.getActiveBonusBattle(),this.isUpdating=!1)},8e3)},getConcurrentScores(a,u){if(!a||!u)return[];const p=[];for(let c=0;c<this.bonusBattleScores.length;c++){const e=this.bonusBattleScores[c];e.bonus_concurrent_id===a&&e.bracket_id===u&&p.push(e)}return p}}},k={key:0,class:"table",ref:"viewport"},N={class:"table-container"},P={class:"header-list"},T={class:"header-list-title"},V={class:"img-list"},W=t("span",null,"Bonus Battle",-1),F={class:"bonus-details"},U={class:"list-cost"},j={class:"list-opened"},z={class:"details"},I={class:"header-details"},L={key:0},E={class:"justify-end text-center uppercase text-sm px-3 py-3 stage font-bold"},R={class:"battle flex gap-2 align-middle items-center justify-center relative"},D={class:"from-user"},G={class:"table-auto mb-2 w-full text-sm border-collapse border border-gray-700 rounded-md overflow-hidden"},J=t("thead",null,[t("tr",{class:"bg-black text-white uppercase text-xs"},[t("th",{class:"border border-gray-700 px-2 py-2"},"Cost"),t("th",{class:"border border-gray-700 px-2 py-2"},"Rezultat"),t("th",{class:"border border-gray-700 px-2 py-2"},"Scor")])],-1),M={class:"border border-gray-700 px-2 py-1"},O={class:"border border-gray-700 px-2 py-1"},q=t("div",{class:"vs-symbol flex justify-center items-center text-2xl"}," VS ",-1),H={key:1,class:"w-full p-4 text-white rounded-lg shadow-lg flex space-x-4"},K={class:"bg-blue-600 p-4 rounded-md shadow-md text-center w-40 flex flex-col justify-center"},Q=t("span",{class:"text-sm font-bold mb-2"},"Winner Winner!",-1),X={class:"text-xl font-bold mb-2"},Y={class:"flex-grow"},Z={class:"mb-4"},$={class:"text-md"},tt=t("span",{class:"font-bold"},"Total Scor:",-1),st={class:"text-md"},et=t("span",{class:"font-bold"},"Pentru User:",-1),ot={class:"bg-gray-800 rounded-md p-2"},at={class:"w-full text-sm text-gray-200"},lt=t("thead",null,[t("tr",null,[t("th",{class:"text-left p-1 border-b border-gray-700"},"Battle Info"),t("th",{class:"text-right p-1 border-b border-gray-700"},"LEI")])],-1),it=t("td",{class:"p-1"},"Battle Cost",-1),dt={class:"p-1 text-right"},nt=t("td",{class:"p-1"},"Battle Profit",-1),rt={class:"bracket-container py-3 px-3"},ct=t("div",{class:"vs"},"VS",-1),_t={class:"shadow-md py-3 px-3"},bt={class:"overflow-x-auto"},ht={class:"table-auto w-full text-sm text-gray-200"},ut={class:"border border-black px-1 py-1"},pt={class:"border border-black px-2 py-1"},gt={class:"border border-black px-2 py-1"};function xt(a,u,p,c,e,g){var x;const m=S("SvgBh");return e.loading?C("",!0):(i(),l("div",k,[t("div",N,[t("div",P,[t("div",T,[t("span",V,[w(m)]),W,t("div",F,[t("div",U,[r("Miză "),t("span",null,o(e.bonusBattleInfo.stake)+" lei",1)]),t("div",j,[t("div",z,[t("span",null,o(g.totalConcurrents)+" Jocuri",1)])])])]),t("div",I,[t("div",null,[r("Scor"),t("span",null,"AVG: "+o(e.avgScore),1)]),t("div",null,[t("span",null,"TOP: "+o(e.bestScore),1)]),t("div",null,[r("Rezultat"),t("span",{class:d({"text-red-500":e.totalProfit<0,"text-green-500":e.totalProfit>=0})},o(e.totalProfit)+" lei ",3)])])]),(x=e.battleWinner)!=null&&x.id?(i(),l("div",H,[t("div",K,[Q,t("h3",X,o(e.battleWinner.name),1)]),t("div",Y,[t("div",Z,[t("p",$,[tt,r(" "+o(g.totalBalanceScore),1)]),t("p",st,[et,r(" "+o(e.battleWinner.for_user||"N/A"),1)])]),t("div",ot,[t("table",at,[lt,t("tbody",null,[t("tr",null,[it,t("td",dt,o(e.totalCost),1)]),t("tr",null,[nt,t("td",{class:d(["p-1 text-right",{"text-green-400":e.totalProfit>0,"text-red-400":e.totalProfit<0}])},o(e.totalProfit),3)])])])])])])):(i(),l("div",L,[t("div",E,[t("span",null,o(e.bonusBattleStage.name),1)]),t("div",R,[(i(!0),l(b,null,h(e.bonusBattleConcurrents,(s,_)=>{var f;return i(),l("div",{key:(s==null?void 0:s.id)||_,class:"w-100 grow flex-col flex gap-2 px-2 max-w-[190px]"},[t("div",{class:d("concurrent flex px-4 py-2 rounded-md text-white "+(_===0?"bg-blue-500":"bg-red-500"))},o((s==null?void 0:s.name)||"N/A"),3),t("div",D,o((s==null?void 0:s.for_user)||"N/A"),1),t("div",null,[t("table",G,[J,t("tbody",null,[(i(!0),l(b,null,h(g.getConcurrentScores(s==null?void 0:s.id,(f=e.bonusBattleBracket)==null?void 0:f.id),(n,B)=>(i(),l("tr",{key:n.id||B,class:"border-t border-gray-700 bg-gray-700"},[t("td",M,o(n.cost_buy),1),t("td",O,o(n.result_buy),1),t("td",{class:d(["border border-gray-700 px-2 py-1 font-bold",n.score<1?"text-red-500":"text-green-500"])},o(n.score.toFixed(2)),3)]))),128))])])])])}),128)),q])])),t("div",rt,[(i(!0),l(b,null,h(e.bonusBattleAllBracketsCurentStage,s=>(i(),l("div",{key:s.id,class:"bracket-item"},[t("div",{class:d(["participant",{loser:s.winner!==s.participant_a&&s.winner!=="N/A"}])},o(s.participant_a),3),ct,t("div",{class:d(["participant",{loser:s.winner!==s.participant_b&&s.winner!=="N/A"}])},o(s.participant_b),3)]))),128))]),t("div",_t,[t("div",bt,[t("table",ht,[t("tbody",null,[(i(!0),l(b,null,h(e.bonusBattleAllConcurrents,(s,_)=>(i(),l("tr",{key:s==null?void 0:s.id,class:d(_%2===0?"bg-gray-900":"bg-gray-800")},[t("td",ut,o(s!=null&&s.is_eliminated?"❌":"✅"),1),t("td",pt,o((s==null?void 0:s.name)||"N/A"),1),t("td",gt,o((s==null?void 0:s.for_user)||"N/A"),1)],2))),128))])])])])])],512))}const yt=v(A,[["render",xt]]);export{yt as default};
