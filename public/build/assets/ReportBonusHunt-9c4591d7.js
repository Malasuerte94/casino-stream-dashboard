import{q as h,c as i,b as o,x as p,t as l,d as g,n as m,k as b,F as f,o as d}from"./app-1a6a8153.js";import{C as u}from"./auto-5842a5d9.js";import{_ as v}from"./_plugin-vue_export-helper-c27b6911.js";const C={data(){return{loading:!0,hunts:[]}},async mounted(){await this.fetchHunts(),this.hunts.length?(this.renderBarChart(),this.renderLineChart()):console.warn("No hunts available to display in the charts."),this.loading=!1},methods:{async fetchHunts(){try{const a=await h.get("/api/bonus-hunt-all");this.hunts=a.data.hunts||[]}catch(a){console.error("Error fetching hunts:",a)}},renderBarChart(){const a=this.hunts.map(r=>this.formatDate(r.created_at)),t=this.hunts.map(r=>parseFloat(r.start)),s=this.hunts.map(r=>parseFloat(r.result)),e=this.hunts.map(r=>parseFloat(r.result)-parseFloat(r.start));new u(document.getElementById("barChart"),{type:"bar",data:{labels:a,datasets:[{label:"Cost",data:t,backgroundColor:"rgb(239,0,0)"},{label:"Câștig",data:s,backgroundColor:"rgb(10,253,0)"},{label:"Profit",data:e,backgroundColor:e.map(r=>r>=0?"rgba(0,255,222,0.6)":"rgba(27,27,27,0.6)")}]},options:{plugins:{legend:{display:!0}},scales:{y:{beginAtZero:!0}}}})},renderLineChart(){const a=this.hunts.map(e=>this.formatDate(e.created_at)),t=this.hunts.map(e=>parseFloat(e.start)),s=this.hunts.map(e=>parseFloat(e.result));new u(document.getElementById("lineChart"),{type:"line",data:{labels:a,datasets:[{label:"Cost (Trend)",data:t,borderColor:"rgb(239,0,0)",borderWidth:2,fill:!1},{label:"Câștig (Trend)",data:s,borderColor:"rgb(10,253,0)",borderWidth:2,fill:!1}]},options:{plugins:{legend:{display:!0}},scales:{y:{beginAtZero:!0}}}})},formatDate(a){const t=new Date(a),s=t.getDate().toString().padStart(2,"0"),e=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear(),n=t.getHours().toString().padStart(2,"0"),c=t.getMinutes().toString().padStart(2,"0");return`${s}-${e}-${r} ${n}:${c}`},calculateTotal(a){return this.hunts.reduce((t,s)=>{const e=parseFloat(s[a]);return isNaN(e)?(console.warn(`Invalid ${a} value detected: ${s[a]}`),t):t+e},0)}},computed:{totalStart(){return this.calculateTotal("start")},totalResult(){return this.calculateTotal("result")},totalProfit(){return this.totalResult-this.totalStart},profitClass(){return this.totalProfit>=0?"text-green-500":"text-red-500"},profitLabel(){return`${this.totalProfit>=0?"+":"-"}${Math.abs(this.totalProfit).toFixed(2)} lei`}}},y={key:0,class:"totals p-6 mt-6"};function S(a,t,s,e,r,n){return d(),i(f,null,[t[2]||(t[2]=o("div",{class:"p-6 mt-6 text-center"},[o("h2",{class:"text-lg font-bold"},"BONUS HUNTS")],-1)),o("div",null,[t[1]||(t[1]=p('<div class="chart-container"><div class="chart"><canvas id="barChart"></canvas></div></div><div class="chart-container mt-8"><div class="chart"><canvas id="lineChart"></canvas></div></div>',2)),r.loading?b("",!0):(d(),i("div",y,[o("div",null,"Total Start: "+l(n.totalStart)+" lei",1),o("div",null,"Total Câștig: "+l(n.totalResult)+" lei",1),o("div",null,[t[0]||(t[0]=g(" Total Profit: ")),o("span",{class:m(n.profitClass)},l(n.profitLabel),3)])]))])],64)}const F=v(C,[["render",S]]);export{F as default};
