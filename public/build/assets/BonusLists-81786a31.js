import v from"./BonusBuy-01d62f78.js";import w from"./BonusHunt-f9a28b9c.js";import{q as r,s as b,c as l,b as s,t as m,d as L,h as u,m as _,n as g,k as p,V as y,a,w as f,T as c,o as d}from"./app-4069934b.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import"./gameStore-f490a159.js";const C={components:{BonusBuy:v,BonusHunt:w},data(){return{open_list:!1,settings:[],latestList:"",listCost:0,componentKey:0,listEnded:0}},async mounted(){await this.getSettings(),await this.getUrlGuessList()},methods:{async getSettings(){await r.get("/api/settings").then(o=>{this.settings=o.data.settings}).catch(o=>{console.log(o)}),this.settings.bonus_list&&this.$emit("displayOnly",this.settings.bonus_list)},async updateSettings(){await r.patch("/api/settings",{settings:this.settings}).then(o=>{this.settings=o.data.settings}).catch(o=>{console.log(o)}),await this.getSettings()},async getUrlGuessList(){await r.get("/api/get-latest-list").then(o=>{this.listEnded=o.data.bonusList.ended,this.latestList=o.data["list-id"],this.open_list=o.data.is_open===1,this.listCost=o.data.bonusList.start})},async setStatusGuessList(){await r.post("/api/set-latest-list",{is_open:this.open_list,list_id:this.latestList,type:this.settings.bonus_list}).then(()=>{this.getUrlGuessList()})},async closeBonusList(){await r.post("/api/close-bonus-list",{close:!0,list_id:this.latestList,type:this.settings.bonus_list}).finally(()=>{this.componentKey++,this.getUrlGuessList()})},activateDialog(){if(this.listCost<=0&&this.settings.bonus_list=="hunt"){alert("Vă rugăm să introduceți costul listei (Costul Hunt-ului).");return}this.$dialog({message:"Ești sigur că vrei să închizi lista? Nu mai poți edita după închidere. Câștigătorii vor fi anunțați!",buttons:["da","nu"],da:()=>{this.closeBonusList()},nu:()=>{console.log("refuse")}})}},computed:{guessUrl(){return`${window.location.origin}/streamer/${this.$page.props.user.id}`},isEnded(){return Boolean(this.listEnded)}},watch:{settings(){this.getUrlGuessList()}}},k={class:"px-6 py-3 flex items-center justify-between bg-gray-800 rounded-md shadow-md transition-all duration-300"},S={class:"flex items-center space-x-4"},U={class:"text-sm font-bold py-1 px-3 bg-gray-700 rounded-md border border-gray-600 transition"},G={key:0,class:"flex items-center space-x-4"},E={class:"ml-3 text-sm font-medium text-gray-300 flex items-center gap-2"},V={for:"toggle",class:"relative inline-flex items-center cursor-pointer"},N=["disabled"],D={class:"bg-gray-800 rounded-md shadow-md mt-4 transition-all duration-300"},H={class:"p-6"},T={class:"grid grid-cols-2 gap-4"};function K(o,t,z,A,n,i){const h=b("BonusBuy"),x=b("BonusHunt");return d(),l("div",null,[s("div",k,[s("div",S,[t[12]||(t[12]=s("span",{class:"text-sm text-gray-300"},"LINK pentru View-eri (ghicește suma)",-1)),s("div",U,m(i.guessUrl),1)]),i.isEnded?p("",!0):(d(),l("div",G,[s("span",E,[L(m(n.open_list?"Predicții Pornite":"Predicții Oprite")+" ",1),s("label",V,[u(s("input",{type:"checkbox",id:"toggle","onUpdate:modelValue":t[0]||(t[0]=e=>n.open_list=e),onChange:t[1]||(t[1]=(...e)=>i.setStatusGuessList&&i.setStatusGuessList(...e)),class:"sr-only peer"},null,544),[[_,n.open_list]]),t[13]||(t[13]=s("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])]),s("button",{disabled:i.isEnded,class:g([{"opacity-50 cursor-not-allowed":i.isEnded},"bg-red-600 hover:bg-red-700 text-white font-medium rounded-md text-sm px-5 py-2 transition-all duration-300"]),onClick:t[2]||(t[2]=(...e)=>i.activateDialog&&i.activateDialog(...e)),type:"button"}," ÎNCHIDE LISTA / DECLARĂ CÂȘTIGĂTOR ",10,N)]))]),s("div",D,[s("div",H,[s("div",T,[s("div",{class:g(["flex items-center pl-4 p-2 rounded-md bg-gray-700 border border-gray-600 cursor-pointer transition-all duration-300",{"bg-indigo-600":n.settings.bonus_list==="buy"}]),onClick:t[5]||(t[5]=e=>{n.settings.bonus_list="buy",i.updateSettings()})},[u(s("input",{onChange:t[3]||(t[3]=(...e)=>i.updateSettings&&i.updateSettings(...e)),id:"bordered-radio-2",type:"radio",value:"buy","onUpdate:modelValue":t[4]||(t[4]=e=>n.settings.bonus_list=e),name:"bonus-list-display",class:"w-4 h-4 mr-2"},null,544),[[y,n.settings.bonus_list]]),t[14]||(t[14]=s("label",{for:"bordered-radio-2",class:"w-full py-1 text-gray-300"}," Afișează Buy ",-1))],2),s("div",{class:g(["flex items-center pl-4 p-2 rounded-md bg-gray-700 border border-gray-600 cursor-pointer transition-all duration-300",{"bg-indigo-600":n.settings.bonus_list==="hunt"}]),onClick:t[8]||(t[8]=e=>{n.settings.bonus_list="hunt",i.updateSettings()})},[u(s("input",{onChange:t[6]||(t[6]=(...e)=>i.updateSettings&&i.updateSettings(...e)),id:"bordered-radio-1",type:"radio",value:"hunt","onUpdate:modelValue":t[7]||(t[7]=e=>n.settings.bonus_list=e),name:"bonus-list-display",class:"w-4 h-4 mr-2"},null,544),[[y,n.settings.bonus_list]]),t[15]||(t[15]=s("label",{for:"bordered-radio-1",class:"w-full py-1 text-gray-300"}," Afișează Hunt ",-1))],2)])]),a(c,{name:"fade"},{default:f(()=>[n.settings.bonus_list=="buy"?(d(),l("div",{class:"p-6 bg-gray-800 rounded-md border border-gray-700 transition-all duration-300",key:n.componentKey},[t[16]||(t[16]=s("h5",{class:"text-lg font-bold text-gray-200 mb-2"},"Bonus Buy - List",-1)),a(h,{onNewlist:t[9]||(t[9]=e=>i.getUrlGuessList())})])):p("",!0)]),_:1}),a(c,{name:"fade"},{default:f(()=>[n.settings.bonus_list=="hunt"?(d(),l("div",{class:"p-6 bg-gray-800 rounded-md border border-gray-700 transition-all duration-300",key:n.componentKey},[t[17]||(t[17]=s("h5",{class:"text-lg font-bold text-gray-200 mb-2"},"Bonus Hunt - List",-1)),a(x,{onNewlist:t[10]||(t[10]=e=>i.getUrlGuessList()),onUpdate:t[11]||(t[11]=e=>i.getUrlGuessList())})])):p("",!0)]),_:1})])])}const j=B(C,[["render",K]]);export{j as default};
