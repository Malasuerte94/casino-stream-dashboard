import{o as a,e as r,a as e,j as C,k as h,E as g,m as $,F as D,h as w,t as u,D as y,N as p,c as b,w as M,g as x,n as E,f as _}from"./app-e527c1e7.js";import{_ as v}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as T}from"./AppLayout-fa9324d0.js";import"./ResponsiveNavLink-bb035a1c.js";const V={data(){return{startDate:"",endDate:"",days:[],announceToDiscord:!0}},methods:{generateDays(){const d=new Date(this.startDate),t=new Date(this.endDate);this.days=[];for(let l=d;l<=t;l.setDate(l.getDate()+1))this.days.push({date:new Date(l).toISOString().split("T")[0],info:""})},formatDayName(d){return["Duminică","Luni","Marți","Miercuri","Joi","Vineri","Sâmbătă"][new Date(d).getDay()]},submitSchedule(){axios.post("/api/schedule",{days:this.days,user_id:1,announceToDiscord:this.announceToDiscord}).then(()=>{this.$emit("close")})}}},j={class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-50"},A={class:"modal bg-white w-full max-w-lg p-6 rounded-lg shadow-lg"},N=e("h2",{class:"text-xl font-semibold text-gray-800 mb-4"},"Create Schedule",-1),U={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},z=e("label",{class:"block text-sm font-medium text-gray-700",for:"startDate"},"Start Date",-1),F=e("label",{class:"block text-sm font-medium text-gray-700",for:"endDate"},"End Date",-1),I={class:"flex items-center"},L=e("label",{for:"announceToDiscord",class:"ml-2 block text-sm text-gray-700"}," Announce to Discord ",-1),B={class:"text-gray-700 text-sm font-medium flex items-center justify-center truncate"},O=["onUpdate:modelValue"],R={class:"flex gap-2"},J=e("button",{type:"submit",class:"w-full px-4 py-2 bg-indigo-600 text-white rounded-md shadow hover:bg-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300"}," Save Schedule ",-1);function P(d,t,l,S,n,s){return a(),r("div",j,[e("div",A,[N,e("form",{onSubmit:t[5]||(t[5]=C((...o)=>s.submitSchedule&&s.submitSchedule(...o),["prevent"])),class:"space-y-4"},[e("div",U,[e("div",null,[z,h(e("input",{type:"date",id:"startDate","onUpdate:modelValue":t[0]||(t[0]=o=>n.startDate=o),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[g,n.startDate]])]),e("div",null,[F,h(e("input",{type:"date",id:"endDate","onUpdate:modelValue":t[1]||(t[1]=o=>n.endDate=o),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[g,n.endDate]])])]),e("div",I,[h(e("input",{type:"checkbox",id:"announceToDiscord","onUpdate:modelValue":t[2]||(t[2]=o=>n.announceToDiscord=o),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,512),[[$,n.announceToDiscord]]),L]),e("button",{type:"button",onClick:t[3]||(t[3]=(...o)=>s.generateDays&&s.generateDays(...o)),class:"px-4 py-2 bg-indigo-600 text-white rounded-md shadow hover:bg-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300"}," Generate Days "),(a(!0),r(D,null,w(n.days,(o,m)=>(a(),r("div",{class:"grid grid-cols-[0.5fr_2fr] gap-4 border-t pt-4",key:m},[e("span",B,u(s.formatDayName(o.date)),1),h(e("input",{type:"text","onUpdate:modelValue":f=>o.info=f,placeholder:"Info",class:"border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block"},null,8,O),[[g,o.info]])]))),128)),e("div",R,[J,e("button",{type:"button",onClick:t[4]||(t[4]=o=>d.$emit("close")),class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md shadow hover:bg-gray-200"}," Cancel ")])],32)])])}const q=v(V,[["render",P]]),G={props:{day:{type:Object,required:!0}},methods:{submitEdit(){axios.patch(`/api/schedule/${this.day.id}/edit`,{info:this.day.info}).then(()=>{this.$emit("updated"),this.$emit("close")})}}},Y={class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-50"},H={class:"modal bg-white w-full max-w-md p-6 rounded-lg shadow-lg"},K=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Edit Day",-1),Q={class:"mb-4"},W=e("label",{class:"block text-sm font-medium text-gray-700"},"Date",-1),X={class:"mb-4"},Z=e("label",{class:"block text-sm font-medium text-gray-700"},"Info",-1),ee={class:"flex justify-end space-x-4"},te=e("button",{type:"submit",class:"px-4 py-2 text-white bg-indigo-600 rounded-md shadow hover:bg-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300"}," Save ",-1);function se(d,t,l,S,n,s){return a(),r("div",Y,[e("div",H,[K,e("form",{onSubmit:t[3]||(t[3]=C((...o)=>s.submitEdit&&s.submitEdit(...o),["prevent"]))},[e("div",Q,[W,h(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>l.day.date=o),class:"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",disabled:""},null,512),[[g,l.day.date]])]),e("div",X,[Z,h(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>l.day.info=o),class:"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[g,l.day.info]])]),e("div",ee,[e("button",{type:"button",onClick:t[2]||(t[2]=o=>d.$emit("close")),class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md shadow hover:bg-gray-200"}," Cancel "),te])],32)])])}const oe=v(G,[["render",se]]);const de={components:{CreateScheduleModal:q,EditDayModal:oe,AppLayout:T},data(){return{schedules:[],showCreateModal:!1,showEditDayModal:!1,showDiscordModal:!1,selectedDay:null,selectedScheduleId:null}},methods:{fetchSchedules(){y.get("/api/schedule/all").then(d=>{this.schedules=d.data})},formatDate(d){return new Date(d).toLocaleDateString("ro-RO")},formatDayName(d){return["Duminică","Luni","Marți","Miercuri","Joi","Vineri","Sâmbătă"][new Date(d).getDay()]},openCreateScheduleModal(){this.showCreateModal=!0},openEditDayModal(d){this.selectedDay=d,this.showEditDayModal=!0},toggleDayStatus(d){y.patch(`/api/schedule/${d.id}/toggle-status`).then(()=>{d.active=!d.active})},openDiscordModal(d){this.selectedScheduleId=d,this.showDiscordModal=!0},closeDiscordModal(){this.selectedScheduleId=null,this.showDiscordModal=!1},announceToDiscord(){y.post(`/api/schedule/${this.selectedScheduleId}/announce`).then(()=>{this.closeDiscordModal(),alert("Schedule announced to Discord successfully!")})},closeAndRefresh(){this.showCreateModal=!1,this.fetchSchedules()}},mounted(){this.fetchSchedules()}},ne=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Schedule ",-1),ie={class:"py-12"},ae={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},le={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},re={class:"scheduler p-6"},ce={class:"flex justify-between items-center mb-6"},ue=e("h1",{class:"text-2xl font-bold text-gray-700"},"Schedule Manager",-1),he={class:"schedule-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ge={class:"text-lg font-semibold text-gray-800"},me={class:"text-sm text-gray-500"},fe={class:"font-medium text-gray-600"},ye={class:"font-medium text-gray-600"},pe={class:"mt-4 space-y-2"},be={class:"font-medium"},xe={class:"flex space-x-2"},_e=["onClick"],De=["onClick"],we=["onClick"],ve=["onClick"],Se=e("svg",{xmlns:"http://www.w3.org/2000/svg","fill-rule":"evenodd","clip-rule":"evenodd",viewBox:"0 0 24 24",width:"12",height:"12",fill:"#FFFFFF"},[e("path",{d:"M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z"})],-1),ke=[Se],Me={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-50"},Ce={class:"bg-white p-6 rounded-lg shadow-lg"},$e=e("h3",{class:"text-xl font-bold text-gray-700 mb-4"},"Announce to Discord",-1),Ee=e("p",{class:"text-gray-600 mb-4"},"Are you sure you want to announce this schedule to Discord?",-1),Te={class:"flex gap-4 justify-end"};function Ve(d,t,l,S,n,s){const o=p("CreateScheduleModal"),m=p("EditDayModal"),f=p("AppLayout");return a(),b(f,{title:"Dashboard"},{header:M(()=>[ne]),default:M(()=>[e("div",ie,[e("div",ae,[e("div",le,[e("div",re,[e("div",ce,[ue,e("button",{onClick:t[0]||(t[0]=(...i)=>s.openCreateScheduleModal&&s.openCreateScheduleModal(...i)),class:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg shadow hover:bg-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300"}," Add New Schedule ")]),e("div",he,[(a(!0),r(D,null,w(n.schedules,i=>(a(),r("div",{key:i.id,class:"schedule-card bg-gray-50 p-4 rounded-lg shadow-md border border-gray-200 relative"},[e("h2",ge,"Schedule #"+u(i.id),1),e("p",me,[x(" Between "),e("span",fe,u(s.formatDate(i.days[0].date)),1),x(" and "),e("span",ye,u(s.formatDate(i.days[i.days.length-1].date)),1)]),e("ul",pe,[(a(!0),r(D,null,w(i.days,c=>(a(),r("li",{key:c.id,class:"flex justify-between items-center bg-white p-2 rounded shadow-sm border border-gray-200"},[e("div",{class:E(["text-sm text-gray-700",{"line-through text-gray-400":!c.active}])},[e("span",be,u(s.formatDayName(c.date)),1),x(": "+u(c.info),1)],2),e("div",xe,[e("button",{onClick:k=>s.openEditDayModal(c),class:"text-indigo-600 text-sm font-medium hover:underline"}," Edit ",8,_e),c.active?(a(),r("button",{key:0,onClick:k=>s.toggleDayStatus(c),class:"text-red-600 text-sm font-medium hover:underline"}," Cancel ",8,De)):(a(),r("button",{key:1,onClick:k=>s.toggleDayStatus(c),class:"text-green-600 text-sm font-medium hover:underline"}," Activate ",8,we))])]))),128))]),e("button",{onClick:c=>s.openDiscordModal(i.id),class:"absolute h-[20px] w-[20px] top-2 right-2 flex items-center justify-center bg-purple-600 text-white rounded-full shadow-md hover:bg-purple-500 focus:outline-none focus:ring focus:ring-purple-300",title:"Announce to Discord"},ke,8,ve)]))),128))]),n.showCreateModal?(a(),b(o,{key:0,onClose:t[1]||(t[1]=i=>s.closeAndRefresh())})):_("",!0),n.showEditDayModal?(a(),b(m,{key:1,day:n.selectedDay,onClose:t[2]||(t[2]=i=>n.showEditDayModal=!1),onUpdated:s.fetchSchedules},null,8,["day","onUpdated"])):_("",!0),n.showDiscordModal?(a(),r("div",Me,[e("div",Ce,[$e,Ee,e("div",Te,[e("button",{onClick:t[3]||(t[3]=i=>s.announceToDiscord()),class:"px-4 py-2 bg-purple-600 text-white rounded-md shadow hover:bg-purple-500 focus:outline-none focus:ring focus:ring-purple-300"}," Yes "),e("button",{onClick:t[4]||(t[4]=(...i)=>s.closeDiscordModal&&s.closeDiscordModal(...i)),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md shadow hover:bg-gray-200"}," No ")])])])):_("",!0)])])])])]),_:1})}const ze=v(de,[["render",Ve]]);export{ze as default};
