import{q as c,o as r,c as i,b as t,a as l,w as u,h as _,x as y,G as m,F as x,s as v,t as d,k as h,O as w,d as b}from"./app-0682db7e.js";import{_ as f}from"./_plugin-vue_export-helper-c27b6911.js";const k={props:{stream:Object},data(){return{loading:!0,deposits:[],newDeposit:{amount:0,casino:"",stream_id:null}}},async mounted(){await this.getStreamDeposit(),this.loading=!1},methods:{async getStreamDeposit(){this.newDeposit.stream_id=this.stream.id;try{const s=await c.get("/api/deposits/"+this.stream.id);this.deposits=s.data.deposits}catch(s){console.log(s)}},async createDeposit(){this.loading=!0;try{await c.post("/api/deposits",{payload:this.newDeposit}),await this.getStreamDeposit()}catch(s){console.log(s)}finally{this.loading=!1}},formatDateLabels(s){const e=new Date(s),g=e.getDate().toString().padStart(2,"0"),p=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getFullYear();return`${g}-${p}-${o}`}}},W={class:"bg-gray-700 p-6 mb-6 rounded-lg border border-gray-700 shadow-lg"},$={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},C={class:"self-end"},N={key:0,class:"relative overflow-x-auto shadow-lg sm:rounded-lg mt-6"},L={class:"w-full text-sm text-left text-gray-300"},V={class:"p-2"},B={class:"p-2"},I={class:"p-2"},O={class:"p-2"};function z(s,e,g,p,o,n){return r(),i("div",null,[e[6]||(e[6]=t("h2",{class:"text-lg font-bold mb-4 text-gray-200"},"Depozit",-1)),l(m,{name:"fade"},{default:u(()=>[t("div",W,[t("div",$,[t("div",null,[e[3]||(e[3]=t("label",{for:"deposit",class:"block mb-2 text-sm font-medium text-gray-300"}," Depozit ",-1)),_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>o.newDeposit.amount=a),type:"text",id:"deposit",class:"input-primary",placeholder:"Depus în lei"},null,512),[[y,o.newDeposit.amount]])]),t("div",null,[e[4]||(e[4]=t("label",{for:"casino",class:"block mb-2 text-sm font-medium text-gray-300"}," Pe Casino ",-1)),_(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>o.newDeposit.casino=a),type:"text",id:"casino",class:"input-primary",placeholder:"Nume Casino"},null,512),[[y,o.newDeposit.casino]])]),t("div",C,[t("button",{type:"button",onClick:e[2]||(e[2]=(...a)=>n.createDeposit&&n.createDeposit(...a)),class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg text-sm px-5 py-2.5 transition-all duration-200 focus:outline-none"}," Depozitare ")])])])]),_:1}),l(m,{name:"fade"},{default:u(()=>[o.loading?h("",!0):(r(),i("div",N,[t("table",L,[e[5]||(e[5]=t("thead",{class:"text-xs uppercase bg-gray-700 text-gray-400"},[t("tr",null,[t("th",{class:"p-2"},"ID"),t("th",{class:"p-2"},"Suma"),t("th",{class:"p-2"},"Casino"),t("th",{class:"p-2"},"Data")])],-1)),t("tbody",null,[(r(!0),i(x,null,v(o.deposits,a=>(r(),i("tr",{key:a.id,class:"bg-gray-800 border-b border-gray-700"},[t("td",V,d(a.id),1),t("td",B,d(a.amount),1),t("td",I,d(a.casino),1),t("td",O,d(n.formatDateLabels(a.created_at)),1)]))),128))])])]))]),_:1})])}const F=f(k,[["render",z],["__scopeId","data-v-a9613d5f"]]);const M={props:{stream:Object},data(){return{loading:!0,withdrawals:[],newWithdrawal:{amount:0,stream_id:null}}},async mounted(){await this.getStreamWithdrawals(),this.loading=!1},methods:{async getStreamWithdrawals(){this.newWithdrawal.stream_id=this.stream.id;try{const s=await c.get("/api/withdrawals/"+this.stream.id);this.withdrawals=s.data.withdrawals}catch(s){console.log(s)}this.loading=!1},async createWithdraw(){this.loading=!0;try{await c.post("/api/withdrawals",{payload:this.newWithdrawal}),await this.getStreamWithdrawals()}catch(s){console.log(s)}finally{this.loading=!1}},formatDateLabels(s){const e=new Date(s),g=e.getDate().toString().padStart(2,"0"),p=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getFullYear();return`${g}-${p}-${o}`}}},R={class:"bg-gray-700 p-6 mb-6 rounded-lg border border-gray-700 shadow-lg"},T={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},U={class:"self-end"},j={key:0,class:"relative overflow-x-auto shadow-lg sm:rounded-lg mt-6"},E={class:"w-full text-sm text-left text-gray-300"},Y={class:"p-2"},q={class:"p-2"},G={class:"p-2"};function P(s,e,g,p,o,n){return r(),i("div",null,[e[4]||(e[4]=t("h2",{class:"text-lg font-bold mb-4 text-gray-200"},"Retragere",-1)),l(m,{name:"fade"},{default:u(()=>[t("div",R,[t("div",T,[t("div",null,[e[2]||(e[2]=t("label",{for:"withdraw",class:"block mb-2 text-sm font-medium text-gray-300"}," Sumă retragere ",-1)),_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>o.newWithdrawal.amount=a),type:"text",id:"withdraw",class:"input-primary",placeholder:"Retragere în lei"},null,512),[[y,o.newWithdrawal.amount]])]),t("div",U,[t("button",{type:"button",onClick:e[1]||(e[1]=(...a)=>n.createWithdraw&&n.createWithdraw(...a)),class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg text-sm px-5 py-2.5 transition-all duration-200 focus:outline-none"}," Confirmă ")])])])]),_:1}),l(m,{name:"fade"},{default:u(()=>[o.loading?h("",!0):(r(),i("div",j,[t("table",E,[e[3]||(e[3]=t("thead",{class:"text-xs uppercase bg-gray-700 text-gray-400"},[t("tr",null,[t("th",{class:"p-2"},"ID"),t("th",{class:"p-2"},"Suma"),t("th",{class:"p-2"},"Data")])],-1)),t("tbody",null,[(r(!0),i(x,null,v(o.withdrawals,a=>(r(),i("tr",{key:a.id,class:"bg-gray-800 border-b border-gray-700"},[t("td",Y,d(a.id),1),t("td",q,d(a.amount),1),t("td",G,d(n.formatDateLabels(a.created_at)),1)]))),128))])])]))]),_:1})])}const A=f(M,[["render",P],["__scopeId","data-v-46fc9342"]]);const H={components:{DepositsStream:F,WithdrawalsStream:A},emits:["displayOnly"],data(){return{loading:!0,stream:[],settings:[]}},async mounted(){await this.getLatestStream(),await this.getSettings(),this.loading=!1},methods:{async getLatestStream(){try{const s=await c.get("/api/stream");this.stream=s.data.stream}catch(s){console.log(s)}},async getSettings(){try{const s=await c.get("/api/settings");this.settings=s.data.settings}catch(s){console.log(s)}this.settings.bonus_list&&this.$emit("displayOnly",this.settings.bonus_list)},async createNewStream(){try{const s=await c.post("/api/stream/new");this.stream=s.data.stream}catch(s){console.log(s)}finally{location.reload()}await this.getLatestStream()},activateDialog(){this.$dialog({message:"Ești sigur că vrei să începi un nou stream, acest lucru va reseta listele si resul optiunilor?",buttons:["da","nu"],da:()=>{this.createNewStream()},nu:()=>{console.log("refuse")}})}}},J={class:"p-6"},K={class:"bg-gray-900 p-6 mb-6 rounded border border-red-700 shadow-lg"},Q={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},X={key:0,class:"bg-gray-800 p-6 rounded border border-gray-700 shadow"},Z={key:0,class:"bg-gray-800 p-6 rounded border border-gray-700 shadow"};function tt(s,e,g,p,o,n){const a=w("DepositsStream"),D=w("WithdrawalsStream");return r(),i("div",J,[l(m,{name:"fade"},{default:u(()=>[t("div",K,[t("button",{onClick:e[0]||(e[0]=(...S)=>n.activateDialog&&n.activateDialog(...S)),type:"button",class:"w-full focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-500 font-medium rounded-lg text-sm px-5 py-2.5 transition-all duration-200"}," Stream Nou "),e[1]||(e[1]=t("div",{class:"text-sm mt-4 text-red-300"},[b(" Dacă Vrei să folosești corect și funcția de Retragere / Depunere: Înainte de fiecare stream te rog să apeși butonul de "),t("b",null,"Stream Nou"),b(", introdu suma de pe care o ai depozitată pe casino și poți începe, dacă vrei să faci o retragere introdu și retragerea și confirmă pentru a avea un raport cât mai corect. ")],-1))])]),_:1}),t("div",Q,[l(m,{name:"fade",mode:"out-in"},{default:u(()=>[o.loading?h("",!0):(r(),i("div",X,[l(a,{stream:o.stream},null,8,["stream"])]))]),_:1}),l(m,{name:"fade",mode:"out-in"},{default:u(()=>[o.loading?h("",!0):(r(),i("div",Z,[l(D,{stream:o.stream},null,8,["stream"])]))]),_:1})])])}const at=f(H,[["render",tt],["__scopeId","data-v-9b7b3d00"]]);export{at as S};
