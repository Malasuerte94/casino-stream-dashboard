import{q as S,o,c as n,b as e,h as C,m as re,d as F,t as u,k as g,F as $,s as U,n as _,i as y,l as H,j as de,f as ue,w as Q,x as B,a as G,y as X,u as Z,T as ce}from"./app-0682db7e.js";import{_ as me}from"./AppLayout-56ba9ffc.js";import{u as pe,C as I}from"./gameStore-1fa13a1e.js";import{_ as ge}from"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-e99ea088.js";const be={name:"BattleViewerList",emits:["winnersPicked"],data(){return{battleViewers:[],winners:[],setting:!1,loading:!1}},props:{fillCount:{type:Number,required:!1}},async mounted(){await this.fetchBattleViewers(),await this.fetchSetting(),window.Echo.channel(`App.Models.User.${this.$page.props.user.id}`).listen("BattleViewerUpdated",()=>{this.fetchBattleViewers()})},methods:{async fetchBattleViewers(){try{const i=await S.get("api/bonus-battles/battle-viewers");this.battleViewers=i.data}catch(i){console.error("Failed to fetch battle viewers:",i.message)}},async fetchSetting(){if(!this.loading){this.loading=!0;try{const i=await S.get("/api/get-setting-public",{params:{setting_name:"battle_selections"}});i.data.setting_value!==void 0&&(this.setting=i.data.setting_value==1),console.log(this.setting)}catch(i){console.error("Failed to fetch setting:",i.message)}finally{this.loading=!1}}},copyText(i){if(navigator.clipboard)navigator.clipboard.writeText(i).then(()=>{alert("Comanda a fost copiată în clipboard")}).catch(a=>{console.error("Failed to copy text: ",a)});else{const a=document.createElement("input");a.value=i,document.body.appendChild(a),a.select();try{document.execCommand("copy"),console.log("Copied to clipboard")}catch(m){console.error("Failed to copy text: ",m)}document.body.removeChild(a)}},updateWinners(){this.$emit("winnersPicked",this.winners.map(i=>i.user))},getRandomItem(i){return i[Math.floor(Math.random()*i.length)]},async markAsPicked(i){try{await S.patch(`api/bonus-battles/battle-viewers/${i}`,{picked:!0})}catch(a){console.error("Failed to mark as picked:",a.message)}},async markAsEliminated(i){try{await S.patch(`api/bonus-battles/battle-viewers/${i}`,{eliminated:!0})}catch(a){console.error("Failed to mark as eliminated:",a.message)}},async pickWinner(){if(!this.loading){this.loading=!0;try{const i=this.battleViewers.filter(m=>!m.picked&&!m.eliminated);if(!i.length){console.error("No available candidates");return}const a=this.getRandomItem(i);await this.markAsPicked(a.id),a.picked=!0,this.winners.push(a),this.updateWinners()}catch(i){console.error("Error picking winner:",i)}finally{this.loading=!1}}},async fillList(){if(!this.loading){this.loading=!0;try{if(this.fillCount<0)return;const i=[];for(let a=0;a<this.fillCount;a++){const m=this.battleViewers.filter(d=>!d.picked&&!d.eliminated);if(!m.length)break;const v=this.getRandomItem(m);await this.markAsPicked(v.id),v.picked=!0,i.push(v)}this.winners=i,this.updateWinners()}catch(i){console.error("Error filling list:",i)}finally{this.loading=!1}}},clearList(){this.$dialog({message:"Ești sigur că vrei să faci o listă nouă?",buttons:["da","nu"],da:async()=>{if(!this.loading){this.loading=!0;try{await S.post("api/bonus-battles/battle-viewers/remove-all"),this.battleViewers=[],this.winners=[],this.updateWinners()}catch(i){console.error("Failed to clear the list:",i.message)}finally{this.loading=!1}}},nu:()=>console.log("Canceled reset")})},async rerollWinner(i,a){if(!this.loading){this.loading=!0;try{await this.markAsEliminated(i.id);const m=this.battleViewers.find(c=>c.id===i.id);m&&(m.eliminated=!0);const v=this.battleViewers.filter(c=>!c.picked&&!c.eliminated);if(!v.length){console.error("No available candidates for reroll");return}const d=this.getRandomItem(v);await this.markAsPicked(d.id),d.picked=!0,this.winners.splice(a,1,d),this.updateWinners()}catch(m){console.error("Error in rerollWinner:",m)}finally{this.loading=!1}}},eliminateWinner(i,a){this.$dialog({message:"Ești sigur că vrei să elimini acest utilizator?",buttons:["da","nu"],da:async()=>{if(!this.loading){this.loading=!0;try{await this.markAsEliminated(i.id),this.winners.splice(a,1);const m=this.battleViewers.find(v=>v.id===i.id);m&&(m.eliminated=!0),this.updateWinners()}catch(m){console.error("Error eliminating winner:",m)}finally{this.loading=!1}}},nu:()=>console.log("Canceled elimination")})},async updateSetting(){if(!this.loading){this.loading=!0;try{await S.post("/api/settings/save",{setting_name:"battle_selections",setting_value:this.setting})}catch(i){console.error("Error saving settings:",i)}finally{this.loading=!1}}}},computed:{apiUrlCommand(){return`{readapi.${window.location.origin}/api/add-bb-viewer/{user.name}/{1}/${this.$page.props.user.id}}`},apiUrlCommandNightBot(){return`$(urlfetch ${window.location.origin}/api/add-bb-viewer/$(user)/$(1) $(2) $(3)/${this.$page.props.user.id})`}}},ye={class:"p-2 rounded-md shadow-md md:w-1/3 bg-gray-800 space-y-4 transition-all duration-300"},he={class:"flex items-center justify-between p-2 bg-gray-700 rounded"},ve={for:"toggle",class:"relative inline-flex items-center cursor-pointer"},fe=["disabled"],_e={class:"ml-3 text-sm font-medium text-gray-300"},xe={key:0,class:"ml-2 text-xs italic text-gray-400"},we={key:0,class:"overflow-auto max-h-60 border border-gray-700 rounded"},ke={class:"min-w-full text-sm"},Ce={class:"text-sm"},Be={class:"px-2 py-2"},Ve={class:"px-2 py-2"},$e={class:"px-2 py-2"},Ue=["onClick","disabled"],Se={key:0},Fe={key:1},Ae=["onClick","disabled"],ze={key:0},Te={key:1},We={class:"overflow-auto max-h-60 border border-gray-700 rounded"},Ee={class:"min-w-full"},Le={class:"px-2 py-2"},Ne={class:"px-2 py-2"},Pe={class:"px-2 py-2"},Ge={class:"px-2 py-2"},Me={class:"mt-4 flex space-x-4"},Re=["disabled"],je={key:0},He={key:1},Je=["disabled"],qe={key:0},De={key:1},Oe=["disabled"],Ye={key:0},Ke={key:1},Qe={class:"mb-4 text-sm"},Xe={class:"mb-4 text-sm"};function Ze(i,a,m,v,d,c){return o(),n("div",ye,[e("div",he,[e("label",ve,[C(e("input",{type:"checkbox",id:"toggle","onUpdate:modelValue":a[0]||(a[0]=r=>d.setting=r),onChange:a[1]||(a[1]=(...r)=>c.updateSetting&&c.updateSetting(...r)),class:"sr-only peer",disabled:d.loading},null,40,fe),[[re,d.setting]]),a[7]||(a[7]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1)),e("span",_e,[F(u(d.setting?"Înscrieri Pornite prin Bot":"Înscrieri Oprite prin Bot")+" ",1),d.loading?(o(),n("span",xe,"Loading...")):g("",!0)])])]),d.winners.length?(o(),n("div",we,[e("table",ke,[e("tbody",Ce,[(o(!0),n($,null,U(d.winners,(r,f)=>(o(),n("tr",{key:r.id,class:"text-sm"},[e("td",Be,u(r.user),1),e("td",Ve,u(r.game),1),e("td",$e,[e("button",{onClick:A=>c.rerollWinner(r,f),class:"bg-blue-600 rounded p-1 btn-sm text-sm mr-2",disabled:d.loading},[d.loading?(o(),n("span",Se,"Loading...")):(o(),n("span",Fe,"Reroll"))],8,Ue),e("button",{onClick:A=>c.eliminateWinner(r,f),class:"bg-red-600 rounded p-1 btn-sm",disabled:d.loading},[d.loading?(o(),n("span",ze,"Loading...")):(o(),n("span",Te,"Elimină"))],8,Ae)])]))),128))])])])):g("",!0),e("div",We,[e("table",Ee,[a[8]||(a[8]=e("thead",{class:"bg-gray-900"},[e("tr",null,[e("th",{class:"px-2 py-2 text-left text-gray-300"},"User"),e("th",{class:"px-2 py-2 text-left text-gray-300"},"Joc"),e("th",{class:"px-2 py-2 text-left text-gray-300"},"Ales"),e("th",{class:"px-2 py-2 text-left text-gray-300"},"Eliminat")])],-1)),e("tbody",null,[(o(!0),n($,null,U(d.battleViewers,r=>(o(),n("tr",{key:r.id,class:_({"bg-green-600":r.picked&&!r.eliminated,"bg-red-600":r.eliminated})},[e("td",Le,u(r.user),1),e("td",Ne,u(r.game),1),e("td",Pe,u(r.picked?"Yes":"No"),1),e("td",Ge,u(r.eliminated?"Yes":"No"),1)],2))),128))])])]),e("div",Me,[e("button",{onClick:a[2]||(a[2]=(...r)=>c.pickWinner&&c.pickWinner(...r)),class:"btn-primary",disabled:d.loading},[d.loading?(o(),n("span",je,"Loading...")):(o(),n("span",He,"Alege Câștigător"))],8,Re),e("button",{onClick:a[3]||(a[3]=(...r)=>c.fillList&&c.fillList(...r)),class:"btn-primary",disabled:d.loading},[d.loading?(o(),n("span",qe,"Loading...")):(o(),n("span",De,"Umple Lista"))],8,Je),e("button",{onClick:a[4]||(a[4]=(...r)=>c.clearList&&c.clearList(...r)),class:"btn-danger",disabled:d.loading},[d.loading?(o(),n("span",Ye,"Loading...")):(o(),n("span",Ke,"Șterge Lista"))],8,Oe)]),a[9]||(a[9]=e("p",{class:"mb-2 text-gray-300 text-sm"}," Poți automatiza procesul de înscriere dacă folosești Streamlabs Cloud Bot. ",-1)),a[10]||(a[10]=e("p",{class:"mb-2 text-gray-300 text-sm"}," Creează comanda Streamlabs Coud Bot !particip: ",-1)),e("div",Qe,[e("button",{class:"w-full text-left p-2 bg-green-600 text-gray-900 rounded focus:outline-none hover:bg-green-500 transition",onClick:a[5]||(a[5]=r=>c.copyText(c.apiUrlCommand))},[e("code",null,u(c.apiUrlCommand),1)])]),a[11]||(a[11]=e("p",{class:"mb-2 text-gray-300 text-sm"}," Creează comanda NightBot !particip: ",-1)),e("div",Xe,[e("button",{class:"w-full text-left p-2 bg-green-600 text-gray-900 rounded focus:outline-none hover:bg-green-500 transition",onClick:a[6]||(a[6]=r=>c.copyText(c.apiUrlCommandNightBot))},[e("code",null,u(c.apiUrlCommandNightBot),1)])])])}const Ie=ge(be,[["render",Ze],["__scopeId","data-v-93235c65"]]);const et={class:"py-4"},tt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},st={key:0,class:"bg-gray-800 overflow-hidden shadow-lg rounded-md transition-all duration-300"},at={class:"p-6 space-y-4"},lt={class:"flex flex-row gap-2"},it={class:"flex flex-col md:flex-row md:space-x-4"},ot={class:"md:w-2/3 bg-gray-800 p-6 rounded-md shadow-md space-y-4 transition-all duration-300"},nt={class:"text-lg font-semibold text-gray-300 flex gap-2 items-center"},rt={class:"flex gap-4"},dt={key:0,class:"absolute inset-0 pointer-events-none bg-blur transition-all duration-300"},ut={class:"relative z-10 flex items-center gap-4 w-full"},ct=["src"],mt=["onUpdate:modelValue"],pt=["disabled"],gt={key:1,class:"bg-gray-900 overflow-hidden shadow-lg rounded-md transition-all duration-300"},bt={class:"p-6 flex justify-center items-center bg-gray-800"},yt={class:"w-full max-w-md bg-gray-900 shadow-lg rounded-md p-6 text-center transition-all duration-300"},ht=["src"],vt={class:"text-2xl font-bold text-gray-100 mb-2"},ft={class:"text-lg font-medium text-gray-300"},_t={key:2,class:"bg-gray-900 overflow-hidden shadow-lg rounded-md mt-6 transition-all duration-300"},xt={class:"p-6"},wt={class:"text-xl font-bold mb-4 text-gray-100"},kt={class:"text-gray-300"},Ct={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},Bt={key:0,class:"absolute inset-0 pointer-events-none bg-blur transition-all duration-300"},Vt={class:"flex gap-2 items-center mb-2 p-2 rounded-md border border-gray-600 transition-all duration-300"},$t=["src"],Ut={class:"w-full"},St={class:"text-lg font-bold mb-2 text-gray-100"},Ft={class:"flex flex-row gap-2"},At={class:"text-sm font-medium text-gray-300"},zt=["onUpdate:modelValue","disabled","onInput"],Tt={class:"text-sm font-medium text-gray-300"},Wt=["disabled","onUpdate:modelValue","onInput"],Et={class:"text-sm font-medium text-gray-300"},Lt=["onUpdate:modelValue"],Nt=["onClick"],Pt=["disabled"],Gt={class:"mt-4 text-lg font-bold text-gray-100"},Mt={key:1,class:"mt-4"},Rt={class:"text-lg font-bold text-gray-100"},jt={class:"mt-6 flex flex-col gap-4"},Ht=["disabled"],Jt=["disabled"],qt={class:"p-6"},Dt={key:0,class:"table-auto w-full text-sm text-gray-200 mb-2 transition-all duration-300"},Ot={class:"px-4 py-2 font-bold"},Yt={class:"px-4 py-2"},Kt={key:1,class:"table-auto w-full text-sm text-gray-200 transition-all duration-300"},Qt={class:"border border-black px-1 py-1 shrink w-0"},Xt={class:"border border-black px-2 py-1"},Zt={class:"border border-black px-2 py-1"},ls={__name:"BonusBattle",setup(i){const a=y(!0),m=y(""),v=y("5-10"),d=y(""),c=y("2"),r=y([{game_id:null,for_user:null},{game_id:null,for_user:null},{game_id:null,for_user:null},{game_id:null,for_user:null}]),f=y(null),A=y(null),E=y(null),L=y(null),z=y([{}]),J=y(null),T=y([]),N=y(!1),x=y(null),k=y([]),q=pe(),D=H(()=>q.availableGames);let M=y(null);de(async()=>{await V()});const O=H(()=>r.value.length<4?!0:r.value.some(l=>!l.game_id)),P=H(()=>z.value?z.value.length<2?!1:z.value.every(l=>l.cost_buy>0):!1),R=l=>{r.value=Array.from({length:l},()=>({game_id:"",for_user:""}))},Y=async()=>{k.value.forEach(l=>{const t=(l==null?void 0:l.scores.length)>0?l.scores[l.scores.length-1].cost_buy:0;l==null||l.scores.push({bracket_id:L.value.id,bonus_concurrent_id:l.id,cost_buy:t,score:0,result_buy:0})}),await j(),await V()},ee=async(l,t)=>{await se(k.value[l].scores[t].id),k.value[l].scores.splice(t,1),await V()},K=async(l,t)=>{M&&clearTimeout(M),M=setTimeout(async()=>{const s=k.value[l].scores[t];s.cost_buy>0?(s.score=parseFloat((s.result_buy/s.cost_buy).toFixed(3)),await j()):alert("Amount must be greater than 0.")},1e3)},te=l=>l.reduce((t,s)=>t+s.score,0).toFixed(3),se=async l=>{var t;try{a.value=!0;const s=await axios.delete(`/api/bonus-battles/delete-score/${l}`);console.log("Bonus score deleted successfully:",s.data),await j()}catch(s){console.error("Failed to delete bonus score:",((t=s.response)==null?void 0:t.data)||s.message)}finally{a.value=!1}},j=async()=>{var l;try{a.value=!0;const t=await axios.post("/api/bonus-battles/add-score",{active_bracket:L.value.id,bracket:k.value});console.log("Bonus battle stored successfully:",t.data)}catch(t){console.error("Failed to store bonus score:",((l=t.response)==null?void 0:l.data)||t.message)}finally{a.value=!1}},ae=async()=>{var l;if(!m.value||r.value.some(t=>!t.game_id)){alert("All fields must be filled to start.");return}try{const t=await axios.post("/api/bonus-battles",{title:m.value,stake:v.value,prize:d.value,buys:c.value,concurrents:r.value});console.log("Bonus battle stored successfully:",t.data),await V()}catch(t){console.error("Failed to store bonus battle:",((l=t.response)==null?void 0:l.data)||t.message),alert("An error occurred while saving the bonus battle. Please try again.")}},le=async()=>{var l;try{const t=await axios.post("/api/bonus-battles/end-battle",{bonus_battle_id:f.value.id});x.value=t.data.winner,await V()}catch(t){console.log("endBattle error:",((l=t.response)==null?void 0:l.data)||t.message)}},ie=async()=>{var l;try{a.value=!0,await axios.post("/api/bonus-battles/finish-round",{active_bracket:L.value.id}),await V()}catch(t){console.error("Failed to finish round:",((l=t.response)==null?void 0:l.data)||t.message),alert("An error occurred while finishing the round. Please try again.")}finally{a.value=!1}},oe=async(l,t)=>{try{a.value=!0,await axios.put("/api/bonus-battles/edit-concurrent",{id:l,game_id:t}),await V(),N.value=!1}catch{alert("Please try again.")}finally{a.value=!1}},V=async()=>{var l;try{a.value=!0;const t=await axios.get("/api/bonus-battles/active");if(J.value=t.data.total_battles,f.value=t.data.battle,A.value=t.data.concurrents,E.value=t.data.stage,L.value=t.data.bracket,z.value=t.data.scores,T.value=t.data.history,m.value="Bonus Battle #"+(J.value+1),A.value){const b=A.value;k.value=b.slice(0,2).map(p=>{const h=z.value.filter(w=>w.bonus_concurrent_id===p.id);return{...p,scores:h.length?h:[]}})}if(k.value.some(b=>b.scores.length===0)){const b=((l=f.value)==null?void 0:l.buys)||0;if(b>0)for(let p=0;p<b;p++)await Y()}}catch(t){console.error("Failed to fetch active bonus battle:",t.message)}finally{a.value=!1}},W=l=>{const t=q.availableGames.find(s=>s.id===l);return t?`/storage/games/${t.image}`:""},ne=l=>{console.log("Winners picked:",l),r.value=r.value.map((t,s)=>({...t,for_user:l[s]!==void 0?l[s]:""}))};return(l,t)=>l.loadiwng?g("",!0):(o(),ue(me,{key:0,title:"Bonus Battle"},{default:Q(()=>[e("div",et,[e("div",tt,[!f.value&&!x.value?(o(),n("div",st,[e("div",at,[e("div",lt,[e("div",null,[t[9]||(t[9]=e("label",{for:"title",class:"block text-sm font-medium text-gray-300"},"Titlu Bonus Battle",-1)),C(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),id:"title",class:"mt-1 block w-full input-primary"},null,512),[[B,m.value]])]),e("div",null,[t[10]||(t[10]=e("label",{for:"stake",class:"block text-sm font-medium text-gray-300"},"Miză (eg: 5-8, 5, 10-20, etc.)",-1)),C(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),id:"stake",class:"mt-1 block w-full input-primary"},null,512),[[B,v.value]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"prize",class:"block text-sm font-medium text-gray-300"},"Premiu",-1)),C(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>d.value=s),id:"prize",class:"mt-1 block w-full input-primary"},null,512),[[B,d.value]])]),e("div",null,[t[12]||(t[12]=e("label",{for:"buys",class:"block text-sm font-medium text-gray-300"},"Câte buys per joc (poți face ulterior câte vrei)",-1)),C(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>c.value=s),id:"buys",class:"mt-1 block w-full input-primary"},null,512),[[B,c.value]])])]),e("div",it,[e("div",ot,[e("h3",nt,[t[13]||(t[13]=F(" Participanți ")),e("div",rt,[e("button",{onClick:t[4]||(t[4]=s=>R(4)),class:"btn-primary"},"4"),e("button",{onClick:t[5]||(t[5]=s=>R(8)),class:"btn-primary"},"8"),e("button",{onClick:t[6]||(t[6]=s=>R(16)),class:"btn-primary"},"16")])]),G(ce,{name:"fade"},{default:Q(()=>[(o(!0),n($,null,U(r.value,(s,b)=>(o(),n("div",{key:b,class:"relative overflow-hidden flex items-center gap-4 bg-gray-900 p-4 rounded-md shadow transition-all duration-300",style:X(s.game_id?{"--bg-image":"url("+W(s.game_id)+")"}:{})},[s.game_id?(o(),n("div",dt)):g("",!0),e("div",ut,[s.game_id?(o(),n("img",{key:0,src:W(s.game_id),alt:"Game Thumbnail",class:"w-16 h-16 object-cover rounded-md"},null,8,ct)):g("",!0),G(Z(I),{options:D.value,label:"name",reduce:p=>p.id,modelValue:s.game_id,"onUpdate:modelValue":p=>s.game_id=p,placeholder:"Alege Joc",class:"flex-1 transition-all duration-300","append-to-body":""},null,8,["options","reduce","modelValue","onUpdate:modelValue"]),C(e("input",{type:"text","onUpdate:modelValue":p=>s.for_user=p,class:"flex-1 input-primary",placeholder:"Cine a ales? (opțional)"},null,8,mt),[[B,s.for_user]])])],4))),128))]),_:1})]),G(Ie,{onWinnersPicked:ne,fillCount:r.value.length},null,8,["fillCount"])]),e("button",{disabled:O.value,class:_([{"opacity-50 cursor-not-allowed":O.value},"mt-4 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md transition-all duration-300"]),type:"button",onClick:ae}," Start ",10,pt)])])):g("",!0),x.value&&!f.value?(o(),n("div",gt,[e("div",bt,[e("div",yt,[x.value.game.image?(o(),n("img",{key:0,src:W(x.value.game.id),alt:"Game Thumbnail",class:"w-32 mx-auto object-cover rounded-md mb-4"},null,8,ht)):g("",!0),e("h2",vt," Câștigător! - "+u(x.value.game.name),1),e("p",ft," User: "+u(x.value.for_user),1)])])])):g("",!0),f.value?(o(),n("div",_t,[e("div",xt,[e("h2",wt,"Active Battle: "+u(f.value.title),1),e("p",kt," Miza: "+u(f.value.stake)+" | Etapa: "+u(E.value.name)+" | Premiu: "+u(f.value.prize)+" | Buys: "+u(f.value.buys),1),k.value.length>1?(o(),n("div",Ct,[(o(!0),n($,null,U(k.value,(s,b)=>(o(),n("div",{key:b,class:_(["relative border rounded-md p-4 shadow transition-all duration-300 game-active-row",s.game.image?"bg-transparent":"bg-gray-900"]),style:X(s.game.image?{"--bg-image":"url("+W(s.game.id)+")"}:{})},[s.game.image?(o(),n("div",Bt)):g("",!0),e("div",{class:_(["relative z-10 p-4",s.game.image?"bg-black bg-opacity-60":"bg-gray-900"])},[e("div",Vt,[s.game.image?(o(),n("img",{key:0,src:W(s.game.id),alt:"Game Thumbnail",class:"w-auto h-[100px] rounded-md"},null,8,$t)):g("",!0),e("div",Ut,[e("h3",St,u(s.game.name)+" - "+u(s.for_user),1),e("div",Ft,[G(Z(I),{disabled:!N.value,options:D.value,label:"name",reduce:p=>p.id,"onUpdate:modelValue":p=>oe(s.id,p),placeholder:"Schimbi jocul?",class:"flex-1 transition-all duration-300","append-to-body":""},null,8,["disabled","options","reduce","onUpdate:modelValue"]),e("button",{class:"btn-secondary transition-all duration-300",onClick:t[7]||(t[7]=p=>N.value=!N.value)}," SCHIMBA JOCU ")])])]),e("div",null,[(o(!0),n($,null,U(s.scores,(p,h)=>(o(),n("div",{key:h,class:"flex items-center space-x-2 mt-1 transition-all duration-300"},[e("label",At,[t[14]||(t[14]=F(" Cost Buy ")),C(e("input",{type:"number","onUpdate:modelValue":w=>s.scores[h].cost_buy=w,class:_(["block w-40 border border-gray-600 rounded-md shadow-sm p-2 transition-all duration-300 input-primary",{"input-disabled":a.value}]),disabled:a.value,placeholder:"Amount",onInput:w=>K(b,h)},null,42,zt),[[B,s.scores[h].cost_buy]])]),e("label",Tt,[t[15]||(t[15]=F(" Rezultat Buy ")),C(e("input",{disabled:p.cost_buy<=0||a.value,class:_([{"input-disabled":p.cost_buy<=0||a.value,"input-primary":p.cost_buy>0},"block w-40 border border-gray-600 rounded-md shadow-sm p-2 transition-all duration-300"]),type:"number","onUpdate:modelValue":w=>s.scores[h].result_buy=w,placeholder:"Result",onInput:w=>K(b,h)},null,42,Wt),[[B,s.scores[h].result_buy]])]),e("label",Et,[t[16]||(t[16]=F(" Scor ")),C(e("input",{readonly:"",disabled:"",type:"number","onUpdate:modelValue":w=>s.scores[h].score=w,class:"block w-20 border border-gray-600 rounded-md shadow-sm p-2 input-disabled transition-all duration-300",placeholder:"Result"},null,8,Lt),[[B,s.scores[h].score]])]),h>=1?(o(),n("button",{key:0,type:"button",onClick:w=>ee(b,h),class:"btn-danger transition-all duration-300 align-middle"},t[17]||(t[17]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]),8,Nt)):g("",!0)]))),128)),e("button",{type:"button",onClick:t[8]||(t[8]=p=>Y()),disabled:a.value,class:_([{"input-disabled":a.value},"btn-primary mt-2"])}," Adaugă Buy ",10,Pt)]),e("p",Gt," Scor Total: "+u(te(s.scores)),1)],2)],6))),128))])):g("",!0),x.value?(o(),n("div",Mt,[e("p",Rt,"Câștigător: "+u(x.value.game.name)+" | User: "+u(x.value.for_user),1)])):g("",!0),e("div",jt,[E.value.name!=="Final"?(o(),n("button",{key:0,type:"button",onClick:ie,class:_(["bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md transition-all duration-300",{"input-disabled opacity-50":!P.value||a.value}]),disabled:!P.value||a.value}," Următoarii Concurenți ",10,Ht)):g("",!0),E.value.name==="Final"?(o(),n("button",{key:1,type:"button",onClick:le,class:_(["bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md transition-all duration-300",{"input-disabled opacity-50":!P.value}]),disabled:!P.value}," Termina Battle ",10,Jt)):g("",!0)])]),e("div",qt,[T.value.stage_brackets.length>0?(o(),n("table",Dt,[e("tbody",null,[(o(!0),n($,null,U(T.value.stage_brackets,(s,b)=>(o(),n("tr",{key:s.id,class:_(b%2===0?"bg-gray-900":"bg-gray-800")},[e("td",Ot,[e("span",{class:_({"line-through text-gray-500":s.winner!==s.participant_a})},u(s.participant_a),3),t[18]||(t[18]=F(" vs ")),e("span",{class:_({"line-through text-gray-500":s.winner!==s.participant_b})},u(s.participant_b),3)]),e("td",Yt,u(parseFloat(s.participant_a_score).toFixed(3))+" - "+u(parseFloat(s.participant_b_score).toFixed(3)),1)],2))),128))])])):g("",!0),T.value.concurrents.length>0?(o(),n("table",Kt,[e("tbody",null,[(o(!0),n($,null,U(T.value.concurrents,(s,b)=>(o(),n("tr",{key:s==null?void 0:s.id,class:_(b%2===0?"bg-gray-900":"bg-gray-800")},[e("td",Qt,u(s!=null&&s.is_eliminated?"❌":"✅"),1),e("td",Xt,u((s==null?void 0:s.game.name)||"N/A"),1),e("td",Zt,u((s==null?void 0:s.for_user)||"N/A"),1)],2))),128))])])):g("",!0)])])):g("",!0)])])]),_:1}))}};export{ls as default};
