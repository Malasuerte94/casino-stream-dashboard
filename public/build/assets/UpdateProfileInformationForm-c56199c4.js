import{i as d,c as b,b as t,a as s,w as l,F as R,q as k,o as v,d as a,h as g,v as y,y as j,e as w,f as H,k as _,u as L,g as A,J}from"./app-a97362c8.js";import{_ as W}from"./ActionMessage-23a57f0e.js";import{_ as T}from"./FormSection-ed1a3ad3.js";import{_ as c}from"./InputError-c977765a.js";import{_ as x}from"./InputLabel-8bc8a01b.js";import{_ as P}from"./PrimaryButton-1675a9f8.js";import{_ as D}from"./SecondaryButton-cec43c89.js";import{_ as h}from"./TextInput-c9f7c79b.js";import"./SectionTitle-1d1e812d.js";import"./_plugin-vue_export-helper-c27b6911.js";const q={class:"flex gap-2 w-full"},z={class:"bg-gray-700 shadow rounded-lg p-6 mb-6 w-1/3"},M={class:"flex items-center gap-4"},O={class:"flex-1"},Y={class:"bg-gray-700 shadow rounded-lg p-6 mb-6 w-1/3"},G={class:"flex items-center gap-4"},K={class:"flex-1"},Q={key:0,class:"col-span-6 sm:col-span-4"},X={class:"mt-2"},Z=["src","alt"],ee={class:"mt-2"},oe={class:"col-span-6 sm:col-span-4"},se={class:"col-span-6 sm:col-span-4"},te={key:0},le={class:"text-sm mt-2"},ae={class:"mt-2 font-medium text-sm text-green-600"},he={__name:"UpdateProfileInformationForm",props:{user:Object},setup(u){const V=u,r=d({name:V.user.name,email:V.user.email,photo:null}),p=d({discordWebhook:""}),f=d({discordWebhook:""}),S=d(null),m=d(null),i=d(null),F=()=>{const o=new FormData;o.append("name",r.value.name),o.append("email",r.value.email),i.value&&i.value.files[0]&&o.append("photo",i.value.files[0]),k.post("/api/user/profile-picture",o,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{B(),alert("Profile picture updated!"),console.log("Profile updated:",e.data)}).catch(e=>{console.error("Failed to update profile:",e)})},C=()=>{k.post("/api/user-settings/save-discord-webhook",{discordWebhook:p.value.discordWebhook}).then(o=>{alert("Discord webhook saved successfully!"),console.log("Webhook schedule:",o.data)}).catch(o=>{alert("Failed to save the webhook. Please try again."),console.error(o)})},U=()=>{k.post("/api/user-settings/save-discord-webhook/hunt-buy-battle",{discordWebhook:f.value.discordWebhook}).then(o=>{alert("Discord webhook saved successfully!"),console.log("Webhook hunt-buy-battle:",o.data)}).catch(o=>{alert("Failed to save the webhook. Please try again."),console.error(o)})},$=()=>{S.value=!0},N=()=>{i.value.click()},E=()=>{const o=i.value.files[0];if(!o)return;const e=new FileReader;e.onload=n=>{m.value=n.target.result},e.readAsDataURL(o)},I=()=>{J.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{m.value=null,B()}})},B=()=>{var o;(o=i.value)!=null&&o.value&&(i.value.value=null)};return(o,e)=>(v(),b(R,null,[t("div",q,[t("div",z,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold text-gray-100 mb-4"},"Discord Webhook - Schedule",-1)),t("div",M,[t("div",O,[s(h,{id:"discordWebhookSchedule",modelValue:p.value.discordWebhook,"onUpdate:modelValue":e[0]||(e[0]=n=>p.value.discordWebhook=n),type:"text",placeholder:"Enter Discord Webhook URL",class:"mt-1 block w-full"},null,8,["modelValue"])]),s(P,{onClick:C},{default:l(()=>e[4]||(e[4]=[a(" Save ")])),_:1})]),s(W,{on:!1,class:"mt-3"},{default:l(()=>e[5]||(e[5]=[a(" Webhook Saved. ")])),_:1}),s(c,{message:p.value.errors,class:"mt-2"},null,8,["message"])]),t("div",Y,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold text-gray-100 mb-4"},"Discord Webhook - Hunt / Buy / Battle",-1)),t("div",G,[t("div",K,[s(h,{id:"discordWebhookHuntBuyBattle",modelValue:f.value.discordWebhook,"onUpdate:modelValue":e[1]||(e[1]=n=>f.value.discordWebhook=n),type:"text",placeholder:"Enter Discord Webhook URL",class:"mt-1 block w-full"},null,8,["modelValue"])]),s(P,{onClick:U},{default:l(()=>e[7]||(e[7]=[a(" Save ")])),_:1})]),s(W,{on:!1,class:"mt-3"},{default:l(()=>e[8]||(e[8]=[a(" Webhook Saved. ")])),_:1}),s(c,{message:f.value.errors,class:"mt-2"},null,8,["message"])])]),s(T,{onSubmitted:F},{title:l(()=>e[10]||(e[10]=[a(" Profile Information ")])),description:l(()=>e[11]||(e[11]=[a(" Update your account's profile information and email address. ")])),form:l(()=>[o.$page.props.jetstream.managesProfilePhotos?(v(),b("div",Q,[t("input",{ref_key:"photoInput",ref:i,type:"file",class:"hidden",onChange:E},null,544),s(x,{for:"photo",value:"Photo"}),g(t("div",X,[t("img",{src:u.user.profile_photo_url,alt:u.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,Z)],512),[[y,!m.value]]),g(t("div",ee,[t("span",{class:"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center",style:j("background-image: url('"+m.value+"');")},null,4)],512),[[y,m.value]]),s(D,{class:"mt-2 mr-2",type:"button",onClick:w(N,["prevent"])},{default:l(()=>e[12]||(e[12]=[a(" Select A New Photo ")])),_:1}),u.user.profile_photo_path?(v(),H(D,{key:0,type:"button",class:"mt-2",onClick:w(I,["prevent"])},{default:l(()=>e[13]||(e[13]=[a(" Remove Photo ")])),_:1})):_("",!0),s(c,{message:r.value.errors,class:"mt-2"},null,8,["message"])])):_("",!0),t("div",oe,[s(x,{for:"name",value:"Name"}),s(h,{id:"name",modelValue:r.value.name,"onUpdate:modelValue":e[2]||(e[2]=n=>r.value.name=n),type:"text",class:"mt-1 block w-full",autocomplete:"name"},null,8,["modelValue"]),s(c,{message:r.value.errors,class:"mt-2"},null,8,["message"])]),t("div",se,[s(x,{for:"email",value:"Email"}),s(h,{id:"email",modelValue:r.value.email,"onUpdate:modelValue":e[3]||(e[3]=n=>r.value.email=n),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),s(c,{message:r.value.errors,class:"mt-2"},null,8,["message"]),o.$page.props.jetstream.hasEmailVerification&&u.user.email_verified_at===null?(v(),b("div",te,[t("p",le,[e[15]||(e[15]=a(" Your email address is unverified. ")),s(L(A),{href:o.route("verification.send"),method:"post",as:"button",class:"underline text-gray-600 hover:text-gray-900",onClick:w($,["prevent"])},{default:l(()=>e[14]||(e[14]=[a(" Click here to re-send the verification email. ")])),_:1},8,["href"])]),g(t("div",ae," A new verification link has been sent to your email address. ",512),[[y,S.value]])])):_("",!0)])]),actions:l(()=>[s(W,{on:!1,class:"mr-3"},{default:l(()=>e[16]||(e[16]=[a(" Saved. ")])),_:1}),s(P,null,{default:l(()=>e[17]||(e[17]=[a(" Save ")])),_:1})]),_:1})],64))}};export{he as default};
