import{q as p,c as l,b as t,F as c,E as f,k as g,a as x,w as y,T as w,h as d,L as b,a8 as m,t as n,o as r}from"./app-4069934b.js";import{_}from"./_plugin-vue_export-helper-c27b6911.js";const v={props:{latestHunt:{type:Object,required:!0},listType:{type:String,required:!0},currency:{type:String,required:!1,default:"RON"}},data(){return{highestMulti:0,lowestMulti:0,totalPayout:0,bestGame:"",worstGame:"",existingPrediction:null,notification:null,winners:null,winnerTitles:{resultWinner:"Cel mai Apropiat Rezultat",biggestMultiplierWinner:"Cel mai Mare Multiplicator",lowestMultiplierWinner:"Cel mai Mic Multiplicator",exactBiggestMultiplierGame:"Cel mai bun joc",exactLowestMultiplierGame:"Cel mai prost joc"},notPredicted:!1}},async mounted(){await this.fetchExistingPrediction(),this.latestHunt.is_open||await this.fetchWinners()},methods:{async fetchExistingPrediction(){try{const s=await p.get(`/api/viewer/get-prediction/${this.latestHunt.id}`);s.data&&s.data.prediction?(this.notPredicted=!1,this.existingPrediction=s.data.prediction,this.highestMulti=s.data.prediction.highestMulti,this.lowestMulti=s.data.prediction.lowestMulti,this.totalPayout=s.data.prediction.totalPayout,this.bestGame=s.data.prediction.bestGame,this.worstGame=s.data.prediction.worstGame):this.latestHunt.is_open||(this.notPredicted=!0)}catch(s){this.$page.props.user.id||(this.notPredicted=!0),console.error("Error fetching existing prediction:",s)}},async submitPredictions(){if(!this.latestHunt.is_open)return;const s={highestMulti:this.highestMulti,lowestMulti:this.lowestMulti,totalPayout:this.totalPayout,bestGame:this.bestGame,worstGame:this.worstGame,bonusId:this.latestHunt.id,listType:this.listType};try{const e=await p.post("/api/viewer/add-prediction",s);this.notification=e.data.message,await this.fetchExistingPrediction(),setTimeout(()=>this.notification=null,3e3)}catch(e){console.error("Error submitting predictions:",e),this.notification="Eroare la trimiterea predic»õiei!",setTimeout(()=>this.notification=null,3e3)}},async fetchWinners(){try{const s=await p.get(`/api/get-bonus-winner/${this.latestHunt.user_id}`);s.data&&s.data.winners?(console.log(s.data.winners),this.winners=s.data.winners):this.winners=null}catch{console.error("No winners found.")}},getGameName(s){const e=this.latestHunt.bonus_hunt_games.find(a=>a.id===s);return e?e.game.name:"Necunoscut"}},watch:{latestHunt(){this.fetchExistingPrediction(),this.fetchWinners()}}},M={key:0,class:"backdrop-blur-xl bg-white/10 shadow-lg shadow-black/40 border border-white/20 p-4 rounded-lg gap-4 flex flex-col text-white relative"},P={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},G=["src"],k={key:1,class:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center text-white text-xs"},C={class:"flex flex-col"},H={class:"text-gray-300 text-xs uppercase"},N={class:"font-semibold text-white"},T={key:1,class:"relative"},j={class:"backdrop-blur-xl bg-white/10 shadow-lg shadow-black/40 border border-white/20 p-4 rounded-lg gap-4 flex flex-col text-white relative"},E={key:0,class:"absolute top-0 left-0 right-0 bg-green-600 text-white p-2 rounded-t-lg text-center"},V={class:"grid grid-cols-2 gap-4"},U={class:"flex flex-col gap-1"},W={class:"flex flex-col gap-1"},q={class:"grid grid-cols-2 gap-4"},A={class:"flex flex-col gap-1"},B=["value"],L={class:"flex flex-col gap-1"},S=["value"],D={class:"grid grid-cols-2 gap-4"},F={class:"flex flex-col gap-1"},O={class:"flex flex-col justify-end"},R=["disabled"],z={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-md flex items-center justify-center rounded-lg p-0"},I={class:"p-1 rounded-lg text-white"},J={key:0,class:"flex flex-col text-xs"},K={class:"w-full mt-2 border border-gray-700 rounded-lg flex flex-row"},Q={class:"flex flex-col"},X={class:"border-b border-gray-700 flex flex-row"},Y={class:"p-2"},Z={class:"border-b border-gray-700 flex flex-row"},$={class:"p-2"},tt={class:"flex flex-col"},et={class:"border-b border-gray-700 flex flex-row"},it={class:"p-2"},st={class:"border-b border-gray-700 flex flex-row"},ot={class:"p-2"},lt={class:"border-b border-gray-700 flex flex-col"},rt={class:"p-2"},nt={key:1,class:"text-sm font-semibold text-left"};function at(s,e,a,dt,o,u){return r(),l(c,null,[o.winners?(r(),l("div",M,[e[6]||(e[6]=t("div",{class:"text-lg font-semibold text-center mb-2"},"üèÜ C√¢»ôtigƒÉtori üèÜ",-1)),t("div",P,[(r(!0),l(c,null,f(o.winners,(i,h)=>(r(),l("div",{key:h,class:"flex items-center gap-3 bg-gray-900/80 p-4 rounded-lg shadow-lg border border-gray-700"},[i!=null&&i.profile_photo_path?(r(),l("img",{key:0,src:i.profile_photo_path,alt:"User Avatar",class:"w-10 h-10 rounded-full border border-gray-600"},null,8,G)):(r(),l("div",k," üèÖ ")),t("div",C,[t("div",H,n(o.winnerTitles[h]),1),t("div",N,n(i&&(i.yt_name||i.name)||"N/A"),1)])]))),128))])])):g("",!0),a.latestHunt?(r(),l("div",T,[t("div",j,[x(w,{name:"fade"},{default:y(()=>[o.notification?(r(),l("div",E,n(o.notification),1)):g("",!0)]),_:1}),e[12]||(e[12]=t("div",{class:"font-semibold"},"Predic»õii Hunt",-1)),t("div",V,[t("div",U,[e[7]||(e[7]=t("label",{for:"highestMulti",class:"text-gray-300"},"Cel mai mare multi",-1)),d(t("input",{id:"highestMulti","onUpdate:modelValue":e[0]||(e[0]=i=>o.highestMulti=i),type:"number",class:"bg-gray-900 text-white border border-gray-700 rounded p-2 outline-none focus:ring focus:ring-indigo-500"},null,512),[[b,o.highestMulti,void 0,{number:!0}]])]),t("div",W,[e[8]||(e[8]=t("label",{for:"lowestMulti",class:"text-gray-300"},"Cel mai mic multi",-1)),d(t("input",{id:"lowestMulti","onUpdate:modelValue":e[1]||(e[1]=i=>o.lowestMulti=i),type:"number",class:"bg-gray-900 text-white border border-gray-700 rounded p-2 outline-none focus:ring focus:ring-indigo-500"},null,512),[[b,o.lowestMulti,void 0,{number:!0}]])])]),t("div",q,[t("div",A,[e[9]||(e[9]=t("label",{for:"bestGame",class:"text-gray-300"},"Cel mai bun joc",-1)),d(t("select",{id:"bestGame","onUpdate:modelValue":e[2]||(e[2]=i=>o.bestGame=i),class:"bg-gray-900 text-white border border-gray-700 rounded p-2 outline-none focus:ring focus:ring-green-500"},[(r(!0),l(c,null,f(a.latestHunt.bonus_hunt_games,i=>(r(),l("option",{key:i.id,value:i.id},n(i.game.name),9,B))),128))],512),[[m,o.bestGame]])]),t("div",L,[e[10]||(e[10]=t("label",{for:"worstGame",class:"text-gray-300"},"Cel mai prost joc",-1)),d(t("select",{id:"worstGame","onUpdate:modelValue":e[3]||(e[3]=i=>o.worstGame=i),class:"bg-gray-900 text-white border border-gray-700 rounded p-2 outline-none focus:ring focus:ring-red-500"},[(r(!0),l(c,null,f(a.latestHunt.bonus_hunt_games,i=>(r(),l("option",{key:i.id,value:i.id},n(i.game.name),9,S))),128))],512),[[m,o.worstGame]])])]),t("div",D,[t("div",F,[e[11]||(e[11]=t("label",{for:"totalPayout",class:"text-gray-300"},"C√¢t plƒÉte»ôte lista",-1)),d(t("input",{id:"totalPayout","onUpdate:modelValue":e[4]||(e[4]=i=>o.totalPayout=i),type:"number",class:"bg-gray-900 text-white border border-gray-700 rounded p-2 outline-none focus:ring focus:ring-indigo-500"},null,512),[[b,o.totalPayout,void 0,{number:!0}]])]),t("div",O,[t("button",{onClick:e[5]||(e[5]=(...i)=>u.submitPredictions&&u.submitPredictions(...i)),class:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300",disabled:!a.latestHunt.is_open},n(o.existingPrediction?"Update Predic»õii":"Trimite Predic»õii"),9,R)])])]),!s.$page.props.user.id||!a.latestHunt.is_open?(r(),l("div",z,[t("div",I,[o.notPredicted?(r(),l("div",nt,"Nu ai predic»õii pentru acest hunt")):(r(),l("div",J,[e[18]||(e[18]=t("div",{class:"text-sm font-semibold text-left"},"Predic»õiile tale",-1)),t("div",K,[t("div",Q,[t("div",X,[e[13]||(e[13]=t("div",{class:"p-2"},"Cel mai mare multi",-1)),t("div",Y,n(o.highestMulti)+"x",1)]),t("div",Z,[e[14]||(e[14]=t("div",{class:"p-2"},"Cel mai mic multi",-1)),t("div",$,n(o.lowestMulti)+"x",1)])]),t("div",tt,[t("div",et,[e[15]||(e[15]=t("div",{class:"p-2"},"Cel mai bun joc",-1)),t("div",it,n(u.getGameName(o.bestGame)),1)]),t("div",st,[e[16]||(e[16]=t("div",{class:"p-2"},"Cel mai prost joc",-1)),t("div",ot,n(u.getGameName(o.worstGame)),1)])]),t("div",lt,[e[17]||(e[17]=t("div",{class:"p-2"},"C√¢t plƒÉte»ôte lista",-1)),t("div",rt,n(o.totalPayout)+" "+n(a.currency),1)])])]))])])):g("",!0)])):g("",!0)],64)}const gt=_(v,[["render",at]]);export{gt as default};
