import v from"./BonusBuy-2bcd0dd5.js";import w from"./BonusHunt-c1b72acc.js";import{q as r,s as p,c as a,b as s,t as b,h as d,m as _,n as u,V as m,a as l,w as y,T as f,o as g,k as c}from"./app-1a6a8153.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import"./gameStore-fb49fa04.js";const B={components:{BonusBuy:v,BonusHunt:w},data(){return{open_list:!1,settings:[],latestList:"",listCost:0,componentKey:0,listEnded:0}},async mounted(){await this.getSettings(),await this.getUrlGuessList()},methods:{async getSettings(){await r.get("/api/settings").then(o=>{this.settings=o.data.settings}).catch(o=>{console.log(o)}),this.settings.bonus_list&&this.$emit("displayOnly",this.settings.bonus_list)},async updateSettings(){await r.patch("/api/settings",{settings:this.settings}).then(o=>{this.settings=o.data.settings}).catch(o=>{console.log(o)}),await this.getSettings()},async getUrlGuessList(){await r.get("/api/get-latest-list").then(o=>{this.listEnded=o.data.bonusList.ended,this.latestList=o.data["list-id"],this.open_list=o.data.is_open===1,this.listCost=o.data.bonusList.start})},async setStatusGuessList(){await r.post("/api/set-latest-list",{is_open:this.open_list,list_id:this.latestList,type:this.settings.bonus_list}).then(()=>{this.getUrlGuessList()})},async closeBonusList(){await r.post("/api/close-bonus-list",{close:!0,list_id:this.latestList,type:this.settings.bonus_list}).finally(()=>{this.componentKey++})},activateDialog(){if(this.listCost<=0&&this.settings.bonus_list=="hunt"){alert("Vă rugăm să introduceți costul listei (Costul Hunt-ului).");return}this.$dialog({message:"Ești sigur că vrei să închizi lista? Nu mai poți edita după închidere. Câștigătorii vor fi anunțați!",buttons:["da","nu"],da:()=>{this.closeBonusList()},nu:()=>{console.log("refuse")}})}},computed:{guessUrl(){return`${window.location.origin}/streamer/${this.$page.props.user.id}`},isEnded(){return Boolean(this.listEnded)}},watch:{settings(){this.getUrlGuessList()}}},C={class:"px-6 py-3 flex items-center justify-between bg-gray-800 rounded-md shadow-md transition-all duration-300"},k={class:"flex items-center space-x-4"},S={class:"text-sm font-bold py-1 px-3 bg-gray-700 rounded-md border border-gray-600 transition"},U={class:"flex items-center space-x-4"},E={class:"ml-3 text-sm font-medium text-gray-300"},G={for:"toggle",class:"relative inline-flex items-center cursor-pointer"},V=["disabled"],N={class:"bg-gray-800 rounded-md shadow-md mt-4 transition-all duration-300"},D={class:"p-6"},H={class:"grid grid-cols-2 gap-4"};function K(o,t,T,z,i,n){const h=p("BonusBuy"),x=p("BonusHunt");return g(),a("div",null,[s("div",C,[s("div",k,[t[11]||(t[11]=s("span",{class:"text-sm text-gray-300"},"LINK pentru View-eri (ghicește suma)",-1)),s("div",S,b(n.guessUrl),1)]),s("div",U,[s("span",E,b(i.open_list?"Predicții Pornite":"Predicții Oprite"),1),s("label",G,[d(s("input",{type:"checkbox",id:"toggle","onUpdate:modelValue":t[0]||(t[0]=e=>i.open_list=e),onChange:t[1]||(t[1]=(...e)=>n.setStatusGuessList&&n.setStatusGuessList(...e)),class:"sr-only peer"},null,544),[[_,i.open_list]]),t[12]||(t[12]=s("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))]),s("button",{disabled:n.isEnded,class:u([{"opacity-50 cursor-not-allowed":n.isEnded},"bg-red-600 hover:bg-red-700 text-white font-medium rounded-md text-sm px-5 py-2 transition-all duration-300"]),onClick:t[2]||(t[2]=(...e)=>n.activateDialog&&n.activateDialog(...e)),type:"button"}," ÎNCHIDE LISTA / DECLARĂ CÂȘTIGĂTOR ",10,V)])]),s("div",N,[s("div",D,[s("div",H,[s("div",{class:u(["flex items-center pl-4 p-2 rounded-md bg-gray-700 border border-gray-600 cursor-pointer transition-all duration-300",{"bg-indigo-600":i.settings.bonus_list==="buy"}]),onClick:t[5]||(t[5]=e=>{i.settings.bonus_list="buy",n.updateSettings()})},[d(s("input",{onChange:t[3]||(t[3]=(...e)=>n.updateSettings&&n.updateSettings(...e)),id:"bordered-radio-2",type:"radio",value:"buy","onUpdate:modelValue":t[4]||(t[4]=e=>i.settings.bonus_list=e),name:"bonus-list-display",class:"w-4 h-4 mr-2"},null,544),[[m,i.settings.bonus_list]]),t[13]||(t[13]=s("label",{for:"bordered-radio-2",class:"w-full py-1 text-gray-300"}," Afișează Buy ",-1))],2),s("div",{class:u(["flex items-center pl-4 p-2 rounded-md bg-gray-700 border border-gray-600 cursor-pointer transition-all duration-300",{"bg-indigo-600":i.settings.bonus_list==="hunt"}]),onClick:t[8]||(t[8]=e=>{i.settings.bonus_list="hunt",n.updateSettings()})},[d(s("input",{onChange:t[6]||(t[6]=(...e)=>n.updateSettings&&n.updateSettings(...e)),id:"bordered-radio-1",type:"radio",value:"hunt","onUpdate:modelValue":t[7]||(t[7]=e=>i.settings.bonus_list=e),name:"bonus-list-display",class:"w-4 h-4 mr-2"},null,544),[[m,i.settings.bonus_list]]),t[14]||(t[14]=s("label",{for:"bordered-radio-1",class:"w-full py-1 text-gray-300"}," Afișează Hunt ",-1))],2)])]),l(f,{name:"fade"},{default:y(()=>[i.settings.bonus_list=="buy"?(g(),a("div",{class:"p-6 bg-gray-800 rounded-md border border-gray-700 mt-4 transition-all duration-300",key:i.componentKey},[t[15]||(t[15]=s("h5",{class:"text-lg font-bold text-gray-200 mb-2"},"Bonus Buy - List",-1)),l(h,{onNewlist:t[9]||(t[9]=e=>n.getUrlGuessList())})])):c("",!0)]),_:1}),l(f,{name:"fade"},{default:y(()=>[i.settings.bonus_list=="hunt"?(g(),a("div",{class:"p-6 bg-gray-800 rounded-md border border-gray-700 mt-4 transition-all duration-300",key:i.componentKey},[t[16]||(t[16]=s("h5",{class:"text-lg font-bold text-gray-200 mb-2"},"Bonus Hunt - List",-1)),l(x,{onNewlist:t[10]||(t[10]=e=>n.getUrlGuessList())})])):c("",!0)]),_:1})])])}const M=L(B,[["render",K]]);export{M as default};
