import{S as v}from"./SvgBh-94834666.js";import{_ as f}from"./_plugin-vue_export-helper-c27b6911.js";import{N as L,e as o,a as t,b,t as i,g as d,O as y,F as p,h as m,f as G,o as u,n as g}from"./app-6dcd8200.js";const S={components:{SvgBh:v},props:["id"],data(){return{loading:!0,bonusList:[],bonusListGames:[],settings:null,isUpdating:!1,scrollSpeed:500,itWasDuplicated:!0}},computed:{startAmount(){return this.bonusList.start??0},huntOrBuy(){var s;return((s=this.settings)==null?void 0:s.bonus_list)==="buy"?"Buy":"Hunt"},duplicatedGames(){return this.shouldScroll()?(this.itWasDuplicated=!0,[...this.bonusListGames,...this.bonusListGames]):(this.itWasDuplicated=!1,this.bonusListGames)},firstEmptyResultId(){const s=this.bonusListGames.find(l=>l.result==="0");return s?s.id:null},gamesOpenedNr(){return this.bonusListGames.filter(s=>s.result&&s.result!=="0").length},gamesTotalNr(){return this.bonusListGames.length},gamesRemainingNr(){return this.bonusListGames.filter(s=>!s.result||s.result==="0").length},gameHighestMulti(){const s=this.bonusListGames.map(l=>l!=null&&l.multiplier?parseFloat(l.multiplier.trim()):NaN).filter(l=>!isNaN(l));return s.length?Math.max(...s):0},progressPercentage(){return this.gamesOpenedNr/this.gamesTotalNr*100},averageMulti(){const s=this.bonusListGames.filter(r=>r.result!==null&&r.result!=="0");if(s.length===0)return 0;const l=s.reduce((r,h)=>r+parseFloat(h.multiplier),0);return Math.round(l/s.length)}},async mounted(){await this.getSettings(),await this.getLatestList(),this.loading=!1,await this.$nextTick(()=>{this.initAutoScroll(this.$refs.scrollWrapper),this.initAutoScroll(this.$refs.scrollWrapperHunt)}),await this.updateTheListFromTimeToTime()},methods:{shouldScroll(){const s=this.$refs.scrollWrapper||this.$refs.scrollWrapperHunt,l=this.$refs.viewport;if(!s||!l)return!1;const r=document.querySelector(".header-list"),h=r?r.getBoundingClientRect().height:0,n=l.getBoundingClientRect().bottom-h,_=s.querySelectorAll(".game-single");if(_.length===0)return!1;let e=0;return _.forEach(a=>{e+=a.getBoundingClientRect().height}),this.itWasDuplicated&&(e=e/2),e+20>n},async getSettings(){await axios.get("/api/settings/"+this.id).then(s=>{this.settings=s.data.settings}).catch(s=>{console.log(s)})},async getLatestList(){await axios.get("/api/bonus-list/"+this.id).then(s=>{this.bonusList=s.data.bonusList,this.bonusListGames=s.data.bonusListGames}).catch(s=>{console.log(s)})},async updateTheListFromTimeToTime(){setInterval(async()=>{this.isUpdating||(this.isUpdating=!0,await this.getLatestList(),this.isUpdating=!1,this.initAutoScroll())},8e3)},initAutoScroll(){const s=this.$refs.gamesList||this.$refs.gamesListHunt;s&&(this.shouldScroll()?s.classList.add("scrolling"):s.classList.remove("scrolling"))}}},w={key:0,class:"table",ref:"viewport"},B={class:"table-container"},N={class:"header-list"},T={class:"header-list-title"},x={class:"img-list"},k=t("span",null,"Bonus",-1),H={class:"bonus-details"},M={class:"list-cost"},R={class:"list-opened"},W={class:"details"},A={class:"details"},C={class:"progress"},O={class:"header-details"},F=t("div",{class:"header"},[t("div",{class:"header-content_buy header-content"},[t("div",{class:"text-center"},"#"),t("div",null,"Joc"),t("div",null,"Miză"),t("div",null,"Preț"),t("div",null,"Plată"),t("div",null,"Multi")])],-1),z={class:"scroll-wrapper",ref:"scrollWrapper"},D={class:"games",ref:"gamesList"},E={class:"number_game"},I={class:"name_game"},P={class:"stake"},U={class:"result"},V={class:"result"},q={class:"multi"},J=t("div",{class:"header"},[t("div",{class:"header-content_hunt header-content"},[t("div",{class:"text-center"},"#"),t("div",null,"Joc"),t("div",null,"Miză"),t("div",null,"Plată"),t("div",null,"Multi")])],-1),j={class:"scroll-wrapper",ref:"scrollWrapperHunt"},K={class:"games",ref:"gamesListHunt"},Q={class:"number_game"},X={class:"name_game"},Y={class:"stake"};function Z(s,l,r,h,c,n){const _=L("SvgBh");return c.loading?G("",!0):(u(),o("div",w,[t("div",B,[t("div",N,[t("div",T,[t("span",x,[b(_)]),k,t("span",null,i(n.huntOrBuy),1),t("div",H,[t("div",M,[d("Cost "),t("span",null,i(n.startAmount)+" lei",1)]),t("div",R,[t("div",W,[t("span",null,i(n.gamesOpenedNr)+"/",1)]),t("div",A,[t("span",null,i(n.gamesTotalNr),1),d("m ")])])])]),t("div",C,[t("div",{class:"progress-bar-fill",style:y({width:n.progressPercentage+"%"})},null,4)]),t("div",O,[t("div",null,[d("Avg (x)"),t("span",null,i(n.averageMulti),1)]),t("div",null,[d("Top (x)"),t("span",null,i(n.gameHighestMulti),1)]),t("div",null,[d("Rezultat"),t("span",null,i(c.bonusList.result)+" lei",1)])])]),n.huntOrBuy==="Buy"?(u(),o(p,{key:0},[F,t("div",z,[t("div",D,[(u(!0),o(p,null,m(n.duplicatedGames,(e,a)=>(u(),o("div",{key:"a-"+a,class:g(["game-single row-game_buy",{current:n.firstEmptyResultId===e.id}])},[t("div",E,i(a%c.bonusListGames.length+1),1),t("div",I,i(e.name),1),t("div",P,i(e.stake),1),t("div",U,i(e.price==="0"||e.price==null?"":e.price),1),t("div",V,i(e.result==="0"||e.result==null?"":e.result),1),t("div",q,i(e.multiplier==="0"||e.multiplier==null?"":"x"+e.multiplier),1)],2))),128))],512)],512)],64)):(u(),o(p,{key:1},[J,t("div",j,[t("div",K,[(u(!0),o(p,null,m(n.duplicatedGames,(e,a)=>(u(),o("div",{key:"b-"+a,class:g(["game-single row-game_hunt",{current:n.firstEmptyResultId===e.id}])},[t("div",Q,i(a%c.bonusListGames.length+1),1),t("div",X,i(e.name),1),t("div",Y,i(e.stake),1),t("div",null,i(e.result==="0"||e.result==null?"":e.result),1),t("div",null,i(e.multiplier==="0"||e.multiplier==null?"":"x"+e.multiplier),1)],2))),128))],512)],512)],64))])],512))}const et=f(S,[["render",Z]]);export{et as default};
