import{i as d,c as p,b as t,a as s,w as l,k as f,F as R,q as g,o as u,d as a,h as y,v as w,z as j,e as _,f as H,u as L,g as A,J as z}from"./app-58420b30.js";import{_ as W}from"./ActionMessage-7f411918.js";import{_ as J}from"./FormSection-598feba1.js";import{_ as k,a as v}from"./TextInput-dcf381a3.js";import{_ as P}from"./InputLabel-2a6111ac.js";import{_ as V}from"./PrimaryButton-d489fc43.js";import{_ as D}from"./SecondaryButton-7041c252.js";import"./SectionTitle-0f49c137.js";import"./_plugin-vue_export-helper-c27b6911.js";const T={class:"flex gap-2 w-full"},q={key:0,class:"bg-gray-700 shadow rounded-lg p-6 mb-6 w-1/3"},M={class:"flex items-center gap-4"},O={class:"flex-1"},Y={key:1,class:"bg-gray-700 shadow rounded-lg p-6 mb-6 w-1/3"},G={class:"flex items-center gap-4"},K={class:"flex-1"},Q={key:0,class:"col-span-6 sm:col-span-4"},X={class:"mt-2"},Z=["src","alt"],ee={class:"mt-2"},oe={class:"col-span-6 sm:col-span-4"},se={class:"col-span-6 sm:col-span-4"},te={key:0},le={class:"text-sm mt-2"},ae={class:"mt-2 font-medium text-sm text-green-600"},ve={__name:"UpdateProfileInformationForm",props:{user:Object},setup(m){const x=m,r=d({name:x.user.name,email:x.user.email,photo:null}),h=d({discordWebhook:""}),b=d({discordWebhook:""}),S=d(null),c=d(null),i=d(null),F=()=>{const o=new FormData;o.append("name",r.value.name),o.append("email",r.value.email),i.value&&i.value.files[0]&&o.append("photo",i.value.files[0]),g.post("/api/user/profile-picture",o,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{B(),alert("Profile picture updated!"),console.log("Profile updated:",e.data)}).catch(e=>{console.error("Failed to update profile:",e)})},$=()=>{g.post("/api/user-settings/save-discord-webhook",{discordWebhook:h.value.discordWebhook}).then(o=>{alert("Discord webhook saved successfully!"),console.log("Webhook schedule:",o.data)}).catch(o=>{alert("Failed to save the webhook. Please try again."),console.error(o)})},C=()=>{g.post("/api/user-settings/save-discord-webhook/hunt-buy-battle",{discordWebhook:b.value.discordWebhook}).then(o=>{alert("Discord webhook saved successfully!"),console.log("Webhook hunt-buy-battle:",o.data)}).catch(o=>{alert("Failed to save the webhook. Please try again."),console.error(o)})},U=()=>{S.value=!0},N=()=>{i.value.click()},E=()=>{const o=i.value.files[0];if(!o)return;const e=new FileReader;e.onload=n=>{c.value=n.target.result},e.readAsDataURL(o)},I=()=>{z.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{c.value=null,B()}})},B=()=>{var o;(o=i.value)!=null&&o.value&&(i.value.value=null)};return(o,e)=>(u(),p(R,null,[t("div",T,[o.$page.props.user_streamer?(u(),p("div",q,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold text-gray-100 mb-4"},"Discord Webhook - Schedule",-1)),t("div",M,[t("div",O,[s(k,{id:"discordWebhookSchedule",modelValue:h.value.discordWebhook,"onUpdate:modelValue":e[0]||(e[0]=n=>h.value.discordWebhook=n),type:"text",placeholder:"Enter Discord Webhook URL",class:"mt-1 block w-full"},null,8,["modelValue"])]),s(V,{onClick:$},{default:l(()=>e[4]||(e[4]=[a(" Save ")])),_:1})]),s(W,{on:!1,class:"mt-3"},{default:l(()=>e[5]||(e[5]=[a(" Webhook Saved. ")])),_:1}),s(v,{message:h.value.errors,class:"mt-2"},null,8,["message"])])):f("",!0),o.$page.props.user_streamer?(u(),p("div",Y,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold text-gray-100 mb-4"},"Discord Webhook - Hunt / Buy / Battle",-1)),t("div",G,[t("div",K,[s(k,{id:"discordWebhookHuntBuyBattle",modelValue:b.value.discordWebhook,"onUpdate:modelValue":e[1]||(e[1]=n=>b.value.discordWebhook=n),type:"text",placeholder:"Enter Discord Webhook URL",class:"mt-1 block w-full"},null,8,["modelValue"])]),s(V,{onClick:C},{default:l(()=>e[7]||(e[7]=[a(" Save ")])),_:1})]),s(W,{on:!1,class:"mt-3"},{default:l(()=>e[8]||(e[8]=[a(" Webhook Saved. ")])),_:1}),s(v,{message:b.value.errors,class:"mt-2"},null,8,["message"])])):f("",!0)]),s(J,{onSubmitted:F},{title:l(()=>e[10]||(e[10]=[a(" Profile Information ")])),description:l(()=>e[11]||(e[11]=[a(" Update your account's profile information and email address. ")])),form:l(()=>[o.$page.props.jetstream.managesProfilePhotos?(u(),p("div",Q,[t("input",{ref_key:"photoInput",ref:i,type:"file",class:"hidden",onChange:E},null,544),s(P,{for:"photo",value:"Photo"}),y(t("div",X,[t("img",{src:m.user.profile_photo_url,alt:m.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,Z)],512),[[w,!c.value]]),y(t("div",ee,[t("span",{class:"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center",style:j("background-image: url('"+c.value+"');")},null,4)],512),[[w,c.value]]),s(D,{class:"mt-2 mr-2",type:"button",onClick:_(N,["prevent"])},{default:l(()=>e[12]||(e[12]=[a(" Select A New Photo ")])),_:1}),m.user.profile_photo_path?(u(),H(D,{key:0,type:"button",class:"mt-2",onClick:_(I,["prevent"])},{default:l(()=>e[13]||(e[13]=[a(" Remove Photo ")])),_:1})):f("",!0),s(v,{message:r.value.errors,class:"mt-2"},null,8,["message"])])):f("",!0),t("div",oe,[s(P,{for:"name",value:"Name"}),s(k,{id:"name",modelValue:r.value.name,"onUpdate:modelValue":e[2]||(e[2]=n=>r.value.name=n),type:"text",class:"mt-1 block w-full",autocomplete:"name"},null,8,["modelValue"]),s(v,{message:r.value.errors,class:"mt-2"},null,8,["message"])]),t("div",se,[s(P,{for:"email",value:"Email"}),s(k,{id:"email",modelValue:r.value.email,"onUpdate:modelValue":e[3]||(e[3]=n=>r.value.email=n),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),s(v,{message:r.value.errors,class:"mt-2"},null,8,["message"]),o.$page.props.jetstream.hasEmailVerification&&m.user.email_verified_at===null?(u(),p("div",te,[t("p",le,[e[15]||(e[15]=a(" Your email address is unverified. ")),s(L(A),{href:o.route("verification.send"),method:"post",as:"button",class:"underline text-gray-600 hover:text-gray-900",onClick:_(U,["prevent"])},{default:l(()=>e[14]||(e[14]=[a(" Click here to re-send the verification email. ")])),_:1},8,["href"])]),y(t("div",ae," A new verification link has been sent to your email address. ",512),[[w,S.value]])])):f("",!0)])]),actions:l(()=>[s(W,{on:!1,class:"mr-3"},{default:l(()=>e[16]||(e[16]=[a(" Saved. ")])),_:1}),s(V,null,{default:l(()=>e[17]||(e[17]=[a(" Save ")])),_:1})]),_:1})],64))}};export{ve as default};
