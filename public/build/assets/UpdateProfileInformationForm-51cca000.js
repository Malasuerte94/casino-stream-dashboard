import{P as x,d as v,e as _,a as s,b as e,u as o,w as a,n as C,F as B,o as f,g as l,k as b,v as k,O as R,j as g,c as L,f as y,i as A,J as z}from"./app-e527c1e7.js";import{_ as W}from"./ActionMessage-8b2dde13.js";import{_ as J}from"./FormSection-ecec3cad.js";import{_ as p}from"./InputError-8784af0c.js";import{_ as h}from"./InputLabel-767663ea.js";import{_ as U}from"./PrimaryButton-fd9228d7.js";import{_ as $}from"./SecondaryButton-cd33c915.js";import{_ as w}from"./TextInput-0a528a4c.js";import"./SectionTitle-fb3bf258.js";import"./_plugin-vue_export-helper-c27b6911.js";const O={class:"bg-white shadow rounded-lg p-6 mb-6"},T=s("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Discord Webhook",-1),M={class:"flex items-center gap-4"},Y={class:"flex-1"},q={key:0,class:"col-span-6 sm:col-span-4"},G={class:"mt-2"},H=["src","alt"],K={class:"mt-2"},Q={class:"col-span-6 sm:col-span-4"},X={class:"col-span-6 sm:col-span-4"},Z={key:0},ee={class:"text-sm mt-2"},oe={class:"mt-2 font-medium text-sm text-green-600"},ue={__name:"UpdateProfileInformationForm",props:{user:Object},setup(m){const P=m,t=x({_method:"PUT",name:P.user.name,email:P.user.email,photo:null}),i=x({discordWebhook:""}),S=v(null),u=v(null),c=v(null),D=()=>{c.value&&(t.photo=c.value.files[0]),t.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>V()})},F=()=>{i.post("/api/user-settings/save-discord-webhook",{onSuccess:()=>{alert("Discord webhook saved successfully!")},onError:()=>{alert("Failed to save the webhook. Please try again.")}})},I=()=>{S.value=!0},N=()=>{c.value.click()},E=()=>{const r=c.value.files[0];if(!r)return;const n=new FileReader;n.onload=d=>{u.value=d.target.result},n.readAsDataURL(r)},j=()=>{z.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{u.value=null,V()}})},V=()=>{var r;(r=c.value)!=null&&r.value&&(c.value.value=null)};return(r,n)=>(f(),_(B,null,[s("div",null,[s("div",O,[T,s("div",M,[s("div",Y,[e(h,{for:"discordWebhook",value:"Discord Webhook URL"}),e(w,{id:"discordWebhook",modelValue:o(i).discordWebhook,"onUpdate:modelValue":n[0]||(n[0]=d=>o(i).discordWebhook=d),type:"text",placeholder:"Enter Discord Webhook URL",class:"mt-1 block w-full"},null,8,["modelValue"])]),e(U,{onClick:F,class:C({"opacity-25":o(i).processing}),disabled:o(i).processing},{default:a(()=>[l(" Save ")]),_:1},8,["class","disabled"])]),e(W,{on:o(i).recentlySuccessful,class:"mt-3"},{default:a(()=>[l(" Webhook Saved. ")]),_:1},8,["on"]),e(p,{message:o(i).errors.discordWebhook,class:"mt-2"},null,8,["message"])])]),e(J,{onSubmitted:D},{title:a(()=>[l(" Profile Information ")]),description:a(()=>[l(" Update your account's profile information and email address. ")]),form:a(()=>[r.$page.props.jetstream.managesProfilePhotos?(f(),_("div",q,[s("input",{ref_key:"photoInput",ref:c,type:"file",class:"hidden",onChange:E},null,544),e(h,{for:"photo",value:"Photo"}),b(s("div",G,[s("img",{src:m.user.profile_photo_url,alt:m.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,H)],512),[[k,!u.value]]),b(s("div",K,[s("span",{class:"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center",style:R("background-image: url('"+u.value+"');")},null,4)],512),[[k,u.value]]),e($,{class:"mt-2 mr-2",type:"button",onClick:g(N,["prevent"])},{default:a(()=>[l(" Select A New Photo ")]),_:1},8,["onClick"]),m.user.profile_photo_path?(f(),L($,{key:0,type:"button",class:"mt-2",onClick:g(j,["prevent"])},{default:a(()=>[l(" Remove Photo ")]),_:1},8,["onClick"])):y("",!0),e(p,{message:o(t).errors.photo,class:"mt-2"},null,8,["message"])])):y("",!0),s("div",Q,[e(h,{for:"name",value:"Name"}),e(w,{id:"name",modelValue:o(t).name,"onUpdate:modelValue":n[1]||(n[1]=d=>o(t).name=d),type:"text",class:"mt-1 block w-full",autocomplete:"name"},null,8,["modelValue"]),e(p,{message:o(t).errors.name,class:"mt-2"},null,8,["message"])]),s("div",X,[e(h,{for:"email",value:"Email"}),e(w,{id:"email",modelValue:o(t).email,"onUpdate:modelValue":n[2]||(n[2]=d=>o(t).email=d),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),e(p,{message:o(t).errors.email,class:"mt-2"},null,8,["message"]),r.$page.props.jetstream.hasEmailVerification&&m.user.email_verified_at===null?(f(),_("div",Z,[s("p",ee,[l(" Your email address is unverified. "),e(o(A),{href:r.route("verification.send"),method:"post",as:"button",class:"underline text-gray-600 hover:text-gray-900",onClick:g(I,["prevent"])},{default:a(()=>[l(" Click here to re-send the verification email. ")]),_:1},8,["href","onClick"])]),b(s("div",oe," A new verification link has been sent to your email address. ",512),[[k,S.value]])])):y("",!0)])]),actions:a(()=>[e(W,{on:o(t).recentlySuccessful,class:"mr-3"},{default:a(()=>[l(" Saved. ")]),_:1},8,["on"]),e(U,{class:C({"opacity-25":o(t).processing}),disabled:o(t).processing},{default:a(()=>[l(" Save ")]),_:1},8,["class","disabled"])]),_:1})],64))}};export{ue as default};
