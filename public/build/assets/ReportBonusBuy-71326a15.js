import{p,c as i,b as o,a8 as b,t as n,d as h,n as g,k as y,F as m,o as d}from"./app-044fa54a.js";import{C as u}from"./auto-5842a5d9.js";import{_ as f}from"./_plugin-vue_export-helper-c27b6911.js";const v={data(){return{loading:!0,buys:[]}},async mounted(){await this.fetchBuys(),this.buys.length?(this.renderBarChart(),this.renderLineChart()):console.warn("No buys available to display in the charts."),this.loading=!1},methods:{async fetchBuys(){try{const a=await p.get("/api/bonus-buy-all");this.buys=a.data.buys||[]}catch(a){console.error("Error fetching buys:",a)}},renderBarChart(){const a=this.buys.map(r=>this.formatDate(r.created_at)),t=this.buys.map(r=>parseFloat(r.start)),s=this.buys.map(r=>parseFloat(r.result)),e=this.buys.map(r=>parseFloat(r.result)-parseFloat(r.start));new u(document.getElementById("barChartBuy"),{type:"bar",data:{labels:a,datasets:[{label:"Cost",data:t,backgroundColor:"rgb(239,0,0)"},{label:"Câștig",data:s,backgroundColor:"rgb(10,253,0)"},{label:"Profit",data:e,backgroundColor:e.map(r=>r>=0?"rgba(0,255,222,0.6)":"rgba(27,27,27,0.6)")}]},options:{plugins:{legend:{display:!0}},scales:{y:{beginAtZero:!0}}}})},renderLineChart(){const a=this.buys.map(e=>this.formatDate(e.created_at)),t=this.buys.map(e=>parseFloat(e.start)),s=this.buys.map(e=>parseFloat(e.result));new u(document.getElementById("lineChartBuy"),{type:"line",data:{labels:a,datasets:[{label:"Cost (Trend)",data:t,borderColor:"rgb(239,0,0)",borderWidth:2,fill:!1},{label:"Câștig (Trend)",data:s,borderColor:"rgb(10,253,0)",borderWidth:2,fill:!1}]},options:{plugins:{legend:{display:!0}},scales:{y:{beginAtZero:!0}}}})},formatDate(a){const t=new Date(a),s=t.getDate().toString().padStart(2,"0"),e=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear(),l=t.getHours().toString().padStart(2,"0"),c=t.getMinutes().toString().padStart(2,"0");return`${s}-${e}-${r} ${l}:${c}`},calculateTotal(a){return this.buys.reduce((t,s)=>{const e=parseFloat(s[a]);return isNaN(e)?(console.warn(`Invalid ${a} value detected: ${s[a]}`),t):t+e},0)}},computed:{totalStart(){return this.calculateTotal("start")},totalResult(){return this.calculateTotal("result")},totalProfit(){return this.totalResult-this.totalStart},profitClass(){return this.totalProfit>=0?"text-green-500":"text-red-500"},profitLabel(){return`${this.totalProfit>=0?"+":"-"}${Math.abs(this.totalProfit).toFixed(2)} lei`}}},C={key:0,class:"totals p-6 mt-6"};function B(a,t,s,e,r,l){return d(),i(m,null,[t[2]||(t[2]=o("div",{class:"p-6 mt-6 text-center"},[o("h2",{class:"text-lg font-bold"},"BONUS BUYS")],-1)),o("div",null,[t[1]||(t[1]=b('<div class="chart-container"><div class="chart"><canvas id="barChartBuy"></canvas></div></div><div class="chart-container mt-8"><div class="chart"><canvas id="lineChartBuy"></canvas></div></div>',2)),r.loading?y("",!0):(d(),i("div",C,[o("div",null,"Total Start: "+n(l.totalStart)+" lei",1),o("div",null,"Total Câștig: "+n(l.totalResult)+" lei",1),o("div",null,[t[0]||(t[0]=h(" Total Profit: ")),o("span",{class:g(l.profitClass)},n(l.profitLabel),3)])]))])],64)}const D=f(v,[["render",B]]);export{D as default};
