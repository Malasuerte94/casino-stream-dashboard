import{_ as b}from"./_plugin-vue_export-helper-c27b6911.js";import{c as l,b as t,F as g,E as f,t as a,k as x,I as _,o,n as u}from"./app-5ba5a9a5.js";const w={props:{latestBattle:{type:Object,required:!0}},data(){return{isDragging:!1,startX:0,startY:0,offsetX:0,offsetY:0,scale:1}},methods:{getScores(e,s){return e.filter(d=>d.participant_id===s)},startDrag(e){this.isDragging=!0,this.startX=e.clientX-this.offsetX,this.startY=e.clientY-this.offsetY},onDrag(e){this.isDragging&&(this.offsetX=e.clientX-this.startX,this.offsetY=e.clientY-this.startY)},endDrag(){this.isDragging=!1},zoom(e){e.preventDefault();const s=e.deltaY*-.001;this.scale=Math.min(Math.max(this.scale+s,.5),2)},getGameThumbnail(e){return e?`/storage/games/${e}`:""}},computed:{fixedStages(){const e=JSON.parse(JSON.stringify(this.latestBattle.stages));if(e.length>1&&e[0].brackets&&e[0].brackets.length>=2){const s=e[0].brackets[0].winner;if(e[1].brackets&&e[1].brackets.length>0){const d=e[1].brackets[0];if(s&&d.participantA.id!==s.id){const m=d.participantA;d.participantA=d.participantB,d.participantB=m}}}return e},finalWinner(){const e=this.fixedStages;if(e&&e.length){const s=e[e.length-1];if(s.brackets&&s.brackets.length)return s.brackets[0].winner?s.brackets[0].winner.game:null}return null}}},v={class:"flex flex-col items-center gap-8"},y={class:"text-lg font-bold mb-4 text-center"},S={class:"flex justify-center"},B={class:"flex items-center justify-center gap-2 backdrop-blur-xl bg-white/10 shadow-lg shadow-black/40 border border-white/20 p-2 rounded-lg"},D={class:"flex flex-col justify-center items-center"},T={class:"text-sm font-bold"},A=["src"],M={class:"border-r border-white p-1"},Y={class:"border-r border-white p-1"},X={class:"p-1"},C={class:"flex flex-col justify-center items-center"},E={class:"text-sm font-bold"},O=["src"],W={class:"border-r border-white p-1"},F={class:"border-r border-white p-1"},j={class:"p-1"},z={key:0,class:"mt-2 text-center text-green-600 font-bold text-xs"},G={key:0,class:"mt-8 text-center font-bold text-xl text-yellow-500"};function I(e,s,d,m,h,n){return o(),l("div",{class:"relative h-[50vh] overflow-hidden",onMousedown:s[0]||(s[0]=(...i)=>n.startDrag&&n.startDrag(...i)),onMousemove:s[1]||(s[1]=(...i)=>n.onDrag&&n.onDrag(...i)),onMouseup:s[2]||(s[2]=(...i)=>n.endDrag&&n.endDrag(...i)),onMouseleave:s[3]||(s[3]=(...i)=>n.endDrag&&n.endDrag(...i)),onWheel:s[4]||(s[4]=(...i)=>n.zoom&&n.zoom(...i))},[t("div",{class:"transform origin-top-left",style:_({transform:`scale(${h.scale}) translate(${h.offsetX}px, ${h.offsetY}px)`}),ref:"tournamentContainer"},[t("div",v,[(o(!0),l(g,null,f(n.fixedStages,(i,R)=>(o(),l("div",{key:i.id,class:"w-auto"},[t("h3",y,a(i.name),1),t("div",S,[t("div",{style:_({gridTemplateColumns:`repeat(${i.brackets.length}, auto)`}),class:"grid gap-4"},[(o(!0),l(g,null,f(i.brackets,(r,U)=>(o(),l("div",{key:r.id,class:"flex flex-col items-center relative"},[t("div",B,[t("div",{class:u(["text-center relative",{"font-bold text-green-500":r.winner&&r.winner.id===r.participantA.id}])},[t("div",D,[t("div",T,a(r.participantA.game),1),t("div",null,[t("img",{src:n.getGameThumbnail(r.participantA.full_game.image),alt:"GAME THUMB",class:"h-24 rounded-lg"},null,8,A)])]),t("table",{class:u(["w-full mt-2 text-xs bg-white/10 rounded-md overflow-hidden",{"bg-white/80":r.winner&&r.winner.id===r.participantA.id}])},[s[5]||(s[5]=t("thead",null,[t("tr",{class:"bg-white/20"},[t("th",{class:"border-r border-white p-1"},"COST"),t("th",{class:"border-r border-white p-1"},"RESULT"),t("th",{class:"p-1"},"SCORE")])],-1)),t("tbody",null,[(o(!0),l(g,null,f(n.getScores(r.scores,r.participantA.id),(c,p)=>(o(),l("tr",{key:"a-score-"+p},[t("td",M,a(c.cost),1),t("td",Y,a(c.result),1),t("td",X,a(parseFloat(c.score).toFixed(2)),1)]))),128))])],2)],2),s[7]||(s[7]=t("div",{class:"font-bold text-orange-500"},"VS",-1)),t("div",{class:u(["text-center relative",{"font-bold text-green-500":r.winner&&r.winner.id===r.participantB.id}])},[t("div",C,[t("div",E,a(r.participantB.game),1),t("div",null,[t("img",{src:n.getGameThumbnail(r.participantB.full_game.image),alt:"GAME THUMB",class:"h-24 rounded-lg"},null,8,O)])]),t("table",{class:u(["w-full mt-2 text-xs bg-white/10 rounded-md overflow-hidden",{"bg-white/80":r.winner&&r.winner.id===r.participantB.id}])},[s[6]||(s[6]=t("thead",null,[t("tr",{class:"bg-white/20"},[t("th",{class:"border-r border-white p-1"},"COST"),t("th",{class:"border-r border-white p-1"},"RESULT"),t("th",{class:"p-1"},"SCORE")])],-1)),t("tbody",null,[(o(!0),l(g,null,f(n.getScores(r.scores,r.participantB.id),(c,p)=>(o(),l("tr",{key:"b-score-"+p},[t("td",W,a(c.cost),1),t("td",F,a(c.result),1),t("td",j,a(parseFloat(c.score).toFixed(2)),1)]))),128))])],2)],2)]),r.winner?(o(),l("div",z," Winner: "+a(r.winner.game),1)):x("",!0)]))),128))],4)])]))),128)),n.finalWinner?(o(),l("div",G," 🏆 Winner: "+a(n.finalWinner)+" 🏆 ",1)):x("",!0)])],4)],32)}const N=b(w,[["render",I],["__scopeId","data-v-2bb71556"]]);export{N as default};
