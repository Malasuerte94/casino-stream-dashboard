import{i as u,c as m,b as t,a as s,w as a,k as c,F as L,p as g,o as d,d as l,h as y,v as w,I as R,e as _,f as j,u as A,g as H,A as z}from"./app-1a2bea9f.js";import{_ as W}from"./ActionMessage-13c9908e.js";import{_ as T}from"./FormSection-63d81f19.js";import{_ as k,a as v}from"./TextInput-569970a2.js";import{_ as S}from"./InputLabel-5e2e1710.js";import{_ as x}from"./PrimaryButton-f5f3cfee.js";import{_ as C}from"./SecondaryButton-6b8b55aa.js";import"./SectionTitle-10525c6b.js";import"./_plugin-vue_export-helper-c27b6911.js";const J={class:"flex gap-2 w-full"},M={key:0,class:"bg-gray-700 shadow rounded-lg p-6 mb-6 w-1/3"},O={class:"flex items-center gap-4"},Y={class:"flex-1"},q={key:1,class:"bg-gray-700 shadow rounded-lg p-6 mb-6 w-1/3"},G={class:"flex items-center gap-4"},K={class:"flex-1"},Q={key:2,class:"bg-gray-700 shadow rounded-lg p-6 mb-6 w-1/3"},X={class:"flex items-center gap-4"},Z=["href"],ee={key:0,class:"col-span-6 sm:col-span-4"},oe={class:"mt-2"},se=["src","alt"],te={class:"mt-2"},ae={class:"col-span-6 sm:col-span-4"},le={class:"col-span-6 sm:col-span-4"},re={key:0},ie={class:"text-sm mt-2"},ne={class:"mt-2 font-medium text-sm text-green-600"},ke={__name:"UpdateProfileInformationForm",props:{user:Object},setup(p){const V=p,r=u({name:V.user.name,email:V.user.email,photo:null}),h=u({discordWebhook:""}),b=u({discordWebhook:""}),P=u(null),f=u(null),n=u(null),D=()=>{const o=new FormData;o.append("name",r.value.name),o.append("email",r.value.email),n.value&&n.value.files[0]&&o.append("photo",n.value.files[0]),g.post("/api/user/profile-picture",o,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{B(),alert("Profile picture updated!")}).catch(e=>{console.error("Failed to update profile:",e),alert(e.message)})},F=()=>{g.post("/api/user-settings/save-discord-webhook",{discordWebhook:h.value.discordWebhook}).then(o=>{alert("Discord webhook saved successfully!")}).catch(o=>{alert("Failed to save the webhook. Please try again."),console.error(o)})},$=()=>{g.post("/api/user-settings/save-discord-webhook/hunt-buy-battle",{discordWebhook:b.value.discordWebhook}).then(o=>{alert("Discord webhook saved successfully!")}).catch(o=>{alert("Failed to save the webhook. Please try again."),console.error(o)})},U=()=>{P.value=!0},I=()=>{n.value.click()},N=()=>{const o=n.value.files[0];if(!o)return;const e=new FileReader;e.onload=i=>{f.value=i.target.result},e.readAsDataURL(o)},E=()=>{z.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{f.value=null,B()}})},B=()=>{var o;(o=n.value)!=null&&o.value&&(n.value.value=null)};return(o,e)=>(d(),m(L,null,[t("div",J,[o.$page.props.user_streamer?(d(),m("div",M,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold text-gray-100 mb-4"},"Discord Webhook - Schedule",-1)),t("div",O,[t("div",Y,[s(k,{id:"discordWebhookSchedule",modelValue:h.value.discordWebhook,"onUpdate:modelValue":e[0]||(e[0]=i=>h.value.discordWebhook=i),type:"text",placeholder:"Enter Discord Webhook URL",class:"mt-1 block w-full"},null,8,["modelValue"])]),s(x,{onClick:F},{default:a(()=>e[4]||(e[4]=[l(" Save ")])),_:1})]),s(W,{on:!1,class:"mt-3"},{default:a(()=>e[5]||(e[5]=[l(" Webhook Saved. ")])),_:1}),s(v,{message:h.value.errors,class:"mt-2"},null,8,["message"])])):c("",!0),o.$page.props.user_streamer?(d(),m("div",q,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold text-gray-100 mb-4"},"Discord Webhook - Hunt / Buy / Battle",-1)),t("div",G,[t("div",K,[s(k,{id:"discordWebhookHuntBuyBattle",modelValue:b.value.discordWebhook,"onUpdate:modelValue":e[1]||(e[1]=i=>b.value.discordWebhook=i),type:"text",placeholder:"Enter Discord Webhook URL",class:"mt-1 block w-full"},null,8,["modelValue"])]),s(x,{onClick:$},{default:a(()=>e[7]||(e[7]=[l(" Save ")])),_:1})]),s(W,{on:!1,class:"mt-3"},{default:a(()=>e[8]||(e[8]=[l(" Webhook Saved. ")])),_:1}),s(v,{message:b.value.errors,class:"mt-2"},null,8,["message"])])):c("",!0),o.$page.props.user_streamer?(d(),m("div",Q,[e[10]||(e[10]=t("h3",{class:"text-lg font-semibold text-gray-100 mb-4"},"Conectare StreamLabs",-1)),t("div",X,[t("a",{href:o.route("streamer.streamlabs.authorize"),class:"btn-primary"}," Conectare Streamlabs ",8,Z)])])):c("",!0)]),s(T,{onSubmitted:D},{title:a(()=>e[11]||(e[11]=[l(" Profile Information ")])),description:a(()=>e[12]||(e[12]=[l(" Update your account's profile information and email address. ")])),form:a(()=>[o.$page.props.jetstream.managesProfilePhotos?(d(),m("div",ee,[t("input",{ref_key:"photoInput",ref:n,type:"file",class:"hidden",onChange:N},null,544),s(S,{for:"photo",value:"Photo"}),y(t("div",oe,[t("img",{src:p.user.profile_photo_url,alt:p.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,se)],512),[[w,!f.value]]),y(t("div",te,[t("span",{class:"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center",style:R("background-image: url('"+f.value+"');")},null,4)],512),[[w,f.value]]),s(C,{class:"mt-2 mr-2",type:"button",onClick:_(I,["prevent"])},{default:a(()=>e[13]||(e[13]=[l(" Select A New Photo ")])),_:1}),p.user.profile_photo_path?(d(),j(C,{key:0,type:"button",class:"mt-2",onClick:_(E,["prevent"])},{default:a(()=>e[14]||(e[14]=[l(" Remove Photo ")])),_:1})):c("",!0),s(v,{message:r.value.errors,class:"mt-2"},null,8,["message"])])):c("",!0),t("div",ae,[s(S,{for:"name",value:"Name"}),s(k,{disabled:"",id:"name",modelValue:r.value.name,"onUpdate:modelValue":e[2]||(e[2]=i=>r.value.name=i),type:"text",class:"mt-1 block w-full opacity-25",autocomplete:"name"},null,8,["modelValue"]),s(v,{message:r.value.errors,class:"mt-2"},null,8,["message"])]),t("div",le,[s(S,{for:"email",value:"Email"}),s(k,{disabled:"",id:"email",modelValue:r.value.email,"onUpdate:modelValue":e[3]||(e[3]=i=>r.value.email=i),type:"email",class:"mt-1 block w-full opacity-25"},null,8,["modelValue"]),s(v,{message:r.value.errors,class:"mt-2"},null,8,["message"]),o.$page.props.jetstream.hasEmailVerification&&p.user.email_verified_at===null?(d(),m("div",re,[t("p",ie,[e[16]||(e[16]=l(" Your email address is unverified. ")),s(A(H),{href:o.route("verification.send"),method:"post",as:"button",class:"underline text-gray-600 hover:text-gray-900",onClick:_(U,["prevent"])},{default:a(()=>e[15]||(e[15]=[l(" Click here to re-send the verification email. ")])),_:1},8,["href"])]),y(t("div",ne," A new verification link has been sent to your email address. ",512),[[w,P.value]])])):c("",!0)])]),actions:a(()=>[s(W,{on:!1,class:"mr-3"},{default:a(()=>e[17]||(e[17]=[l(" Saved. ")])),_:1}),s(x,null,{default:a(()=>e[18]||(e[18]=[l(" Save ")])),_:1})]),_:1})],64))}};export{ke as default};
