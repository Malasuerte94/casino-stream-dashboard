import{q as m,c as l,b as t,F as f,E as h,k as c,a as w,w as M,T as G,h as g,L as p,a8 as _,t as n,o as r,n as v}from"./app-24ee4374.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";const C={props:{latestHunt:{type:Object,required:!0},listType:{type:String,required:!0},currency:{type:String,required:!1,default:"RON"}},data(){return{highestMulti:0,lowestMulti:0,totalPayout:0,bestGame:"",worstGame:"",existingPrediction:null,notification:null,winners:null,huntResults:null,winnerTitles:{resultWinner:"Cel mai Apropiat Rezultat",biggestMultiplierWinner:"Cel mai Mare Multiplicator",lowestMultiplierWinner:"Cel mai Mic Multiplicator",exactBiggestMultiplierGame:"Cel mai bun joc",exactLowestMultiplierGame:"Cel mai prost joc"},notPredicted:!1}},async mounted(){await this.fetchExistingPrediction(),this.latestHunt.is_open||await this.fetchWinners()},methods:{async fetchExistingPrediction(){try{const i=await m.get(`/api/viewer/get-bh-prediction/${this.latestHunt.id}`);i.data&&i.data.prediction?(this.notPredicted=!1,this.existingPrediction=i.data.prediction,this.highestMulti=i.data.prediction.highestMulti,this.lowestMulti=i.data.prediction.lowestMulti,this.totalPayout=i.data.prediction.totalPayout,this.bestGame=i.data.prediction.bestGame,this.worstGame=i.data.prediction.worstGame):this.latestHunt.is_open||(this.notPredicted=!0)}catch(i){this.$page.props.user.id||(this.notPredicted=!0),console.error("Error fetching existing prediction:",i)}},async submitPredictions(){if(!this.latestHunt.is_open)return;const i={highestMulti:this.highestMulti,lowestMulti:this.lowestMulti,totalPayout:this.totalPayout,bestGame:this.bestGame,worstGame:this.worstGame,bonusId:this.latestHunt.id,listType:this.listType};try{const e=await m.post("/api/viewer/add-bh-prediction",i);this.notification=e.data.message,await this.fetchExistingPrediction(),setTimeout(()=>this.notification=null,3e3)}catch(e){console.error("Error submitting predictions:",e),this.notification="Eroare la trimiterea predic»õiei!",setTimeout(()=>this.notification=null,3e3)}},async fetchWinners(){try{const i=await m.get(`/api/get-bonus-winner/${this.latestHunt.id}`);i.data&&i.data.winners?(this.winners=i.data.winners,this.huntResults=i.data.results):(this.winners=null,this.huntResults=null)}catch{console.error("No winners found.")}},getGameName(i){const e=this.latestHunt.bonus_hunt_games.find(a=>a.id===i);return e?e.game.name:"Necunoscut"},formatCurrency(i){return`${Number(i).toLocaleString()} ${this.currency}`},formatMultiplier(i){return`${Number(i)}x`},formatMultiplierDifference(i,e){const a=e-i;return a>0?`+${a}x`:`${a}x`},formatDifference(i,e){const a=e-i;return a>0?`+${a.toLocaleString()} ${this.currency}`:`${a.toLocaleString()} ${this.currency}`},getDifferenceClass(i,e){return e-i>=0?"text-green-400":"text-red-400"}},watch:{latestHunt(){this.fetchExistingPrediction(),this.fetchWinners()}}},k={key:0,class:"backdrop-blur-xl bg-white/10 shadow-lg shadow-black/40 border border-white/20 p-4 rounded-lg gap-4 flex flex-col text-white relative"},H={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},N=["src"],T={key:1,class:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center text-white text-xs"},W={class:"flex flex-col"},j={class:"text-gray-300 text-xs uppercase"},D={class:"font-semibold text-white"},E={key:0},R={key:1},L={key:2},V={key:1,class:"relative"},S={class:"backdrop-blur-xl bg-white/10 shadow-lg shadow-black/40 border border-white/20 p-4 rounded-lg gap-4 flex flex-col text-white relative"},U={key:0,class:"absolute top-0 left-0 right-0 bg-green-600 text-white p-2 rounded-t-lg text-center"},B={class:"grid grid-cols-2 gap-4"},q={class:"flex flex-col gap-1"},A={class:"flex flex-col gap-1"},z={class:"grid grid-cols-2 gap-4"},F={class:"flex flex-col gap-1"},O=["value"],I={class:"flex flex-col gap-1"},J=["value"],K={class:"grid grid-cols-2 gap-4"},Q={class:"flex flex-col gap-1"},X={class:"flex flex-col justify-end"},Y=["disabled"],Z={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-md flex items-center justify-center rounded-lg p-0"},$={class:"p-1 rounded-lg text-white"},tt={key:0,class:"flex flex-col text-xs"},et={class:"w-full mt-2 border border-gray-700 rounded-lg flex flex-row"},st={class:"flex flex-col"},it={class:"border-b border-gray-700 flex flex-row"},ot={class:"p-2"},lt={class:"border-b border-gray-700 flex flex-row"},rt={class:"p-2"},nt={class:"flex flex-col"},at={class:"border-b border-gray-700 flex flex-row"},dt={class:"p-2"},ut={class:"border-b border-gray-700 flex flex-row"},ct={class:"p-2"},gt={class:"border-b border-gray-700 flex flex-col"},ft={class:"p-2"},mt={key:1,class:"text-sm font-semibold text-left"};function ht(i,e,a,pt,o,d){return r(),l(f,null,[o.winners?(r(),l("div",k,[e[6]||(e[6]=t("div",{class:"text-lg font-semibold text-center mb-2"},"üèÜ C√¢»ôtigƒÉtori üèÜ",-1)),t("div",H,[(r(!0),l(f,null,h(o.winners,(s,u)=>{var b,x,y;return r(),l("div",{key:u,class:"flex items-center gap-3 bg-gray-900/80 p-4 rounded-lg shadow-lg border border-gray-700"},[(b=s==null?void 0:s.user)!=null&&b.profile_photo_path?(r(),l("img",{key:0,src:s.user.profile_photo_path,alt:"User Avatar",class:"w-10 h-10 rounded-full border border-gray-600"},null,8,N)):(r(),l("div",T," üèÖ ")),t("div",W,[t("div",j,n(o.winnerTitles[u]),1),t("div",D,n(((x=s==null?void 0:s.user)==null?void 0:x.yt_name)||((y=s==null?void 0:s.user)==null?void 0:y.name)||"N/A"),1),u==="resultWinner"?(r(),l("div",E,[t("span",null,n(d.formatCurrency(s.estimated)),1),t("span",{class:v(d.getDifferenceClass(s.estimated,o.huntResults.result))}," ("+n(d.formatDifference(s.estimated,o.huntResults.result))+") ",3)])):u==="biggestMultiplierWinner"||u==="lowestMultiplierWinner"?(r(),l("div",R,[t("span",null,n(d.formatMultiplier(s.estimated)),1),t("span",{class:v(d.getDifferenceClass(s.estimated,o.huntResults[u.replace("Winner","")]))}," ("+n(d.formatMultiplierDifference(s.estimated,o.huntResults[u.replace("Winner","")]))+") ",3)])):u==="exactBiggestMultiplierGame"||u==="exactLowestMultiplierGame"?(r(),l("div",L,[t("span",null,n(d.getGameName(s==null?void 0:s.game_id)),1)])):c("",!0)])])}),128))])])):c("",!0),a.latestHunt?(r(),l("div",V,[t("div",S,[w(G,{name:"fade"},{default:M(()=>[o.notification?(r(),l("div",U,n(o.notification),1)):c("",!0)]),_:1}),e[12]||(e[12]=t("div",{class:"font-semibold"},"Predic»õii Hunt",-1)),t("div",B,[t("div",q,[e[7]||(e[7]=t("label",{for:"highestMulti",class:"text-gray-300"},"Cel mai mare multi",-1)),g(t("input",{id:"highestMulti","onUpdate:modelValue":e[0]||(e[0]=s=>o.highestMulti=s),type:"number",class:"bg-gray-900 text-white border border-gray-700 rounded p-2 outline-none focus:ring focus:ring-indigo-500"},null,512),[[p,o.highestMulti,void 0,{number:!0}]])]),t("div",A,[e[8]||(e[8]=t("label",{for:"lowestMulti",class:"text-gray-300"},"Cel mai mic multi",-1)),g(t("input",{id:"lowestMulti","onUpdate:modelValue":e[1]||(e[1]=s=>o.lowestMulti=s),type:"number",class:"bg-gray-900 text-white border border-gray-700 rounded p-2 outline-none focus:ring focus:ring-indigo-500"},null,512),[[p,o.lowestMulti,void 0,{number:!0}]])])]),t("div",z,[t("div",F,[e[9]||(e[9]=t("label",{for:"bestGame",class:"text-gray-300"},"Cel mai bun joc",-1)),g(t("select",{id:"bestGame","onUpdate:modelValue":e[2]||(e[2]=s=>o.bestGame=s),class:"bg-gray-900 text-white border border-gray-700 rounded p-2 outline-none focus:ring focus:ring-green-500"},[(r(!0),l(f,null,h(a.latestHunt.bonus_hunt_games,s=>(r(),l("option",{key:s.id,value:s.id},n(s.game.name),9,O))),128))],512),[[_,o.bestGame]])]),t("div",I,[e[10]||(e[10]=t("label",{for:"worstGame",class:"text-gray-300"},"Cel mai prost joc",-1)),g(t("select",{id:"worstGame","onUpdate:modelValue":e[3]||(e[3]=s=>o.worstGame=s),class:"bg-gray-900 text-white border border-gray-700 rounded p-2 outline-none focus:ring focus:ring-red-500"},[(r(!0),l(f,null,h(a.latestHunt.bonus_hunt_games,s=>(r(),l("option",{key:s.id,value:s.id},n(s.game.name),9,J))),128))],512),[[_,o.worstGame]])])]),t("div",K,[t("div",Q,[e[11]||(e[11]=t("label",{for:"totalPayout",class:"text-gray-300"},"C√¢t plƒÉte»ôte lista",-1)),g(t("input",{id:"totalPayout","onUpdate:modelValue":e[4]||(e[4]=s=>o.totalPayout=s),type:"number",class:"bg-gray-900 text-white border border-gray-700 rounded p-2 outline-none focus:ring focus:ring-indigo-500"},null,512),[[p,o.totalPayout,void 0,{number:!0}]])]),t("div",X,[t("button",{onClick:e[5]||(e[5]=(...s)=>d.submitPredictions&&d.submitPredictions(...s)),class:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300",disabled:!a.latestHunt.is_open},n(o.existingPrediction?"Update Predic»õii":"Trimite Predic»õii"),9,Y)])])]),!i.$page.props.user.id||!a.latestHunt.is_open?(r(),l("div",Z,[t("div",$,[o.notPredicted?(r(),l("div",mt,"Nu ai predic»õii pentru acest hunt")):(r(),l("div",tt,[e[18]||(e[18]=t("div",{class:"text-sm font-semibold text-left"},"Predic»õiile tale",-1)),t("div",et,[t("div",st,[t("div",it,[e[13]||(e[13]=t("div",{class:"p-2"},"Cel mai mare multi",-1)),t("div",ot,n(o.highestMulti)+"x",1)]),t("div",lt,[e[14]||(e[14]=t("div",{class:"p-2"},"Cel mai mic multi",-1)),t("div",rt,n(o.lowestMulti)+"x",1)])]),t("div",nt,[t("div",at,[e[15]||(e[15]=t("div",{class:"p-2"},"Cel mai bun joc",-1)),t("div",dt,n(d.getGameName(o.bestGame)),1)]),t("div",ut,[e[16]||(e[16]=t("div",{class:"p-2"},"Cel mai prost joc",-1)),t("div",ct,n(d.getGameName(o.worstGame)),1)])]),t("div",gt,[e[17]||(e[17]=t("div",{class:"p-2"},"C√¢t plƒÉte»ôte lista",-1)),t("div",ft,n(o.totalPayout)+" "+n(a.currency),1)])])]))])])):c("",!0)])):c("",!0)],64)}const yt=P(C,[["render",ht]]);export{yt as default};
