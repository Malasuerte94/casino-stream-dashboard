import{D as d,o,e as l,a as t,k as p,E as b,F as u,h as x,t as n,f as m,N as f,g as y,b as w}from"./app-b7944254.js";import{_ as h}from"./_plugin-vue_export-helper-c27b6911.js";const D={props:{stream:Object},data(){return{loading:!0,deposits:[],newDeposit:{amount:0,casino:"",stream_id:null}}},async mounted(){await this.getStreamDeposit(),this.loading=!1},methods:{async getStreamDeposit(){this.newDeposit.stream_id=this.stream.id,await d.get("/api/deposits/"+this.stream.id).then(a=>{this.deposits=a.data.deposits}).catch(a=>{console.log(a)})},async createDeposit(){this.loading=!0;let a=this.newDeposit;await d.post("/api/deposits",{payload:a}).then(()=>{this.getStreamDeposit()}).catch(e=>{console.log(e)}).finally(()=>{this.loading=!1})},formatDateLabels(a){const e=new Date(a),c=e.getDate().toString().padStart(2,"0"),g=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getFullYear();return`${c}-${g}-${r}`}}},S={class:"grid grid-cols-3 gap-2"},v={class:"self-end"},$={key:0,class:"relative overflow-x-auto shadow-md sm:rounded-lg mt-6"},W={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},N={class:"p-2 table-cell text-left"},C={class:"p-2 table-cell text-left"},L={class:"p-2 table-cell text-left"},V={class:"p-2 table-cell text-left"};function z(a,e,c,g,r,i){return o(),l(u,null,[e[6]||(e[6]=t("h2",{class:"text-lg font-bold mb-4"},"Depozit",-1)),t("div",S,[t("div",null,[e[3]||(e[3]=t("label",{for:"deposit",class:"block mb-2 text-sm font-medium text-gray-900"},"Depozit",-1)),p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.newDeposit.amount=s),type:"text",id:"deposit",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Depus în lei"},null,512),[[b,r.newDeposit.amount]])]),t("div",null,[e[4]||(e[4]=t("label",{for:"casino",class:"block mb-2 text-sm font-medium text-gray-900"},"Pe Casino",-1)),p(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>r.newDeposit.casino=s),type:"text",id:"casino",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Nume Casino"},null,512),[[b,r.newDeposit.casino]])]),t("div",v,[t("button",{type:"button",onClick:e[2]||(e[2]=(...s)=>i.createDeposit&&i.createDeposit(...s)),class:"w-full btn-primary"}," Depozitare ")])]),r.loading?m("",!0):(o(),l("div",$,[t("table",W,[e[5]||(e[5]=t("thead",{class:"p-6 text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-400"},[t("tr",{class:"table-row"},[t("th",{class:"p-2 table-cell text-left"},"ID"),t("th",{class:"p-2 table-cell text-left"},"Suma"),t("th",{class:"p-2 table-cell text-left"},"Casino"),t("th",{class:"p-2 table-cell text-left"},"Data")])],-1)),t("tbody",null,[(o(!0),l(u,null,x(r.deposits,s=>(o(),l("tr",{class:"p-2 bg-white border-b dark:bg-gray-900 dark:border-gray-700",key:s.id},[t("td",N,n(s.id),1),t("td",C,n(s.amount),1),t("td",L,n(s.casino),1),t("td",V,n(i.formatDateLabels(s.created_at)),1)]))),128))])])]))],64)}const B=h(D,[["render",z]]),F={props:{stream:Object},data(){return{loading:!0,deposits:[],newWithdrawal:{amount:0,stream_id:null}}},async mounted(){await this.getStreamWithdrawals(),this.loading=!1},methods:{async getStreamWithdrawals(){this.newWithdrawal.stream_id=this.stream.id,await d.get("/api/withdrawals/"+this.stream.id).then(a=>{this.withdrawals=a.data.withdrawals}).catch(a=>{console.log(a)}),this.loading=!1},async createWithdraw(){this.loading=!0;let a=this.newWithdrawal;await d.post("/api/withdrawals",{payload:a}).then(()=>{this.getStreamWithdrawals()}).catch(e=>{console.log(e)})},formatDateLabels(a){const e=new Date(a),c=e.getDate().toString().padStart(2,"0"),g=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getFullYear();return`${c}-${g}-${r}`}}},O={class:"grid grid-cols-2 gap-2"},j={class:"self-end"},E={key:0,class:"relative overflow-x-auto shadow-md sm:rounded-lg mt-6"},M={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},U={class:"p-2 table-cell text-left"},I={class:"p-2 table-cell text-left"},T={class:"p-2 table-cell text-left"};function Y(a,e,c,g,r,i){return o(),l(u,null,[e[4]||(e[4]=t("h2",{class:"text-lg font-bold mb-4"},"Retragere",-1)),t("div",O,[t("div",null,[e[2]||(e[2]=t("label",{for:"deposit",class:"block mb-2 text-sm font-medium text-gray-900"},"Sumă retragere",-1)),p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.newWithdrawal.amount=s),type:"text",id:"deposit",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Depus în lei"},null,512),[[b,r.newWithdrawal.amount]])]),t("div",j,[t("button",{type:"button",onClick:e[1]||(e[1]=(...s)=>i.createWithdraw&&i.createWithdraw(...s)),class:"w-full btn-primary"}," Confirmă ")])]),r.loading?m("",!0):(o(),l("div",E,[t("table",M,[e[3]||(e[3]=t("thead",{class:"p-6 text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-400"},[t("tr",{class:"table-row"},[t("th",{class:"p-2 table-cell text-left"},"ID"),t("th",{class:"p-2 table-cell text-left"},"Suma"),t("th",{class:"p-2 table-cell text-left"},"Data")])],-1)),t("tbody",null,[(o(!0),l(u,null,x(a.withdrawals,s=>(o(),l("tr",{class:"p-2 bg-white border-b dark:bg-gray-900 dark:border-gray-700",key:s.id},[t("td",U,n(s.id),1),t("td",I,n(s.amount),1),t("td",T,n(i.formatDateLabels(s.created_at)),1)]))),128))])])]))],64)}const P=h(F,[["render",Y]]),R={components:{DepositsStream:B,WithdrawalsStream:P},emits:["displayOnly"],data(){return{loading:!0,stream:[],settings:[]}},async mounted(){await this.getLatestStream(),await this.getSettings(),this.loading=!1},methods:{async getLatestStream(){await d.get("/api/stream").then(a=>{this.stream=a.data.stream}).catch(a=>{console.log(a)})},async getSettings(){await d.get("/api/settings").then(a=>{this.settings=a.data.settings}).catch(a=>{console.log(a)}),this.settings.bonus_list&&this.$emit("displayOnly",this.settings.bonus_list)},async createNewStream(){await d.post("/api/stream/new").then(a=>{this.stream=a.data.stream}).catch(a=>{console.log(a)}).finally(()=>{location.reload()}),await this.getLatestStream()},activateDialog(){this.$dialog({message:"Ești sigur că vrei să începi un nou stream, acest lucru va reseta listele si resul optiunilor?",buttons:["da","nu"],da:()=>{this.createNewStream()},nu:()=>{console.log("refuse")}})}}},q={class:"p-6"},A={class:"bg-red-200 p-6 mb-6 rounded border"},G={class:"grid justify-between grid-cols-2 gap-2"},H={key:0,class:"box-secondary w-50 block"},J={key:1,class:"box-secondary rounded border p-6 w-50 block"};function K(a,e,c,g,r,i){const s=f("DepositsStream"),k=f("WithdrawalsStream");return o(),l("div",q,[t("div",A,[t("button",{onClick:e[0]||(e[0]=(..._)=>i.activateDialog&&i.activateDialog(..._)),type:"button",class:"w-full focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800"}," Stream Nou "),e[1]||(e[1]=t("div",{class:"text-sm mt-4 text-red-500"},[y(" Înainte de fiecare stream te rog să apeși butonul de "),t("b",null,"Stream Nou"),y(", introdu suma de pe care o ai depozitată pe casino și poți începe, dacă vrei să faci o retragere introdu și retragerea și confirmă pentru a avea un raport cât mai corect. ")],-1))]),t("div",G,[r.loading?m("",!0):(o(),l("div",H,[w(s,{stream:r.stream},null,8,["stream"])])),r.loading?m("",!0):(o(),l("div",J,[w(k,{stream:r.stream},null,8,["stream"])]))])])}const Z=h(R,[["render",K]]);export{Z as S};
