import{p as g,q as M,c as r,b as e,F as m,E as f,k as c,a as p,w as G,T as P,t as l,h as b,a9 as v,V as C,o as a,n as w}from"./app-cafe65d5.js";import{_ as B}from"./MyInput-1355c245.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";const N={components:{MyInput:B},props:{latestBuy:{type:Object,required:!0},listType:{type:String,required:!0},currency:{type:String,required:!1,default:"RON"}},data(){return{highestMulti:0,lowestMulti:0,totalPayout:0,bestGame:"",worstGame:"",existingPrediction:null,notification:null,winners:null,buyResults:null,winnerTitles:{resultWinner:"Cel mai Apropiat Rezultat",biggestMultiplierWinner:"Cel mai Mare Multiplicator",lowestMultiplierWinner:"Cel mai Mic Multiplicator",exactBiggestMultiplierGame:"Cel mai bun joc",exactLowestMultiplierGame:"Cel mai prost joc"},notPredicted:!1}},async mounted(){await this.fetchExistingPrediction(),this.latestBuy.is_open||await this.fetchWinners()},methods:{async fetchExistingPrediction(){try{const i=await g.get(`/api/viewer/get-bbl-predictions/${this.latestBuy.id}`);i.data&&i.data.prediction?(this.notPredicted=!1,this.existingPrediction=i.data.prediction,this.highestMulti=i.data.prediction.highestMulti,this.lowestMulti=i.data.prediction.lowestMulti,this.totalPayout=i.data.prediction.totalPayout,this.bestGame=i.data.prediction.bestGame,this.worstGame=i.data.prediction.worstGame):this.latestBuy.is_open||(this.notPredicted=!0)}catch(i){this.$page.props.user.id||(this.notPredicted=!0),console.error("Error fetching existing prediction:",i)}},async submitPredictions(){if(!this.latestBuy.is_open)return;const i={highestMulti:this.highestMulti,lowestMulti:this.lowestMulti,totalPayout:this.totalPayout,bestGame:this.bestGame,worstGame:this.worstGame,bonusId:this.latestBuy.id,listType:this.listType};try{const t=await g.post("/api/viewer/add-bh-prediction",i);this.notification=t.data.message,await this.fetchExistingPrediction(),setTimeout(()=>this.notification=null,3e3)}catch(t){console.error("Error submitting predictions:",t),this.notification="Eroare la trimiterea predic»õiei!",setTimeout(()=>this.notification=null,3e3)}},async fetchWinners(){try{const i=await g.get(`/api/get-bonus-winner/${this.latestBuy.id}`);i.data&&i.data.winners?(this.winners=i.data.winners,this.buyResults=i.data.results):(this.winners=null,this.buyResults=null)}catch{console.error("No winners found.")}},getGameName(i){const t=this.latestBuy.bonus_buy_games.find(n=>n.id===i);return t?t.game.name:"Necunoscut"},formatCurrency(i){return`${Number(i).toLocaleString()} ${this.currency}`},formatMultiplier(i){return`${Number(i)}x`},formatMultiplierDifference(i,t){const n=t-i;return n>0?`+${n}x`:`${n}x`},formatDifference(i,t){const n=t-i;return n>0?`+${n.toLocaleString()} ${this.currency}`:`${n.toLocaleString()} ${this.currency}`},getDifferenceClass(i,t){return t-i>=0?"text-green-400":"text-red-400"}},watch:{latestBuy(){this.fetchExistingPrediction(),this.fetchWinners()}}},V={key:0,class:"backdrop-blur-xl bg-white/10 shadow-lg shadow-black/40 border border-white/20 p-4 rounded-lg gap-4 flex flex-col text-white relative"},T={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},W=["src"],j={key:1,class:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center text-white text-xs"},D={class:"flex flex-col"},E={class:"text-gray-300 text-xs uppercase"},R={class:"font-semibold text-white"},L={key:0},S={key:1},U={key:2},q={key:1,class:"relative"},I={class:"backdrop-blur-xl bg-white/10 shadow-lg shadow-black/40 border border-white/20 p-4 rounded-lg gap-4 flex flex-col text-white relative"},A={key:0,class:"absolute top-0 left-0 right-0 bg-green-600 text-white p-2 rounded-t-lg text-center"},z={class:"font-semibold"},F={class:"grid grid-cols-2 gap-4"},O={class:"grid grid-cols-2 gap-4"},H={class:"flex flex-col gap-1"},J=["value"],K={class:"flex flex-col gap-1"},Q=["value"],X={class:"grid grid-cols-2 gap-4"},Y={class:"flex flex-col gap-1"},Z={class:"flex flex-col justify-end"},$=["disabled"],ee={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-md flex items-center justify-center rounded-lg p-0"},te={class:"p-1 rounded-lg text-white"},se={key:0,class:"flex flex-col text-xs"},ie={class:"w-full mt-2 border border-gray-700 rounded-lg flex flex-row"},oe={class:"flex flex-col"},le={class:"border-b border-gray-700 flex flex-row"},re={class:"p-2"},ae={class:"border-b border-gray-700 flex flex-row"},ne={class:"p-2"},de={class:"flex flex-col"},ue={class:"border-b border-gray-700 flex flex-row"},ce={class:"p-2"},me={class:"border-b border-gray-700 flex flex-row"},ge={class:"p-2"},fe={class:"border-b border-gray-700 flex flex-col"},pe={class:"p-2"},be={key:1,class:"text-sm font-semibold text-left"};function he(i,t,n,ye,o,d){const h=M("MyInput");return a(),r(m,null,[o.winners?(a(),r("div",V,[t[6]||(t[6]=e("div",{class:"text-lg font-semibold text-center mb-2"},"üèÜ C√¢»ôtigƒÉtori üèÜ",-1)),e("div",T,[(a(!0),r(m,null,f(o.winners,(s,u)=>{var y,x,_;return a(),r("div",{key:u,class:"flex items-center gap-3 bg-gray-900/80 p-4 rounded-lg shadow-lg border border-gray-700"},[(y=s==null?void 0:s.user)!=null&&y.profile_photo_path?(a(),r("img",{key:0,src:s.user.profile_photo_path,alt:"User Avatar",class:"w-10 h-10 rounded-full border border-gray-600"},null,8,W)):(a(),r("div",j," üèÖ ")),e("div",D,[e("div",E,l(o.winnerTitles[u]),1),e("div",R,l(((x=s==null?void 0:s.user)==null?void 0:x.yt_name)||((_=s==null?void 0:s.user)==null?void 0:_.name)||"N/A"),1),u==="resultWinner"?(a(),r("div",L,[e("span",null,l(d.formatCurrency(s.estimated)),1),e("span",{class:w(d.getDifferenceClass(s.estimated,o.buyResults.result))}," ("+l(d.formatDifference(s.estimated,o.buyResults.result))+") ",3)])):u==="biggestMultiplierWinner"||u==="lowestMultiplierWinner"?(a(),r("div",S,[e("span",null,l(d.formatMultiplier(s.estimated)),1),e("span",{class:w(d.getDifferenceClass(s.estimated,o.buyResults[u.replace("Winner","")]))}," ("+l(d.formatMultiplierDifference(s.estimated,o.buyResults[u.replace("Winner","")]))+") ",3)])):u==="exactBiggestMultiplierGame"||u==="exactLowestMultiplierGame"?(a(),r("div",U,[e("span",null,l(d.getGameName(s==null?void 0:s.game_id)),1)])):c("",!0)])])}),128))])])):c("",!0),n.latestBuy?(a(),r("div",q,[e("div",I,[p(P,{name:"fade"},{default:G(()=>[o.notification?(a(),r("div",A,l(o.notification),1)):c("",!0)]),_:1}),e("div",z,l(i.$t("buy_predictions")),1),e("div",F,[p(h,{label:"Cel mai mare multi",modelValue:o.highestMulti,"onUpdate:modelValue":t[0]||(t[0]=s=>o.highestMulti=s),type:"number"},null,8,["modelValue"]),p(h,{label:"Cel mai mic multi",modelValue:o.lowestMulti,"onUpdate:modelValue":t[1]||(t[1]=s=>o.lowestMulti=s),type:"number"},null,8,["modelValue"])]),e("div",O,[e("div",H,[t[7]||(t[7]=e("label",{for:"bestGame",class:"text-gray-300"},"Cel mai bun joc",-1)),b(e("select",{id:"bestGame","onUpdate:modelValue":t[2]||(t[2]=s=>o.bestGame=s),class:"bg-gray-900 text-white border border-gray-700 rounded p-2 outline-none focus:ring focus:ring-green-500"},[(a(!0),r(m,null,f(n.latestBuy.bonus_buy_games,s=>(a(),r("option",{key:s.id,value:s.id},l(s.game.name),9,J))),128))],512),[[v,o.bestGame]])]),e("div",K,[t[8]||(t[8]=e("label",{for:"worstGame",class:"text-gray-300"},"Cel mai prost joc",-1)),b(e("select",{id:"worstGame","onUpdate:modelValue":t[3]||(t[3]=s=>o.worstGame=s),class:"bg-gray-900 text-white border border-gray-700 rounded p-2 outline-none focus:ring focus:ring-red-500"},[(a(!0),r(m,null,f(n.latestBuy.bonus_buy_games,s=>(a(),r("option",{key:s.id,value:s.id},l(s.game.name),9,Q))),128))],512),[[v,o.worstGame]])])]),e("div",X,[e("div",Y,[t[9]||(t[9]=e("label",{for:"totalPayout",class:"text-gray-300"},"C√¢t plƒÉte»ôte lista",-1)),b(e("input",{id:"totalPayout","onUpdate:modelValue":t[4]||(t[4]=s=>o.totalPayout=s),type:"number",class:"bg-gray-900 text-white border border-gray-700 rounded p-2 outline-none focus:ring focus:ring-indigo-500"},null,512),[[C,o.totalPayout,void 0,{number:!0}]])]),e("div",Z,[e("button",{onClick:t[5]||(t[5]=(...s)=>d.submitPredictions&&d.submitPredictions(...s)),class:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300",disabled:!n.latestBuy.is_open},l(o.existingPrediction?"Update Predic»õii":"Trimite Predic»õii"),9,$)])])]),!i.$page.props.user.id||!n.latestBuy.is_open?(a(),r("div",ee,[e("div",te,[o.notPredicted?(a(),r("div",be,l(i.$t("no_prediction_found")),1)):(a(),r("div",se,[t[15]||(t[15]=e("div",{class:"text-sm font-semibold text-left"},"Predic»õiile tale",-1)),e("div",ie,[e("div",oe,[e("div",le,[t[10]||(t[10]=e("div",{class:"p-2"},"Cel mai mare multi",-1)),e("div",re,l(o.highestMulti)+"x",1)]),e("div",ae,[t[11]||(t[11]=e("div",{class:"p-2"},"Cel mai mic multi",-1)),e("div",ne,l(o.lowestMulti)+"x",1)])]),e("div",de,[e("div",ue,[t[12]||(t[12]=e("div",{class:"p-2"},"Cel mai bun joc",-1)),e("div",ce,l(d.getGameName(o.bestGame)),1)]),e("div",me,[t[13]||(t[13]=e("div",{class:"p-2"},"Cel mai prost joc",-1)),e("div",ge,l(d.getGameName(o.worstGame)),1)])]),e("div",fe,[t[14]||(t[14]=e("div",{class:"p-2"},"C√¢t plƒÉte»ôte lista",-1)),e("div",pe,l(o.totalPayout)+" "+l(n.currency),1)])])]))])])):c("",!0)])):c("",!0)],64)}const we=k(N,[["render",he]]);export{we as default};
