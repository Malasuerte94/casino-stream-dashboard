import{S as y}from"./SvgBh-e6bcdd4d.js";import{_ as w}from"./_plugin-vue_export-helper-c27b6911.js";import{N as S,e as i,a as t,b as C,g as b,t as o,n,F as c,h as _,f,o as r}from"./app-7f970d7d.js";const k={components:{SvgBh:y},props:["id"],data(){return{loading:!0,bonusBattleInfo:[],bonusBattleConcurrents:[],bonusBattleStage:[],bonusBattleBracket:[],bonusBattleScores:[],bonusBattleWinner:[],bonusBattleAllConcurrents:[],bonusBattleAllBracketsCurentStage:[],battleWinner:[],avgScore:0,bestScore:0,totalProfit:0,totalCost:0,isUpdating:!1,vsImageUrl:"/storage/assets/images/vs.gif"}},computed:{totalConcurrents(){return this.bonusBattleAllConcurrents.length},totalBalanceScore(){return((this.totalCost+this.totalProfit)/this.totalCost).toFixed(2)}},async mounted(){await this.getActiveBonusBattle(),this.loading=!1,await this.updateTheListFromTimeToTime()},methods:{async getActiveBonusBattle(){await axios.get("/api/bonus-battle-info/"+this.id).then(a=>{this.bonusBattleInfo=a.data.battle,this.bonusBattleConcurrents=a.data.concurrents,this.bonusBattleAllConcurrents=a.data.all_concurrents,this.bonusBattleAllBracketsCurentStage=a.data.stage_brackets,this.bonusBattleStage=a.data.stage,this.bonusBattleBracket=a.data.bracket,this.bonusBattleScores=a.data.current_score,this.bonusBattleWinner=a.data.winner,this.battleWinner=a.data.battle_winner,this.avgScore=a.data.avg_score.toFixed(2),this.bestScore=a.data.best_score.toFixed(2),this.totalProfit=a.data.total_profit,this.totalCost=a.data.total_cost}).catch(a=>{console.log(a)})},async updateTheListFromTimeToTime(){setInterval(async()=>{this.isUpdating||(this.isUpdating=!0,await this.getActiveBonusBattle(),this.isUpdating=!1)},8e3)},getConcurrentScores(a,e){if(!a||!e)return[];const h=[];for(let g=0;g<this.bonusBattleScores.length;g++){const l=this.bonusBattleScores[g];l.bonus_concurrent_id===a&&l.bracket_id===e&&h.push(l)}return h},getGameThumbnail(a){return a?`/storage/games/${a}`:""}}},A={key:0,class:"table",ref:"viewport"},T={class:"table-container"},P={class:"header-list"},N={class:"header-list-title"},W={class:"img-list"},F={class:"bonus-details"},V={class:"list-cost"},U={class:"list-opened"},G={class:"details"},I={class:"header-details"},j={key:0},z={class:"justify-end text-center uppercase text-sm px-3 py-3 stage font-bold"},L={class:"battle flex gap-2 align-middle items-center justify-center relative"},E={class:n("concurrent flex rounded-md text-white ")},R=["src"],D={class:"from-user mt-2"},J={class:"table-auto mb-2 w-full text-sm border-collapse border border-gray-700 rounded-md overflow-hidden"},M={class:"border border-gray-700 px-2 py-1"},O={class:"border border-gray-700 px-2 py-1"},q={class:"vs-symbol flex justify-center items-center text-2xl"},H=["src"],K={key:1,class:"w-full p-4 text-white rounded-lg shadow-lg flex space-x-4"},Q={class:"text-center w-40 flex flex-col justify-center"},X=["src"],Y={class:"flex-grow"},Z={class:"mb-4"},$={class:"text-md"},tt={class:"text-md"},st={class:"bg-gray-800 rounded-md p-2"},et={class:"w-full text-sm text-gray-200"},lt={class:"p-1 text-right"},at={class:"bracket-container py-3 px-3"},ot={class:"shadow-md py-3 px-3"},it={class:"overflow-x-auto"},rt={class:"table-auto w-full text-sm text-gray-200"},nt={class:"border border-black px-1 py-1"},dt={class:"border border-black px-2 py-1"},ut={class:"border border-black px-2 py-1"};function bt(a,e,h,g,l,d){var m;const v=S("SvgBh");return l.loading?f("",!0):(r(),i("div",A,[t("div",T,[t("div",P,[t("div",N,[t("span",W,[C(v)]),e[1]||(e[1]=t("span",null,"Bonus Battle",-1)),t("div",F,[t("div",V,[e[0]||(e[0]=b("Miză ")),t("span",null,o(l.bonusBattleInfo.stake)+" lei",1)]),t("div",U,[t("div",G,[t("span",null,o(d.totalConcurrents)+" Jocuri",1)])])])]),t("div",I,[t("div",null,[e[2]||(e[2]=b("Scor")),t("span",null,"AVG: "+o(l.avgScore),1)]),t("div",null,[t("span",null,"TOP: "+o(l.bestScore),1)]),t("div",null,[e[3]||(e[3]=b("Rezultat")),t("span",{class:n({"text-red-500":l.totalProfit<0,"text-green-500":l.totalProfit>=0})},o(l.totalProfit)+" lei ",3)])])]),(m=l.battleWinner)!=null&&m.id?(r(),i("div",K,[t("div",Q,[l.battleWinner.game.image?(r(),i("img",{key:0,src:d.getGameThumbnail(l.battleWinner.game.image),alt:"Game Thumbnail",class:"w-100 auto mx-auto object-cover rounded-lg mb-4"},null,8,X)):f("",!0)]),t("div",Y,[t("div",Z,[e[7]||(e[7]=t("span",{class:"text-md font-bold mb-2"},"Winner Winner!",-1)),t("p",$,[e[5]||(e[5]=t("span",{class:"font-bold"},"Total Scor:",-1)),b(" "+o(d.totalBalanceScore),1)]),t("p",tt,[e[6]||(e[6]=t("span",{class:"font-bold"},"Pentru User:",-1)),b(" "+o(l.battleWinner.for_user||"N/A"),1)])]),t("div",st,[t("table",et,[e[10]||(e[10]=t("thead",null,[t("tr",null,[t("th",{class:"text-left p-1 border-b border-gray-700"},"Battle Info"),t("th",{class:"text-right p-1 border-b border-gray-700"},"LEI")])],-1)),t("tbody",null,[t("tr",null,[e[8]||(e[8]=t("td",{class:"p-1"},"Battle Cost",-1)),t("td",lt,o(l.totalCost),1)]),t("tr",null,[e[9]||(e[9]=t("td",{class:"p-1"},"Battle Profit",-1)),t("td",{class:n(["p-1 text-right",{"text-green-400":l.totalProfit>0,"text-red-400":l.totalProfit<0}])},o(l.totalProfit),3)])])])])])])):(r(),i("div",j,[t("div",z,[t("span",null,o(l.bonusBattleStage.name),1)]),t("div",L,[(r(!0),i(c,null,_(l.bonusBattleConcurrents,(s,p)=>{var x;return r(),i("div",{key:(s==null?void 0:s.id)||p,class:"w-100 grow flex-col flex gap-2 px-2 max-w-[190px]"},[t("div",E,[t("img",{src:d.getGameThumbnail(s.game.image),alt:"Game Thumbnail",class:"w-100 rounded-lg"},null,8,R)]),t("div",D,o((s==null?void 0:s.for_user)||"N/A"),1),t("table",J,[e[4]||(e[4]=t("thead",null,[t("tr",{class:"bg-black text-white uppercase text-xs"},[t("th",{class:"border border-gray-700 px-2 py-2"},"Cost"),t("th",{class:"border border-gray-700 px-2 py-2"},"Rezultat"),t("th",{class:"border border-gray-700 px-2 py-2"},"Scor")])],-1)),t("tbody",null,[(r(!0),i(c,null,_(d.getConcurrentScores(s==null?void 0:s.id,(x=l.bonusBattleBracket)==null?void 0:x.id),(u,B)=>(r(),i("tr",{key:u.id||B,class:"border-t border-gray-700 bg-gray-700"},[t("td",M,o(u.cost_buy),1),t("td",O,o(u.result_buy),1),t("td",{class:n(["border border-gray-700 px-2 py-1 font-bold",u.score<1?"text-red-500":"text-green-500"])},o(u.score.toFixed(2)),3)]))),128))])])])}),128)),t("div",q,[t("img",{src:this.vsImageUrl,alt:"vs"},null,8,H)])])])),t("div",at,[(r(!0),i(c,null,_(l.bonusBattleAllBracketsCurentStage,s=>(r(),i("div",{key:s.id,class:"bracket-item"},[t("div",{class:n(["participant",{loser:s.winner!==s.participant_a&&s.winner!=="N/A"}])},o(s.participant_a),3),e[11]||(e[11]=t("div",{class:"vs"},"VS",-1)),t("div",{class:n(["participant",{loser:s.winner!==s.participant_b&&s.winner!=="N/A"}])},o(s.participant_b),3)]))),128))]),t("div",ot,[t("div",it,[t("table",rt,[t("tbody",null,[(r(!0),i(c,null,_(l.bonusBattleAllConcurrents,(s,p)=>(r(),i("tr",{key:s==null?void 0:s.id,class:n(p%2===0?"bg-gray-900":"bg-gray-800")},[t("td",nt,o(s!=null&&s.is_eliminated?"❌":"✅"),1),t("td",dt,o((s==null?void 0:s.game.name)||"N/A"),1),t("td",ut,o((s==null?void 0:s.for_user)||"N/A"),1)],2))),128))])])])])])],512))}const ht=w(k,[["render",bt]]);export{ht as default};
