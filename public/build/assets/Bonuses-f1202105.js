import{o as a,c as u,x as V,q as r,s as x,b as n,h as c,E as g,n as m,F as B,a as y,w as _,C as H,G,k as f,t as v,H as C,m as z,R as U,T as L,f as I,d as k}from"./app-f5bc9cf2.js";import{_ as S}from"./AppLayout-7c4b4243.js";import{_ as w}from"./_plugin-vue_export-helper-c27b6911.js";import{C as T,u as E}from"./gameStore-99f06d5b.js";import{S as R}from"./StreamBoard-f2199ab5.js";import"./ResponsiveNavLink-2c8e2221.js";const M={},N={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",width:"1.70666in",height:"1.70666in",version:"1.1",style:{"shape-rendering":"geometricPrecision","text-rendering":"geometricPrecision","image-rendering":"optimizeQuality","fill-rule":"evenodd","clip-rule":"evenodd"},viewBox:"0 0 1707 1707","xmlns:xlink":"http://www.w3.org/1999/xlink"};function F(s,e){return a(),u("svg",N,e[0]||(e[0]=[V('<defs></defs><g id="Layer_x0020_1"><metadata id="CorelCorpID_0Corel-Layer"></metadata><path class="fil0" d="M224 950l863 0c1,0 2,-1 3,-1l0 -449c0,-3 -3,-3 -3,-3l-862 0 -1 453zm130 -97c-5,11 -16,17 -27,17 -22,0 -36,-23 -27,-43l92 -190 -88 0c-40,0 -40,-60 0,-60l136 0c23,0 36,24 27,43l-113 233zm283 0c-5,11 -16,17 -27,17 -21,0 -36,-23 -27,-43l93 -190 -86 0c-39,0 -39,-60 0,-60l133 0c23,0 37,24 27,43l-113 233zm260 17c-22,0 -37,-23 -27,-43l89 -190 -86 0c-39,0 -39,-60 0,-60l134 0c21,0 36,22 27,43l-110 233c-5,11 -16,17 -27,17z"></path><path class="fil1" d="M1087 1010l-863 0c-33,0 -60,-27 -60,-60l0 -450c0,-36 26,-63 60,-63l863 0c34,0 63,28 63,63l0 450c0,33 -29,60 -63,60zm133 145l0 -768c0,-23 -20,-43 -44,-43l-1039 0c-23,0 -43,20 -43,43l0 1162c0,24 20,44 43,44l1039 0c24,0 44,-20 44,-44l0 -394zm-1003 91l880 0c23,0 38,26 24,47l-106 163c-5,9 -15,14 -25,14l-666 0c-10,0 -20,-5 -25,-14l-107 -163c-13,-21 2,-47 25,-47z"></path><polygon class="fil0" points="1041,1306 272,1306 340,1410 974,1410 "></polygon><polygon class="fil1" points="347,284 967,284 877,181 437,181 "></polygon><polygon class="fil0" points="1280,770 1280,1125 1351,1125 1351,1021 1351,770 "></polygon><path class="fil1" d="M1411 910l0 73 99 0c91,0 169,-76 169,-166l0 -447c0,-48 -73,-48 -73,0l0 447c0,50 -44,93 -96,93l-99 0z"></path><path class="fil2" d="M1476 1010l-99 0 0 112c0,16 -13,30 -30,30l-101 0 0 364c0,57 -46,103 -103,103l-1039 0c-57,0 -103,-46 -103,-103l0 -1162c0,-57 46,-104 103,-104l130 0 134 -152c5,-7 14,-11 22,-11l467 0c8,0 17,4 22,11l134 152 130 0c57,0 103,47 103,104l0 323 101 0c17,0 30,13 30,30l0 110 99 0c21,0 37,-18 37,-34l0 -446c0,-53 43,-97 96,-97 54,0 97,44 97,97l0 446c0,125 -105,227 -230,227zm-290 112l0 -768c0,-24 -20,-44 -43,-44l-1039 0c-23,0 -43,20 -43,44l0 1162c0,23 20,43 43,43l1039 0c23,0 43,-20 43,-43l0 -394zm-873 -872l621 0 -91 -103 -439 0 -91 103zm644 1186l-667 0c-10,0 -19,-5 -25,-13l-106 -164c-13,-20 1,-46 25,-46l879 0c24,0 38,26 25,46l-106 164c-6,8 -15,13 -25,13zm-650 -60l634 0 67 -103 -769 0 68 103zm746 -399l-862 0c-33,0 -60,-27 -60,-60l0 -450c0,-36 25,-63 60,-63l862 0c35,0 63,28 63,63l0 450c0,32 -29,60 -63,60zm-862 -513l0 453 862 0c1,0 3,-1 4,-2l0 -448c0,-3 -4,-3 -4,-3l-862 0zm103 373c-22,0 -37,-24 -27,-43l92 -190 -89 0c-39,0 -39,-60 0,-60l137 0c23,0 36,23 27,43l-113 233c-6,10 -16,17 -27,17zm283 0c-22,0 -37,-24 -27,-43l92 -190 -85 0c-40,0 -40,-60 0,-60l133 0c23,0 36,23 27,43l-113 233c-5,10 -16,17 -27,17zm286 0c-21,0 -36,-23 -27,-43l90 -191 -86 0c-40,0 -40,-60 0,-60l133 0c22,0 37,23 27,43l-110 233c-5,11 -15,18 -27,18zm454 151l0 -251 -71 0 0 355 71 0 0 -104zm60 -111l0 73 99 0c92,0 170,-76 170,-167l0 -446c0,-48 -73,-48 -73,0l0 446c0,51 -45,94 -97,94l-99 0z"></path></g>',2)]))}const A=w(M,[["render",F]]),O={components:{vSelect:T},data(){return{bonusBuy:{},bonusBuyGames:[],fieldUpdateTimeouts:{},debounceTimer:null,loading:!1}},computed:{gameOptions(){return E().availableGames},isEnded(){return Boolean(this.bonusBuy.ended)}},mounted(){this.getLatestList()},methods:{debounceUpdateBonusBuy(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>this.updateBonusBuy(),1e3)},debounceFieldUpdate(s,e){(e==="result"||e==="price")&&this.calcCurentRowMultiplier(s),this.fieldUpdateTimeouts[s.id]||(this.fieldUpdateTimeouts[s.id]={}),this.fieldUpdateTimeouts[s.id][e]&&clearTimeout(this.fieldUpdateTimeouts[s.id][e]),this.fieldUpdateTimeouts[s.id][e]=setTimeout(()=>{this.updateBonusBuyGames()},1e3)},getGameThumbnail(s){const e=this.gameOptions.find(b=>b.id===s),p=e?`/storage/games/${e.image}`:"";return console.log("Thumbnail URL:",p),p},async getLatestList(){try{const s=await r.get("/api/bonus-buy");this.bonusBuy=s.data.bonusBuy,this.bonusBuyGames=s.data.bonusBuyGames}catch(s){console.error(s)}},async updateBonusBuy(){try{await r.patch("/api/bonus-buy",{bonusBuy:this.bonusBuy}),await this.getLatestList()}catch(s){console.error(s)}},async updateBonusBuyGames(){try{this.loading=!0,await r.put("/api/bonus-buy-games",{games:this.bonusBuyGames})}catch(s){console.error(s)}finally{await this.getLatestList(),this.loading=!1}},async createNewBonusBuyGameRow(){try{await r.post("/api/bonus-buy-games",{bonusBuyId:this.bonusBuy.id}),await this.getLatestList()}catch(s){console.error(s)}},async removeBonusBuyGameRow(s){try{await r.delete(`/api/bonus-buy-games/${s}`),await this.getLatestList()}catch(e){console.error(e)}},wantToReset(){this.$dialog({message:"Ești sigur că vrei să faci o listă nouă?",buttons:["da","nu"],da:this.resetBonusBuy,nu:()=>console.log("Canceled reset")})},async resetBonusBuy(){try{await r.post("/api/close-bonus-list",{close:!0,list_id:this.bonusBuy.id,type:"buy"}),await r.post("/api/bonus-buy"),await this.getLatestList(),this.$emit("newlist")}catch(s){console.error(s)}},calcCurentRowMultiplier(s){if(!s.price||!s.result||s.result<0)return;const e=Math.round(s.result/s.price*100)/100;s.multiplier=e}}},D={class:"p-6 rounded-lg shadow-lg bg-gray-800"},P={class:"space-y-6 mb-6"},j={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},K=["disabled"],J={class:"text-center text-gray-200 font-medium"},q=["src"],Q={key:1},W=["disabled","onUpdate:modelValue","onInput"],X=["disabled","onUpdate:modelValue","onInput"],Y=["disabled","onUpdate:modelValue","onInput"],Z=["onUpdate:modelValue"],$=["onClick"],ee={key:1,class:"flex justify-center mt-8"};function te(s,e,p,b,l,t){const h=x("v-select");return a(),u("div",D,[n("div",P,[n("div",j,[c(n("input",{disabled:t.isEnded,class:m([{"input-disabled":t.isEnded},"input-primary"]),type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>l.bonusBuy.name=i),onInput:e[1]||(e[1]=(...i)=>t.debounceUpdateBonusBuy&&t.debounceUpdateBonusBuy(...i)),placeholder:"Nume Lista"},null,42,K),[[g,l.bonusBuy.name]]),c(n("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=i=>l.bonusBuy.start=i),disabled:"",readonly:"",class:"input-disabled",placeholder:"Cost (LEI)"},null,512),[[g,l.bonusBuy.start]]),c(n("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=i=>l.bonusBuy.result=i),disabled:"",readonly:"",class:"input-disabled",placeholder:"Rezultat (LEI)"},null,512),[[g,l.bonusBuy.result]]),n("button",{onClick:e[4]||(e[4]=(...i)=>t.wantToReset&&t.wantToReset(...i)),class:"btn-primary w-full md:w-auto"}," LISTA NOUA ")])]),l.bonusBuyGames.length>0?(a(),u(B,{key:0},[e[7]||(e[7]=n("div",{class:"hidden md:grid grid-cols-[10px_50px_1fr_120px_120px_120px_120px_50px] gap-4 text-sm font-semibold text-gray-300 mb-2"},[n("span",null,"#"),n("span"),n("span",null,"Joc"),n("span",null,"Miză"),n("span",null,"Preț (LEI)"),n("span",null,"Rezultat (LEI)"),n("span",null,"Multiplicator"),n("span")],-1)),y(C,{name:"fade"},{default:_(()=>[(a(!0),u(B,null,H(l.bonusBuyGames,(i,d)=>(a(),u("div",{key:i.id||d,class:m(["relative overflow-hidden rounded-lg shadow mb-4 game-row",{"bg-gray-700":!i.game_id}])},[i.game_id?(a(),u("div",{key:0,class:"bg-blur",style:G({backgroundImage:"url("+t.getGameThumbnail(i.game_id)+")"})},null,4)):f("",!0),n("div",{class:m(["relative z-10 grid grid-cols-1 md:grid-cols-[10px_50px_1fr_120px_120px_120px_120px_50px] gap-4 items-center p-4",i.game_id?"bg-transparent":"bg-white dark:bg-gray-700"])},[n("div",J,v(d+1),1),i.game_id?(a(),u("img",{key:0,src:t.getGameThumbnail(i.game_id),alt:"Game Thumbnail",class:"w-20 h-20 object-cover rounded-lg"},null,8,q)):(a(),u("span",Q)),y(h,{disabled:t.isEnded||l.loading,options:t.gameOptions,label:"name",reduce:o=>o.id,"append-to-body":"","onUpdate:modelValue":[o=>t.debounceFieldUpdate(i,"game_id"),o=>i.game_id=o],modelValue:i.game_id},null,8,["disabled","options","reduce","onUpdate:modelValue","modelValue"]),c(n("input",{disabled:t.isEnded||l.loading,class:m([{"input-disabled":t.isEnded||l.loading},"input-primary text-center"]),type:"number","onUpdate:modelValue":o=>i.stake=o,onInput:o=>t.debounceFieldUpdate(i,"stake"),min:"1",placeholder:"Miză"},null,42,W),[[g,i.stake]]),c(n("input",{disabled:t.isEnded||l.loading,class:m([{"input-disabled":t.isEnded||l.loading},"input-primary text-center"]),type:"number","onUpdate:modelValue":o=>i.price=o,onInput:o=>t.debounceFieldUpdate(i,"price"),min:"0",placeholder:"Preț (LEI)"},null,42,X),[[g,i.price]]),c(n("input",{disabled:t.isEnded,class:m([{"input-disabled":t.isEnded},"input-primary text-center"]),type:"number","onUpdate:modelValue":o=>i.result=o,onInput:o=>t.debounceFieldUpdate(i,"result"),step:"0.1",placeholder:"Rezultat (LEI)"},null,42,Y),[[g,i.result]]),c(n("input",{type:"number","onUpdate:modelValue":o=>i.multiplier=o,disabled:"",class:"input-disabled text-center",placeholder:"Multiplicator"},null,8,Z),[[g,i.multiplier]]),t.isEnded?f("",!0):(a(),u("button",{key:2,onClick:o=>t.removeBonusBuyGameRow(i.id),class:"btn-danger"},e[6]||(e[6]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[n("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]),8,$))],2)],2))),128))]),_:1})],64)):f("",!0),t.isEnded?f("",!0):(a(),u("div",ee,[n("button",{onClick:e[5]||(e[5]=(...i)=>t.createNewBonusBuyGameRow&&t.createNewBonusBuyGameRow(...i)),class:"btn-primary w-full max-w-md"}," + Game ")]))])}const se=w(O,[["render",te]]),ne={components:{vSelect:T},data(){return{bonusHunt:{},bonusHuntGames:[],fieldUpdateTimeouts:{},debounceTimer:null,loading:!1}},computed:{gameOptions(){return E().availableGames},isEnded(){return Boolean(this.bonusHunt.ended)}},mounted(){this.getLatestList()},methods:{validateBonusHuntStart(){return!this.bonusHunt.start||this.bonusHunt.start<=0?(alert("Vă rugăm să introduceți costul listei (Costul Hunt-ului)."),!1):!0},debounceUpdateBonusHunt(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.updateBonusHunt()},1e3)},debounceFieldUpdate(s,e){(e==="stake"||e==="result")&&this.calcCurentRowMultiplier(s),this.fieldUpdateTimeouts[s.id]||(this.fieldUpdateTimeouts[s.id]={}),this.fieldUpdateTimeouts[s.id][e]&&clearTimeout(this.fieldUpdateTimeouts[s.id][e]),this.fieldUpdateTimeouts[s.id][e]=setTimeout(()=>{this.updateBonusHuntGame()},1e3)},getGameThumbnail(s){const e=this.gameOptions.find(p=>p.id===s);return e?`/storage/games/${e.image}`:""},async getLatestList(){try{const s=await r.get("/api/bonus-hunt");this.bonusHunt=s.data.bonusHunt,this.bonusHuntGames=s.data.bonusHuntGames}catch(s){console.error(s)}},async updateBonusHunt(){let s=this.bonusHunt;this.loading=!0,await r.patch("/api/bonus-hunt",{bonusHunt:s}).catch(e=>{console.log(e)}).finally(async()=>{await this.getLatestList(),this.loading=!1})},async updateBonusHuntGame(){if(this.validateBonusHuntStart())try{this.loading=!0;let s=this.bonusHuntGames;await r.put("/api/bonus-hunt-games",{games:s})}catch(s){console.error(s)}finally{await this.getLatestList(),this.loading=!1}},async createNewBonusHuntGameRow(){if(this.validateBonusHuntStart())try{await r.post("/api/bonus-hunt-games",{bonusHuntId:this.bonusHunt.id}),await this.getLatestList()}catch(s){console.error(s)}},async removeBonusHuntGameRow(s){try{await r.delete(`/api/bonus-hunt-games/${s}`),await this.getLatestList()}catch(e){console.error(e)}},wantToReset(){this.validateBonusHuntStart()&&this.$dialog({message:"Ești sigur că vrei să faci o listă nouă?",buttons:["da","nu"],da:this.resetBonusHunt,nu:()=>console.log("Canceled reset")})},async resetBonusHunt(){try{await r.post("/api/close-bonus-list",{close:!0,list_id:this.bonusHunt.id,type:"hunt"}),await r.post("/api/bonus-hunt"),await this.getLatestList(),this.$emit("newlist")}catch(s){console.error(s)}},calcCurentRowMultiplier(s){const e=this.bonusHuntGames.findIndex(t=>t.id===s.id);if(e===-1){console.error("Game not found in bonusHuntGames.");return}const p=parseFloat(s.stake),b=parseFloat(s.result);if(!s.game_id||isNaN(p)||isNaN(b)||b<0){console.warn("Invalid game data: Missing or invalid stake or result.");return}const l=b===0?0:Math.round(b/p);this.bonusHuntGames[e]={...s,multiplier:l,result:b,stake:p}}}},ie={class:"p-6 rounded-lg shadow-md bg-gray-100 dark:bg-gray-800"},le={class:"space-y-6 mb-6"},oe={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ae=["disabled"],de=["disabled"],ue={key:0,class:"absolute inset-0 pointer-events-none bg-blur"},re={class:"text-center text-gray-800 dark:text-gray-200 font-medium"},ce=["src"],pe={key:1},me=["disabled","onInput","onUpdate:modelValue"],be=["disabled","onInput","onUpdate:modelValue"],ge=["onUpdate:modelValue"],ye=["onClick"],he={key:0,class:"flex justify-center mt-8"},fe={key:1};function _e(s,e,p,b,l,t){const h=x("v-select");return a(),u("div",ie,[n("div",le,[n("div",oe,[c(n("input",{disabled:t.isEnded,class:m([{"input-disabled":t.isEnded},"input-primary"]),type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>l.bonusHunt.name=i),placeholder:"Nume Lista"},null,10,ae),[[g,l.bonusHunt.name]]),c(n("input",{disabled:t.isEnded,class:m([{"input-disabled":t.isEnded},"input-primary"]),onInput:e[1]||(e[1]=(...i)=>t.debounceUpdateBonusHunt&&t.debounceUpdateBonusHunt(...i)),type:"number","onUpdate:modelValue":e[2]||(e[2]=i=>l.bonusHunt.start=i),placeholder:"Cost (LEI)"},null,42,de),[[g,l.bonusHunt.start]]),c(n("input",{disabled:"",type:"number","onUpdate:modelValue":e[3]||(e[3]=i=>l.bonusHunt.result=i),class:"input-disabled",placeholder:"Rezultat (LEI)"},null,512),[[g,l.bonusHunt.result]]),n("button",{onClick:e[4]||(e[4]=(...i)=>t.wantToReset&&t.wantToReset(...i)),class:"btn-primary w-full md:w-auto"}," LISTA NOUA ")])]),l.bonusHuntGames.length>0&&l.bonusHunt.start>0?(a(),u(B,{key:0},[e[7]||(e[7]=n("div",{class:"hidden md:grid grid-cols-[10px_50px_1fr_120px_120px_120px_50px] gap-4 text-sm font-semibold text-gray-600 dark:text-gray-300 mb-2"},[n("span",null,"#"),n("span"),n("span",null,"Joc"),n("span",null,"Miză"),n("span",null,"Rezultat (LEI)"),n("span",null,"Multiplicator"),n("span")],-1)),y(C,{name:"fade"},{default:_(()=>[(a(!0),u(B,null,H(l.bonusHuntGames,(i,d)=>(a(),u("div",{key:i.id||d,class:"relative mb-4 rounded-lg shadow overflow-hidden game-row",style:G(i.game_id?{"--bg-image":`url(${t.getGameThumbnail(i.game_id)})`}:{})},[i.game_id?(a(),u("div",ue)):f("",!0),n("div",{class:m(["relative z-10 grid grid-cols-1 md:grid-cols-[10px_50px_1fr_120px_120px_120px_50px] gap-4 items-center p-2",i.game_id?"bg-transparent":"bg-white dark:bg-gray-700"])},[n("div",re,v(d+1),1),i.game_id?(a(),u("img",{key:0,src:t.getGameThumbnail(i.game_id),alt:"Game Thumbnail",class:"w-20 h-20 object-cover rounded-lg mb-2"},null,8,ce)):(a(),u("span",pe)),y(h,{disabled:t.isEnded||l.loading,options:t.gameOptions,label:"name",reduce:o=>o.id,"append-to-body":"","onUpdate:modelValue":[o=>t.debounceFieldUpdate(i,"game_id"),o=>i.game_id=o],modelValue:i.game_id},null,8,["disabled","options","reduce","onUpdate:modelValue","modelValue"]),c(n("input",{disabled:t.isEnded||l.loading,class:m([{"input-disabled":t.isEnded||l.loading},"input-primary text-center"]),onInput:o=>t.debounceFieldUpdate(i,"stake"),"onUpdate:modelValue":o=>i.stake=o,min:"1",type:"number",placeholder:"Miză"},null,42,me),[[g,i.stake]]),c(n("input",{disabled:t.isEnded||l.loading,class:m([{"input-disabled":t.isEnded||l.loading},"input-primary text-center"]),onInput:o=>t.debounceFieldUpdate(i,"result"),"onUpdate:modelValue":o=>i.result=o,type:"number",step:"0.1",placeholder:"Rezultat (LEI)"},null,42,be),[[g,i.result]]),c(n("input",{disabled:"","onUpdate:modelValue":o=>i.multiplier=o,type:"number",class:"input-disabled text-center",placeholder:"Multiplicator"},null,8,ge),[[g,i.multiplier]]),t.isEnded?f("",!0):(a(),u("button",{key:2,onClick:o=>t.removeBonusHuntGameRow(i.id),class:"btn-danger"},e[6]||(e[6]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[n("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]),8,ye))],2)],4))),128))]),_:1}),t.isEnded?f("",!0):(a(),u("div",he,[n("button",{onClick:e[5]||(e[5]=(...i)=>t.createNewBonusHuntGameRow&&t.createNewBonusHuntGameRow(...i)),class:"btn-primary w-full max-w-md"}," + Adaugă Joc ")]))],64)):(a(),u("div",fe," Introdu costul listei pentru a adăuga jocuri. "))])}const ve=w(ne,[["render",_e]]),we={components:{ApplicationLogo:A,BonusBuy:se,BonusHunt:ve,StreamBoard:R},data(){return{open_list:!1,settings:[],latestList:"",listCost:0,componentKey:0,listEnded:0}},async mounted(){await this.getSettings(),await this.getUrlGuessList()},methods:{async getSettings(){await r.get("/api/settings").then(s=>{this.settings=s.data.settings}).catch(s=>{console.log(s)}),this.settings.bonus_list&&this.$emit("displayOnly",this.settings.bonus_list)},async updateSettings(){await r.patch("/api/settings",{settings:this.settings}).then(s=>{this.settings=s.data.settings}).catch(s=>{console.log(s)}),await this.getSettings()},async getUrlGuessList(){await r.get("/api/get-latest-list").then(s=>{this.listEnded=s.data.bonusList.ended,this.latestList=s.data["list-id"],this.open_list=s.data.is_open===1,this.listCost=s.data.bonusList.start})},async setStatusGuessList(){await r.post("/api/set-latest-list",{is_open:this.open_list,list_id:this.latestList,type:this.settings.bonus_list}).then(()=>{this.getUrlGuessList()})},async closeBonusList(){await r.post("/api/close-bonus-list",{close:!0,list_id:this.latestList,type:this.settings.bonus_list}).finally(()=>{this.componentKey++})},activateDialog(){if(this.listCost<=0&&this.settings.bonus_list=="hunt"){alert("Vă rugăm să introduceți costul listei (Costul Hunt-ului).");return}this.$dialog({message:"Ești sigur că vrei să închizi lista? Nu mai poți edita după închidere. Câștigătorii vor fi anunțați!",buttons:["da","nu"],da:()=>{this.closeBonusList()},nu:()=>{console.log("refuse")}})}},computed:{guessUrl(){return`${window.location.origin}/streamer/${this.$page.props.user.id}`},isEnded(){return Boolean(this.listEnded)}},watch:{settings(){this.getUrlGuessList()}}},xe={class:"px-6 py-3 flex items-center justify-between bg-gray-800 rounded-md shadow-md transition-all duration-300"},Be={class:"flex items-center space-x-4"},Le={class:"text-sm font-bold py-1 px-3 bg-gray-700 rounded-md border border-gray-600 transition"},Ue={class:"flex items-center space-x-4"},ke={class:"ml-3 text-sm font-medium text-gray-300"},He={for:"toggle",class:"relative inline-flex items-center cursor-pointer"},Ge=["disabled"],Ce={class:"bg-gray-800 rounded-md shadow-md mt-4 transition-all duration-300"},Te={class:"p-6"},Ee={class:"grid grid-cols-2 gap-4"};function Ve(s,e,p,b,l,t){const h=x("BonusBuy"),i=x("BonusHunt");return a(),u("div",null,[n("div",xe,[n("div",Be,[e[11]||(e[11]=n("span",{class:"text-sm text-gray-300"},"LINK pentru View-eri (ghicește suma)",-1)),n("div",Le,v(t.guessUrl),1)]),n("div",Ue,[n("span",ke,v(l.open_list?"Predicții Pornite":"Predicții Oprite"),1),n("label",He,[c(n("input",{type:"checkbox",id:"toggle","onUpdate:modelValue":e[0]||(e[0]=d=>l.open_list=d),onChange:e[1]||(e[1]=(...d)=>t.setStatusGuessList&&t.setStatusGuessList(...d)),class:"sr-only peer"},null,544),[[z,l.open_list]]),e[12]||(e[12]=n("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))]),n("button",{disabled:t.isEnded,class:m([{"opacity-50 cursor-not-allowed":t.isEnded},"bg-red-600 hover:bg-red-700 text-white font-medium rounded-md text-sm px-5 py-2 transition-all duration-300"]),onClick:e[2]||(e[2]=(...d)=>t.activateDialog&&t.activateDialog(...d)),type:"button"}," ÎNCHIDE LISTA / DECLARĂ CÂȘTIGĂTOR ",10,Ge)])]),n("div",Ce,[n("div",Te,[n("div",Ee,[n("div",{class:m(["flex items-center pl-4 p-2 rounded-md bg-gray-700 border border-gray-600 cursor-pointer transition-all duration-300",{"bg-indigo-600":l.settings.bonus_list==="buy"}]),onClick:e[5]||(e[5]=d=>{l.settings.bonus_list="buy",t.updateSettings()})},[c(n("input",{onChange:e[3]||(e[3]=(...d)=>t.updateSettings&&t.updateSettings(...d)),id:"bordered-radio-2",type:"radio",value:"buy","onUpdate:modelValue":e[4]||(e[4]=d=>l.settings.bonus_list=d),name:"bonus-list-display",class:"w-4 h-4 mr-2"},null,544),[[U,l.settings.bonus_list]]),e[13]||(e[13]=n("label",{for:"bordered-radio-2",class:"w-full py-1 text-gray-300"}," Afișează Buy ",-1))],2),n("div",{class:m(["flex items-center pl-4 p-2 rounded-md bg-gray-700 border border-gray-600 cursor-pointer transition-all duration-300",{"bg-indigo-600":l.settings.bonus_list==="hunt"}]),onClick:e[8]||(e[8]=d=>{l.settings.bonus_list="hunt",t.updateSettings()})},[c(n("input",{onChange:e[6]||(e[6]=(...d)=>t.updateSettings&&t.updateSettings(...d)),id:"bordered-radio-1",type:"radio",value:"hunt","onUpdate:modelValue":e[7]||(e[7]=d=>l.settings.bonus_list=d),name:"bonus-list-display",class:"w-4 h-4 mr-2"},null,544),[[U,l.settings.bonus_list]]),e[14]||(e[14]=n("label",{for:"bordered-radio-1",class:"w-full py-1 text-gray-300"}," Afișează Hunt ",-1))],2)])]),y(L,{name:"fade"},{default:_(()=>[l.settings.bonus_list=="buy"?(a(),u("div",{class:"p-6 bg-gray-800 rounded-md border border-gray-700 mt-4 transition-all duration-300",key:l.componentKey},[e[15]||(e[15]=n("h5",{class:"text-lg font-bold text-gray-200 mb-2"},"Bonus Buy - List",-1)),y(h,{onNewlist:e[9]||(e[9]=d=>t.getUrlGuessList())})])):f("",!0)]),_:1}),y(L,{name:"fade"},{default:_(()=>[l.settings.bonus_list=="hunt"?(a(),u("div",{class:"p-6 bg-gray-800 rounded-md border border-gray-700 mt-4 transition-all duration-300",key:l.componentKey},[e[16]||(e[16]=n("h5",{class:"text-lg font-bold text-gray-200 mb-2"},"Bonus Hunt - List",-1)),y(i,{onNewlist:e[10]||(e[10]=d=>t.getUrlGuessList())})])):f("",!0)]),_:1})])])}const ze=w(we,[["render",Ve]]);const Ie={class:"py-4"},Se={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Re={class:"bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},Me={class:"p-6 text-gray-300 flex flex-row gap-4"},Ne={class:"mb-4 text-sm"},Fe={class:"mb-4 text-sm"},Ae={__name:"Bonuses",setup(s){const e=()=>`{readapi.${window.location.origin}/api/verify-yt-code/{user.name}/{1}}`,p=()=>`$(urlfetch ${window.location.origin}/api/verify-yt-code/$(user)/$(1))`,b=l=>{if(navigator.clipboard)navigator.clipboard.writeText(l).then(()=>{alert("Comanda a fost copiată în clipboard")}).catch(t=>{console.error("Failed to copy text: ",t)});else{const t=document.createElement("input");t.value=l,document.body.appendChild(t),t.select();try{document.execCommand("copy"),console.log("Copied to clipboard")}catch(h){console.error("Failed to copy text: ",h)}document.body.removeChild(t)}};return(l,t)=>(a(),I(S,{title:"Bonuses"},{default:_(()=>[n("div",Ie,[n("div",Se,[y(L,{name:"fade"},{default:_(()=>[n("div",Re,[n("div",Me,[n("div",Ne,[t[2]||(t[2]=k(" Comanda pentru useri Streamlabs: !verific ")),n("button",{class:"w-full text-left p-2 bg-green-600 text-gray-900 rounded focus:outline-none hover:bg-green-500 transition",onClick:t[0]||(t[0]=h=>b(e()))},[n("code",null,v(e()),1)])]),n("div",Fe,[t[3]||(t[3]=k(" Comanda pentru useri Nightbot: !verific ")),n("button",{class:"w-full text-left p-2 bg-green-600 text-gray-900 rounded focus:outline-none hover:bg-green-500 transition",onClick:t[1]||(t[1]=h=>b(p()))},[n("code",null,v(p()),1)])])]),y(ze)])]),_:1})])])]),_:1}))}},qe=w(Ae,[["__scopeId","data-v-2a69fb0b"]]);export{qe as default};
