import{q as g,c as o,b as t,a as m,w as u,T as h,o as l,h as w,L as p,F as _,E as f,t as i,k as y}from"./app-663e89a5.js";import{_ as b}from"./_plugin-vue_export-helper-c27b6911.js";const x={props:{stream:Object},data(){return{loading:!0,withdrawals:[],newWithdrawal:{amount:0,stream_id:null}}},async mounted(){await this.getStreamWithdrawals(),this.loading=!1},methods:{async getStreamWithdrawals(){this.newWithdrawal.stream_id=this.stream.id;try{const e=await g.get("/api/withdrawals/"+this.stream.id);this.withdrawals=e.data.withdrawals}catch(e){console.log(e)}this.loading=!1},async createWithdraw(){this.loading=!0;try{await g.post("/api/withdrawals",{payload:this.newWithdrawal}),await this.getStreamWithdrawals()}catch(e){console.log(e)}finally{this.loading=!1}},formatDateLabels(e){const a=new Date(e),n=a.getDate().toString().padStart(2,"0"),c=(a.getMonth()+1).toString().padStart(2,"0"),r=a.getFullYear();return`${n}-${c}-${r}`}}},v={class:"bg-gray-700 p-6 mb-6 rounded-lg border border-gray-700 shadow-lg"},W={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},S={class:"self-end"},D={key:0,class:"relative overflow-x-auto shadow-lg sm:rounded-lg mt-6"},k={class:"w-full text-sm text-left text-gray-300"},C={class:"p-2"},L={class:"p-2"},V={class:"p-2"};function B(e,a,n,c,r,d){return l(),o("div",null,[a[4]||(a[4]=t("h2",{class:"text-lg font-bold mb-4 text-gray-200"},"Retragere",-1)),m(h,{name:"fade"},{default:u(()=>[t("div",v,[t("div",W,[t("div",null,[a[2]||(a[2]=t("label",{for:"withdraw",class:"block mb-2 text-sm font-medium text-gray-300"}," Sumă retragere ",-1)),w(t("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>r.newWithdrawal.amount=s),type:"text",id:"withdraw",class:"input-primary",placeholder:"Retragere în lei"},null,512),[[p,r.newWithdrawal.amount]])]),t("div",S,[t("button",{type:"button",onClick:a[1]||(a[1]=(...s)=>d.createWithdraw&&d.createWithdraw(...s)),class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg text-sm px-5 py-2.5 transition-all duration-200 focus:outline-none"}," Confirmă ")])])])]),_:1}),m(h,{name:"fade"},{default:u(()=>[r.loading?y("",!0):(l(),o("div",D,[t("table",k,[a[3]||(a[3]=t("thead",{class:"text-xs uppercase bg-gray-700 text-gray-400"},[t("tr",null,[t("th",{class:"p-2"},"ID"),t("th",{class:"p-2"},"Suma"),t("th",{class:"p-2"},"Data")])],-1)),t("tbody",null,[(l(!0),o(_,null,f(r.withdrawals,s=>(l(),o("tr",{key:s.id,class:"bg-gray-800 border-b border-gray-700"},[t("td",C,i(s.id),1),t("td",L,i(s.amount),1),t("td",V,i(d.formatDateLabels(s.created_at)),1)]))),128))])])]))]),_:1})])}const T=b(x,[["render",B],["__scopeId","data-v-0527d08d"]]);export{T as default};
