import{P as _,d as k,e as g,a as s,b as e,u as o,w as t,n as y,F as j,o as v,g as l,k as w,v as W,O as A,j as S,c as H,f as P,i as z,J}from"./app-1c001caf.js";import{_ as x}from"./ActionMessage-20f38a7d.js";import{_ as O}from"./FormSection-2f02acf2.js";import{_ as p}from"./InputError-231accf8.js";import{_ as f}from"./InputLabel-41fb6a1e.js";import{_ as V}from"./PrimaryButton-8747b3d8.js";import{_ as B}from"./SecondaryButton-11ece500.js";import{_ as b}from"./TextInput-ec93a6c1.js";import"./SectionTitle-74dba8cb.js";import"./_plugin-vue_export-helper-c27b6911.js";const T={class:"flex gap-2"},M={class:"bg-white shadow rounded-lg p-6 mb-6 w-50"},Y=s("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Discord Webhook - Schedule",-1),q={class:"flex items-center gap-4"},G={class:"flex-1"},K={class:"bg-white shadow rounded-lg p-6 mb-6 w-50"},Q=s("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Discord Webhook - Hunt / Buy / Battle",-1),X={class:"flex items-center gap-4"},Z={class:"flex-1"},ee={key:0,class:"col-span-6 sm:col-span-4"},oe={class:"mt-2"},se=["src","alt"],te={class:"mt-2"},ae={class:"col-span-6 sm:col-span-4"},le={class:"col-span-6 sm:col-span-4"},re={key:0},ie={class:"text-sm mt-2"},ne={class:"mt-2 font-medium text-sm text-green-600"},ke={__name:"UpdateProfileInformationForm",props:{user:Object},setup(m){const C=m,a=_({_method:"PUT",name:C.user.name,email:C.user.email,photo:null}),c=_({discordWebhook:""}),d=_({discordWebhook:""}),D=k(null),h=k(null),u=k(null),F=()=>{u.value&&(a.photo=u.value.files[0]),a.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>U()})},$=()=>{c.post("/api/user-settings/save-discord-webhook",{onSuccess:()=>{alert("Discord webhook saved successfully!")},onError:()=>{alert("Failed to save the webhook. Please try again.")}})},E=()=>{d.post("/api/user-settings/save-discord-webhook/hunt-buy-battle",{onSuccess:()=>{alert("Discord webhook saved successfully!")},onError:()=>{alert("Failed to save the webhook. Please try again.")}})},I=()=>{D.value=!0},N=()=>{u.value.click()},R=()=>{const i=u.value.files[0];if(!i)return;const r=new FileReader;r.onload=n=>{h.value=n.target.result},r.readAsDataURL(i)},L=()=>{J.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{h.value=null,U()}})},U=()=>{var i;(i=u.value)!=null&&i.value&&(u.value.value=null)};return(i,r)=>(v(),g(j,null,[s("div",T,[s("div",M,[Y,s("div",q,[s("div",G,[e(f,{for:"discordWebhook",value:"Discord Webhook URL"}),e(b,{id:"discordWebhook",modelValue:o(c).discordWebhook,"onUpdate:modelValue":r[0]||(r[0]=n=>o(c).discordWebhook=n),type:"text",placeholder:"Enter Discord Webhook URL",class:"mt-1 block w-full"},null,8,["modelValue"])]),e(V,{onClick:$,class:y({"opacity-25":o(c).processing}),disabled:o(c).processing},{default:t(()=>[l(" Save ")]),_:1},8,["class","disabled"])]),e(x,{on:o(c).recentlySuccessful,class:"mt-3"},{default:t(()=>[l(" Webhook Saved. ")]),_:1},8,["on"]),e(p,{message:o(c).errors.discordWebhook,class:"mt-2"},null,8,["message"])]),s("div",K,[Q,s("div",X,[s("div",Z,[e(f,{for:"discordWebhook",value:"Discord Webhook URL"}),e(b,{id:"discordWebhook",modelValue:o(d).discordWebhook,"onUpdate:modelValue":r[1]||(r[1]=n=>o(d).discordWebhook=n),type:"text",placeholder:"Enter Discord Webhook URL",class:"mt-1 block w-full"},null,8,["modelValue"])]),e(V,{onClick:E,class:y({"opacity-25":o(d).processing}),disabled:o(d).processing},{default:t(()=>[l(" Save ")]),_:1},8,["class","disabled"])]),e(x,{on:o(d).recentlySuccessful,class:"mt-3"},{default:t(()=>[l(" Webhook Saved. ")]),_:1},8,["on"]),e(p,{message:o(d).errors.discordWebhook,class:"mt-2"},null,8,["message"])])]),e(O,{onSubmitted:F},{title:t(()=>[l(" Profile Information ")]),description:t(()=>[l(" Update your account's profile information and email address. ")]),form:t(()=>[i.$page.props.jetstream.managesProfilePhotos?(v(),g("div",ee,[s("input",{ref_key:"photoInput",ref:u,type:"file",class:"hidden",onChange:R},null,544),e(f,{for:"photo",value:"Photo"}),w(s("div",oe,[s("img",{src:m.user.profile_photo_url,alt:m.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,se)],512),[[W,!h.value]]),w(s("div",te,[s("span",{class:"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center",style:A("background-image: url('"+h.value+"');")},null,4)],512),[[W,h.value]]),e(B,{class:"mt-2 mr-2",type:"button",onClick:S(N,["prevent"])},{default:t(()=>[l(" Select A New Photo ")]),_:1},8,["onClick"]),m.user.profile_photo_path?(v(),H(B,{key:0,type:"button",class:"mt-2",onClick:S(L,["prevent"])},{default:t(()=>[l(" Remove Photo ")]),_:1},8,["onClick"])):P("",!0),e(p,{message:o(a).errors.photo,class:"mt-2"},null,8,["message"])])):P("",!0),s("div",ae,[e(f,{for:"name",value:"Name"}),e(b,{id:"name",modelValue:o(a).name,"onUpdate:modelValue":r[2]||(r[2]=n=>o(a).name=n),type:"text",class:"mt-1 block w-full",autocomplete:"name"},null,8,["modelValue"]),e(p,{message:o(a).errors.name,class:"mt-2"},null,8,["message"])]),s("div",le,[e(f,{for:"email",value:"Email"}),e(b,{id:"email",modelValue:o(a).email,"onUpdate:modelValue":r[3]||(r[3]=n=>o(a).email=n),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),e(p,{message:o(a).errors.email,class:"mt-2"},null,8,["message"]),i.$page.props.jetstream.hasEmailVerification&&m.user.email_verified_at===null?(v(),g("div",re,[s("p",ie,[l(" Your email address is unverified. "),e(o(z),{href:i.route("verification.send"),method:"post",as:"button",class:"underline text-gray-600 hover:text-gray-900",onClick:S(I,["prevent"])},{default:t(()=>[l(" Click here to re-send the verification email. ")]),_:1},8,["href","onClick"])]),w(s("div",ne," A new verification link has been sent to your email address. ",512),[[W,D.value]])])):P("",!0)])]),actions:t(()=>[e(x,{on:o(a).recentlySuccessful,class:"mr-3"},{default:t(()=>[l(" Saved. ")]),_:1},8,["on"]),e(V,{class:y({"opacity-25":o(a).processing}),disabled:o(a).processing},{default:t(()=>[l(" Save ")]),_:1},8,["class","disabled"])]),_:1})],64))}};export{ke as default};
