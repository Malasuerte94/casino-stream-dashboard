import{p as u,q as h,f as m,w as y,o as l,b as t,a as b,c as n,E as f,t as i,d as g,F as D,n as M,k as c,M as C}from"./app-7ddf209f.js";import{_ as S}from"./AppLayout-63956e31.js";import k from"./CreateScheduleModal-7ab65818.js";import E from"./EditDayModal-e6fac160.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import"./NavLink-4c811bcd.js";import"./RegisterForm-bb20c692.js";import"./AuthenticationCard-0fa07746.js";import"./TextInput-db9f4624.js";import"./InputLabel-271e6ec5.js";import"./PrimaryButton-6d5ceca1.js";const N={components:{CreateScheduleModal:k,EditDayModal:E,AppLayout:S},data(){return{schedules:[],showCreateModal:!1,showEditDayModal:!1,showDiscordModal:!1,selectedDay:null,selectedScheduleId:null}},methods:{fetchSchedules(){u.get("/api/schedule/all").then(o=>{this.schedules=o.data})},isPastDay(o){const e=new Date;return e.setHours(0,0,0,0),new Date(o)<e},formatDate(o){return new Date(o).toLocaleDateString("ro-RO")},formatDayName(o){return["Duminică","Luni","Marți","Miercuri","Joi","Vineri","Sâmbătă"][new Date(o).getDay()]},openCreateScheduleModal(){this.showCreateModal=!0},openEditDayModal(o){this.selectedDay=o,this.showEditDayModal=!0},toggleDayStatus(o){u.patch(`/api/schedule/${o.id}/toggle-status`).then(()=>{o.active=!o.active})},openDiscordModal(o){this.selectedScheduleId=o,this.showDiscordModal=!0},closeDiscordModal(){this.selectedScheduleId=null,this.showDiscordModal=!1},announceToDiscord(){u.post(`/api/schedule/${this.selectedScheduleId}/announce`).then(()=>{this.closeDiscordModal(),alert("Schedule announced to Discord successfully!")})},closeAndRefresh(){this.showCreateModal=!1,this.fetchSchedules()}},mounted(){this.fetchSchedules()}},z={class:"py-4 transition-all duration-300"},B={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},L={class:"bg-gray-800 overflow-hidden shadow-lg rounded-md transition-all duration-300"},j={class:"scheduler p-6"},V={class:"flex justify-between items-center mb-6"},I={class:"schedule-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},T={class:"text-lg font-semibold text-gray-100"},P={class:"text-sm text-gray-400"},R={class:"font-medium text-gray-300"},F={class:"font-medium text-gray-300"},U={class:"mt-4 space-y-2"},q={class:"font-medium"},G={key:0,class:"flex space-x-2"},H=["onClick"],J=["onClick"],O=["onClick"],Y=["onClick"],K={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-50 transition-all duration-300"},Q={class:"bg-gray-900 p-6 rounded-md shadow-lg transition-all duration-300"},W={class:"flex gap-4 justify-end"};function X(o,e,x,Z,r,s){const w=h("CreateScheduleModal"),v=h("EditDayModal"),_=h("AppLayout");return l(),m(_,{title:"Dashboard"},{default:y(()=>[t("div",z,[t("div",B,[t("div",L,[t("div",j,[t("div",V,[e[5]||(e[5]=t("h1",{class:"text-2xl font-bold text-gray-100"},"Schedule Manager",-1)),t("button",{onClick:e[0]||(e[0]=(...a)=>s.openCreateScheduleModal&&s.openCreateScheduleModal(...a)),class:"btn-primary"}," Add New Schedule ")]),t("div",I,[b(C,{name:"fade"},{default:y(()=>[(l(!0),n(D,null,f(r.schedules,a=>(l(),n("div",{key:a.id,class:"schedule-card bg-gray-900 p-4 rounded-md shadow-md border border-gray-700 relative transition-all duration-300"},[t("h2",T," Schedule #"+i(a.id),1),t("p",P,[e[6]||(e[6]=g(" Between ")),t("span",R,i(s.formatDate(a.days[0].date)),1),e[7]||(e[7]=g(" and ")),t("span",F,i(s.formatDate(a.days[a.days.length-1].date)),1)]),t("ul",U,[(l(!0),n(D,null,f(a.days,d=>(l(),n("li",{key:d.id,class:"flex justify-between items-center bg-gray-800 p-2 rounded shadow-sm border border-gray-700 transition-all duration-300"},[t("div",{class:M(["text-sm text-gray-300",{"line-through text-gray-500":!d.active}])},[t("span",q,i(s.formatDayName(d.date)),1),g(": "+i(d.info),1)],2),s.isPastDay(d.date)?c("",!0):(l(),n("div",G,[t("button",{onClick:p=>s.openEditDayModal(d),class:"text-indigo-400 text-sm font-medium hover:underline transition-all duration-300"}," Edit ",8,H),d.active?(l(),n("button",{key:0,onClick:p=>s.toggleDayStatus(d),class:"text-red-500 text-sm font-medium hover:underline transition-all duration-300"}," Cancel ",8,J)):(l(),n("button",{key:1,onClick:p=>s.toggleDayStatus(d),class:"text-green-500 text-sm font-medium hover:underline transition-all duration-300"}," Activate ",8,O))]))]))),128))]),t("button",{onClick:d=>s.openDiscordModal(a.id),class:"absolute h-5 w-5 top-2 right-2 flex items-center justify-center bg-purple-600 hover:bg-purple-500 text-white rounded-full shadow-md transition-all duration-300 focus:outline-none focus:ring focus:ring-purple-300",title:"Announce to Discord"},e[8]||(e[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg","fill-rule":"evenodd","clip-rule":"evenodd",viewBox:"0 0 24 24",width:"12",height:"12",fill:"currentColor",class:"transition-all duration-300"},[t("path",{d:"M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z"})],-1)]),8,Y)]))),128))]),_:1})]),r.showCreateModal?(l(),m(w,{key:0,onClose:e[1]||(e[1]=a=>s.closeAndRefresh())})):c("",!0),r.showEditDayModal?(l(),m(v,{key:1,day:r.selectedDay,onClose:e[2]||(e[2]=a=>r.showEditDayModal=!1),onUpdated:s.fetchSchedules},null,8,["day","onUpdated"])):c("",!0),r.showDiscordModal?(l(),n("div",K,[t("div",Q,[e[9]||(e[9]=t("h3",{class:"text-xl font-bold text-gray-100 mb-4"},"Announce to Discord",-1)),e[10]||(e[10]=t("p",{class:"text-gray-300 mb-4"},"Are you sure you want to announce this schedule to Discord?",-1)),t("div",W,[t("button",{onClick:e[3]||(e[3]=a=>s.announceToDiscord()),class:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-md shadow transition-all duration-300 focus:outline-none focus:ring focus:ring-purple-300"}," Yes "),t("button",{onClick:e[4]||(e[4]=(...a)=>s.closeDiscordModal&&s.closeDiscordModal(...a)),class:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-gray-100 rounded-md shadow transition-all duration-300"}," No ")])])])):c("",!0)])])])])]),_:1})}const ce=A(N,[["render",X]]);export{ce as default};
