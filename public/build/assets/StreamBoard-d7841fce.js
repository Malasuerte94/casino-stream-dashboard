import{D as n,o,e as l,a as t,k as m,E as h,F as u,h as w,t as d,f as p,N as f,b as y,g as _}from"./app-547f1a99.js";import{_ as b}from"./_plugin-vue_export-helper-c27b6911.js";const D={props:{stream:Object},data(){return{loading:!0,deposits:[],newDeposit:{amount:0,casino:"",stream_id:null}}},async mounted(){await this.getStreamDeposit(),this.loading=!1},methods:{async getStreamDeposit(){this.newDeposit.stream_id=this.stream.id,await n.get("/api/deposits/"+this.stream.id).then(e=>{this.deposits=e.data.deposits}).catch(e=>{console.log(e)})},async createDeposit(){this.loading=!0;let e=this.newDeposit;await n.post("/api/deposits",{payload:e}).then(()=>{this.getStreamDeposit()}).catch(a=>{console.log(a)}).finally(()=>{this.loading=!1})},formatDateLabels(e){const a=new Date(e),c=a.getDate().toString().padStart(2,"0"),g=(a.getMonth()+1).toString().padStart(2,"0"),r=a.getFullYear();return`${c}-${g}-${r}`}}},S=t("h2",{class:"text-lg font-bold mb-4"},"Depozit",-1),v={class:"grid grid-cols-3 gap-2"},$=t("label",{for:"deposit",class:"block mb-2 text-sm font-medium text-gray-900"},"Depozit",-1),W=t("label",{for:"casino",class:"block mb-2 text-sm font-medium text-gray-900"},"Pe Casino",-1),N={class:"self-end"},C={key:0,class:"relative overflow-x-auto shadow-md sm:rounded-lg mt-6"},L={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},V=t("thead",{class:"p-6 text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-400"},[t("tr",{class:"table-row"},[t("th",{class:"p-2 table-cell text-left"},"ID"),t("th",{class:"p-2 table-cell text-left"},"Suma"),t("th",{class:"p-2 table-cell text-left"},"Casino"),t("th",{class:"p-2 table-cell text-left"},"Data")])],-1),z={class:"p-2 table-cell text-left"},B={class:"p-2 table-cell text-left"},F={class:"p-2 table-cell text-left"},O={class:"p-2 table-cell text-left"};function j(e,a,c,g,r,i){return o(),l(u,null,[S,t("div",v,[t("div",null,[$,m(t("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>r.newDeposit.amount=s),type:"text",id:"deposit",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Depus în lei"},null,512),[[h,r.newDeposit.amount]])]),t("div",null,[W,m(t("input",{"onUpdate:modelValue":a[1]||(a[1]=s=>r.newDeposit.casino=s),type:"text",id:"casino",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Nume Casino"},null,512),[[h,r.newDeposit.casino]])]),t("div",N,[t("button",{type:"button",onClick:a[2]||(a[2]=(...s)=>i.createDeposit&&i.createDeposit(...s)),class:"w-full btn-primary"}," Depozitare ")])]),r.loading?p("",!0):(o(),l("div",C,[t("table",L,[V,t("tbody",null,[(o(!0),l(u,null,w(r.deposits,s=>(o(),l("tr",{class:"p-2 bg-white border-b dark:bg-gray-900 dark:border-gray-700",key:s.id},[t("td",z,d(s.id),1),t("td",B,d(s.amount),1),t("td",F,d(s.casino),1),t("td",O,d(i.formatDateLabels(s.created_at)),1)]))),128))])])]))],64)}const E=b(D,[["render",j]]),M={props:{stream:Object},data(){return{loading:!0,deposits:[],newWithdrawal:{amount:0,stream_id:null}}},async mounted(){await this.getStreamWithdrawals(),this.loading=!1},methods:{async getStreamWithdrawals(){this.newWithdrawal.stream_id=this.stream.id,await n.get("/api/withdrawals/"+this.stream.id).then(e=>{this.withdrawals=e.data.withdrawals}).catch(e=>{console.log(e)}),this.loading=!1},async createWithdraw(){this.loading=!0;let e=this.newWithdrawal;await n.post("/api/withdrawals",{payload:e}).then(()=>{this.getStreamWithdrawals()}).catch(a=>{console.log(a)})},formatDateLabels(e){const a=new Date(e),c=a.getDate().toString().padStart(2,"0"),g=(a.getMonth()+1).toString().padStart(2,"0"),r=a.getFullYear();return`${c}-${g}-${r}`}}},U=t("h2",{class:"text-lg font-bold mb-4"},"Retragere",-1),I={class:"grid grid-cols-2 gap-2"},T=t("label",{for:"deposit",class:"block mb-2 text-sm font-medium text-gray-900"},"Sumă retragere",-1),Y={class:"self-end"},P={key:0,class:"relative overflow-x-auto shadow-md sm:rounded-lg mt-6"},R={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},q=t("thead",{class:"p-6 text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-400"},[t("tr",{class:"table-row"},[t("th",{class:"p-2 table-cell text-left"},"ID"),t("th",{class:"p-2 table-cell text-left"},"Suma"),t("th",{class:"p-2 table-cell text-left"},"Data")])],-1),A={class:"p-2 table-cell text-left"},G={class:"p-2 table-cell text-left"},H={class:"p-2 table-cell text-left"};function J(e,a,c,g,r,i){return o(),l(u,null,[U,t("div",I,[t("div",null,[T,m(t("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>r.newWithdrawal.amount=s),type:"text",id:"deposit",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Depus în lei"},null,512),[[h,r.newWithdrawal.amount]])]),t("div",Y,[t("button",{type:"button",onClick:a[1]||(a[1]=(...s)=>i.createWithdraw&&i.createWithdraw(...s)),class:"w-full btn-primary"}," Confirmă ")])]),r.loading?p("",!0):(o(),l("div",P,[t("table",R,[q,t("tbody",null,[(o(!0),l(u,null,w(e.withdrawals,s=>(o(),l("tr",{class:"p-2 bg-white border-b dark:bg-gray-900 dark:border-gray-700",key:s.id},[t("td",A,d(s.id),1),t("td",G,d(s.amount),1),t("td",H,d(i.formatDateLabels(s.created_at)),1)]))),128))])])]))],64)}const K=b(M,[["render",J]]),Q={components:{DepositsStream:E,WithdrawalsStream:K},emits:["displayOnly"],data(){return{loading:!0,stream:[],settings:[]}},async mounted(){await this.getLatestStream(),await this.getSettings(),this.loading=!1},methods:{async getLatestStream(){await n.get("/api/stream").then(e=>{this.stream=e.data.stream}).catch(e=>{console.log(e)})},async getSettings(){await n.get("/api/settings").then(e=>{this.settings=e.data.settings}).catch(e=>{console.log(e)}),this.settings.bonus_list&&this.$emit("displayOnly",this.settings.bonus_list)},async updateSettings(){await n.patch("/api/settings",{settings:this.settings}).then(e=>{this.settings=e.data.settings}).catch(e=>{console.log(e)}),await this.getSettings()},async createNewStream(){await n.post("/api/stream/new").then(e=>{this.stream=e.data.stream}).catch(e=>{console.log(e)}).finally(()=>{location.reload()}),await this.getLatestStream()},activateDialog(){this.$dialog({message:"Ești sigur că vrei să începi un nou stream, acest lucru va reseta listele si resul optiunilor?",buttons:["da","nu"],da:()=>{this.createNewStream()},nu:()=>{console.log("refuse")}})}}},X={class:"p-6"},Z={class:"bg-red-200 p-6 mb-6 rounded border"},tt=t("div",{class:"text-sm mt-4 text-red-500"},[_(" Înainte de fiecare stream te rog să apeși butonul de "),t("b",null,"Stream Nou"),_(", introdu suma de pe care o ai depozitată pe casino și poți începe, dacă vrei să faci o retragere introdu și retragerea și confirmă pentru a avea un raport cât mai corect. ")],-1),et={class:"grid justify-between grid-cols-2 gap-2"},at={key:0,class:"box-secondary w-50 block"},st={key:1,class:"box-secondary rounded border p-6 w-50 block"};function rt(e,a,c,g,r,i){const s=f("DepositsStream"),x=f("WithdrawalsStream");return o(),l("div",X,[t("div",Z,[t("button",{onClick:a[0]||(a[0]=(...k)=>i.activateDialog&&i.activateDialog(...k)),type:"button",class:"w-full focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800"}," Stream Nou "),tt]),t("div",et,[r.loading?p("",!0):(o(),l("div",at,[y(s,{stream:r.stream},null,8,["stream"])])),r.loading?p("",!0):(o(),l("div",st,[y(x,{stream:r.stream},null,8,["stream"])]))])])}const it=b(Q,[["render",rt]]);export{it as S};
