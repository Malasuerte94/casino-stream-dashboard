import{P as k,d as g,e as y,a as t,b as o,u as s,w as l,n as _,F as j,o as b,g as r,k as w,v as W,Y as A,j as S,c as H,f as P,i as z,J}from"./app-b7944254.js";import{_ as x}from"./ActionMessage-27934407.js";import{_ as T}from"./FormSection-35f66374.js";import{_ as f}from"./InputError-08c06422.js";import{_ as v}from"./InputLabel-174781c9.js";import{_ as V}from"./PrimaryButton-3db5c83a.js";import{_ as C}from"./SecondaryButton-1d34f5e2.js";import{_ as h}from"./TextInput-2d1dd6a7.js";import"./SectionTitle-5775b4f2.js";import"./_plugin-vue_export-helper-c27b6911.js";const Y={class:"flex gap-2"},M={class:"bg-white shadow rounded-lg p-6 mb-6 w-50"},O={class:"flex items-center gap-4"},q={class:"flex-1"},G={class:"bg-white shadow rounded-lg p-6 mb-6 w-50"},K={class:"flex items-center gap-4"},Q={class:"flex-1"},X={key:0,class:"col-span-6 sm:col-span-4"},Z={class:"mt-2"},ee=["src","alt"],oe={class:"mt-2"},se={class:"col-span-6 sm:col-span-4"},te={class:"col-span-6 sm:col-span-4"},le={key:0},ae={class:"text-sm mt-2"},re={class:"mt-2 font-medium text-sm text-green-600"},he={__name:"UpdateProfileInformationForm",props:{user:Object},setup(c){const D=c,a=k({_method:"PUT",name:D.user.name,email:D.user.email,photo:null}),d=k({discordWebhook:""}),u=k({discordWebhook:""}),U=g(null),p=g(null),m=g(null),F=()=>{m.value&&(a.photo=m.value.files[0]),a.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>B()})},$=()=>{d.post("/api/user-settings/save-discord-webhook",{onSuccess:()=>{alert("Discord webhook saved successfully!")},onError:()=>{alert("Failed to save the webhook. Please try again.")}})},E=()=>{u.post("/api/user-settings/save-discord-webhook/hunt-buy-battle",{onSuccess:()=>{alert("Discord webhook saved successfully!")},onError:()=>{alert("Failed to save the webhook. Please try again.")}})},I=()=>{U.value=!0},N=()=>{m.value.click()},R=()=>{const i=m.value.files[0];if(!i)return;const e=new FileReader;e.onload=n=>{p.value=n.target.result},e.readAsDataURL(i)},L=()=>{J.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{p.value=null,B()}})},B=()=>{var i;(i=m.value)!=null&&i.value&&(m.value.value=null)};return(i,e)=>(b(),y(j,null,[t("div",Y,[t("div",M,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Discord Webhook - Schedule",-1)),t("div",O,[t("div",q,[o(v,{for:"discordWebhook",value:"Discord Webhook URL"}),o(h,{id:"discordWebhook",modelValue:s(d).discordWebhook,"onUpdate:modelValue":e[0]||(e[0]=n=>s(d).discordWebhook=n),type:"text",placeholder:"Enter Discord Webhook URL",class:"mt-1 block w-full"},null,8,["modelValue"])]),o(V,{onClick:$,class:_({"opacity-25":s(d).processing}),disabled:s(d).processing},{default:l(()=>e[4]||(e[4]=[r(" Save ")])),_:1},8,["class","disabled"])]),o(x,{on:s(d).recentlySuccessful,class:"mt-3"},{default:l(()=>e[5]||(e[5]=[r(" Webhook Saved. ")])),_:1},8,["on"]),o(f,{message:s(d).errors.discordWebhook,class:"mt-2"},null,8,["message"])]),t("div",G,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Discord Webhook - Hunt / Buy / Battle",-1)),t("div",K,[t("div",Q,[o(v,{for:"discordWebhook",value:"Discord Webhook URL"}),o(h,{id:"discordWebhook",modelValue:s(u).discordWebhook,"onUpdate:modelValue":e[1]||(e[1]=n=>s(u).discordWebhook=n),type:"text",placeholder:"Enter Discord Webhook URL",class:"mt-1 block w-full"},null,8,["modelValue"])]),o(V,{onClick:E,class:_({"opacity-25":s(u).processing}),disabled:s(u).processing},{default:l(()=>e[7]||(e[7]=[r(" Save ")])),_:1},8,["class","disabled"])]),o(x,{on:s(u).recentlySuccessful,class:"mt-3"},{default:l(()=>e[8]||(e[8]=[r(" Webhook Saved. ")])),_:1},8,["on"]),o(f,{message:s(u).errors.discordWebhook,class:"mt-2"},null,8,["message"])])]),o(T,{onSubmitted:F},{title:l(()=>e[10]||(e[10]=[r(" Profile Information ")])),description:l(()=>e[11]||(e[11]=[r(" Update your account's profile information and email address. ")])),form:l(()=>[i.$page.props.jetstream.managesProfilePhotos?(b(),y("div",X,[t("input",{ref_key:"photoInput",ref:m,type:"file",class:"hidden",onChange:R},null,544),o(v,{for:"photo",value:"Photo"}),w(t("div",Z,[t("img",{src:c.user.profile_photo_url,alt:c.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,ee)],512),[[W,!p.value]]),w(t("div",oe,[t("span",{class:"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center",style:A("background-image: url('"+p.value+"');")},null,4)],512),[[W,p.value]]),o(C,{class:"mt-2 mr-2",type:"button",onClick:S(N,["prevent"])},{default:l(()=>e[12]||(e[12]=[r(" Select A New Photo ")])),_:1}),c.user.profile_photo_path?(b(),H(C,{key:0,type:"button",class:"mt-2",onClick:S(L,["prevent"])},{default:l(()=>e[13]||(e[13]=[r(" Remove Photo ")])),_:1})):P("",!0),o(f,{message:s(a).errors.photo,class:"mt-2"},null,8,["message"])])):P("",!0),t("div",se,[o(v,{for:"name",value:"Name"}),o(h,{id:"name",modelValue:s(a).name,"onUpdate:modelValue":e[2]||(e[2]=n=>s(a).name=n),type:"text",class:"mt-1 block w-full",autocomplete:"name"},null,8,["modelValue"]),o(f,{message:s(a).errors.name,class:"mt-2"},null,8,["message"])]),t("div",te,[o(v,{for:"email",value:"Email"}),o(h,{id:"email",modelValue:s(a).email,"onUpdate:modelValue":e[3]||(e[3]=n=>s(a).email=n),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),o(f,{message:s(a).errors.email,class:"mt-2"},null,8,["message"]),i.$page.props.jetstream.hasEmailVerification&&c.user.email_verified_at===null?(b(),y("div",le,[t("p",ae,[e[15]||(e[15]=r(" Your email address is unverified. ")),o(s(z),{href:i.route("verification.send"),method:"post",as:"button",class:"underline text-gray-600 hover:text-gray-900",onClick:S(I,["prevent"])},{default:l(()=>e[14]||(e[14]=[r(" Click here to re-send the verification email. ")])),_:1},8,["href"])]),w(t("div",re," A new verification link has been sent to your email address. ",512),[[W,U.value]])])):P("",!0)])]),actions:l(()=>[o(x,{on:s(a).recentlySuccessful,class:"mr-3"},{default:l(()=>e[16]||(e[16]=[r(" Saved. ")])),_:1},8,["on"]),o(V,{class:_({"opacity-25":s(a).processing}),disabled:s(a).processing},{default:l(()=>e[17]||(e[17]=[r(" Save ")])),_:1},8,["class","disabled"])]),_:1})],64))}};export{he as default};
