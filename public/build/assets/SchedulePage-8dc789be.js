import{o as n,e as r,a as e,j as M,k as m,E as g,F as b,h as x,t as u,D as S,N as y,c as _,w as C,g as p,n as $,f as k}from"./app-547f1a99.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as E}from"./AppLayout-94f88905.js";import"./ResponsiveNavLink-ea534266.js";const V={data(){return{startDate:"",endDate:"",days:[]}},methods:{generateDays(){const o=new Date(this.startDate),t=new Date(this.endDate);this.days=[];for(let i=o;i<=t;i.setDate(i.getDate()+1))this.days.push({date:new Date(i).toISOString().split("T")[0],info:""})},formatDayName(o){return["Duminică","Luni","Marți","Miercuri","Joi","Vineri","Sâmbătă"][new Date(o).getDay()]},submitSchedule(){axios.post("/api/schedule",{days:this.days,user_id:1}).then(()=>{this.$emit("close")})}}},N={class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-50"},j={class:"modal bg-white w-full max-w-lg p-6 rounded-lg shadow-lg"},U=e("h2",{class:"text-xl font-semibold text-gray-800 mb-4"},"Create Schedule",-1),L={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},A=e("label",{class:"block text-sm font-medium text-gray-700",for:"startDate"},"Start Date",-1),B=e("label",{class:"block text-sm font-medium text-gray-700",for:"endDate"},"End Date",-1),z={class:"text-gray-700 text-sm font-medium flex items-center justify-center truncate"},I=["onUpdate:modelValue"],O={class:"flex gap-2"},T=e("button",{type:"submit",class:"w-full px-4 py-2 bg-indigo-600 text-white rounded-md shadow hover:bg-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300"}," Save Schedule ",-1);function F(o,t,i,w,a,d){return n(),r("div",N,[e("div",j,[U,e("form",{onSubmit:t[4]||(t[4]=M((...s)=>d.submitSchedule&&d.submitSchedule(...s),["prevent"])),class:"space-y-4"},[e("div",L,[e("div",null,[A,m(e("input",{type:"date",id:"startDate","onUpdate:modelValue":t[0]||(t[0]=s=>a.startDate=s),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[g,a.startDate]])]),e("div",null,[B,m(e("input",{type:"date",id:"endDate","onUpdate:modelValue":t[1]||(t[1]=s=>a.endDate=s),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[g,a.endDate]])])]),e("button",{type:"button",onClick:t[2]||(t[2]=(...s)=>d.generateDays&&d.generateDays(...s)),class:"px-4 py-2 bg-indigo-600 text-white rounded-md shadow hover:bg-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300"}," Generate Days "),(n(!0),r(b,null,x(a.days,(s,h)=>(n(),r("div",{class:"grid grid-cols-[0.5fr_2fr] gap-4 border-t pt-4",key:h},[e("span",z,u(d.formatDayName(s.date)),1),m(e("input",{type:"text","onUpdate:modelValue":f=>s.info=f,placeholder:"Info",class:"border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block"},null,8,I),[[g,s.info]])]))),128)),e("div",O,[T,e("button",{type:"button",onClick:t[3]||(t[3]=s=>o.$emit("close")),class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md shadow hover:bg-gray-200"}," Cancel ")])],32)])])}const J=D(V,[["render",F]]),P={props:{day:{type:Object,required:!0}},methods:{submitEdit(){axios.patch(`/api/schedule/${this.day.id}/edit`,{info:this.day.info}).then(()=>{this.$emit("updated"),this.$emit("close")})}}},q={class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-50"},G={class:"modal bg-white w-full max-w-md p-6 rounded-lg shadow-lg"},R=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Edit Day",-1),H={class:"mb-4"},K=e("label",{class:"block text-sm font-medium text-gray-700"},"Date",-1),Q={class:"mb-4"},W=e("label",{class:"block text-sm font-medium text-gray-700"},"Info",-1),X={class:"flex justify-end space-x-4"},Y=e("button",{type:"submit",class:"px-4 py-2 text-white bg-indigo-600 rounded-md shadow hover:bg-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300"}," Save ",-1);function Z(o,t,i,w,a,d){return n(),r("div",q,[e("div",G,[R,e("form",{onSubmit:t[3]||(t[3]=M((...s)=>d.submitEdit&&d.submitEdit(...s),["prevent"]))},[e("div",H,[K,m(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>i.day.date=s),class:"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",disabled:""},null,512),[[g,i.day.date]])]),e("div",Q,[W,m(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>i.day.info=s),class:"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[g,i.day.info]])]),e("div",X,[e("button",{type:"button",onClick:t[2]||(t[2]=s=>o.$emit("close")),class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md shadow hover:bg-gray-200"}," Cancel "),Y])],32)])])}const ee=D(P,[["render",Z]]);const te={components:{CreateScheduleModal:J,EditDayModal:ee,AppLayout:E},data(){return{schedules:[],showCreateModal:!1,showEditDayModal:!1,selectedDay:null}},methods:{fetchSchedules(){S.get("/api/schedule/all").then(o=>{this.schedules=o.data})},formatDate(o){return new Date(o).toLocaleDateString("ro-RO")},formatDayName(o){return["Duminică","Luni","Marți","Miercuri","Joi","Vineri","Sâmbătă"][new Date(o).getDay()]},openCreateScheduleModal(){this.showCreateModal=!0},openEditDayModal(o){this.selectedDay=o,this.showEditDayModal=!0},toggleDayStatus(o){S.patch(`/api/schedule/${o.id}/toggle-status`).then(()=>{o.active=!o.active})}},mounted(){this.fetchSchedules()}},se=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Schedule ",-1),oe={class:"py-12"},de={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ae={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},ne={class:"scheduler p-6"},ie={class:"flex justify-between items-center mb-6"},le=e("h1",{class:"text-2xl font-bold text-gray-700"},"Schedule Manager",-1),re={class:"schedule-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ce={class:"text-lg font-semibold text-gray-800"},ue={class:"text-sm text-gray-500"},me={class:"font-medium text-gray-600"},ge={class:"font-medium text-gray-600"},he={class:"mt-4 space-y-2"},fe={class:"font-medium"},ye={class:"flex space-x-2"},_e=["onClick"],pe=["onClick"],be=["onClick"];function xe(o,t,i,w,a,d){const s=y("CreateScheduleModal"),h=y("EditDayModal"),f=y("AppLayout");return n(),_(f,{title:"Dashboard"},{header:C(()=>[se]),default:C(()=>[e("div",oe,[e("div",de,[e("div",ae,[e("div",ne,[e("div",ie,[le,e("button",{onClick:t[0]||(t[0]=(...l)=>d.openCreateScheduleModal&&d.openCreateScheduleModal(...l)),class:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg shadow hover:bg-indigo-500 focus:outline-none focus:ring focus:ring-indigo-300"}," Add New Schedule ")]),e("div",re,[(n(!0),r(b,null,x(a.schedules,l=>(n(),r("div",{key:l.id,class:"schedule-card bg-gray-50 p-4 rounded-lg shadow-md border border-gray-200"},[e("h2",ce,"Schedule #"+u(l.id),1),e("p",ue,[p(" Between "),e("span",me,u(d.formatDate(l.days[0].date)),1),p(" and "),e("span",ge,u(d.formatDate(l.days[l.days.length-1].date)),1)]),e("ul",he,[(n(!0),r(b,null,x(l.days,c=>(n(),r("li",{key:c.id,class:"flex justify-between items-center bg-white p-2 rounded shadow-sm border border-gray-200"},[e("div",{class:$(["text-sm text-gray-700",{"line-through text-gray-400":!c.active}])},[e("span",fe,u(d.formatDayName(c.date)),1),p(": "+u(c.info),1)],2),e("div",ye,[e("button",{onClick:v=>d.openEditDayModal(c),class:"text-indigo-600 text-sm font-medium hover:underline"}," Edit ",8,_e),c.active?(n(),r("button",{key:0,onClick:v=>d.toggleDayStatus(c),class:"text-red-600 text-sm font-medium hover:underline"}," Cancel ",8,pe)):(n(),r("button",{key:1,onClick:v=>d.toggleDayStatus(c),class:"text-green-600 text-sm font-medium hover:underline"}," Activate ",8,be))])]))),128))])]))),128))]),a.showCreateModal?(n(),_(s,{key:0,onClose:t[1]||(t[1]=l=>a.showCreateModal=!1)})):k("",!0),a.showEditDayModal?(n(),_(h,{key:1,day:a.selectedDay,onClose:t[2]||(t[2]=l=>a.showEditDayModal=!1),onUpdated:d.fetchSchedules},null,8,["day","onUpdated"])):k("",!0)])])])])]),_:1})}const Ce=D(te,[["render",xe]]);export{Ce as default};
